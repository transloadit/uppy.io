<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM | Uppy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:url" content="https://uppy.io"><meta data-rh="true" name="twitter:card" content="img/og_image.jpg"><meta data-rh="true" name="twitter:domain" content="uppy.io"><meta data-rh="true" name="twitter:url" content="https://uppy.io"><meta data-rh="true" name="twitter:title" content="Uppy"><meta data-rh="true" name="twitter:description" content="Sleek, modular open source JavaScript file uploader"><meta data-rh="true" property="og:title" content="Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM | Uppy"><meta data-rh="true" name="description" content="Weâ€™re always looking for opportunities to teach Uppy cool new tricks, and the"><meta data-rh="true" property="og:description" content="Weâ€™re always looking for opportunities to teach Uppy cool new tricks, and the"><meta data-rh="true" property="og:image" content="https://uppy.io/img/blog/2.4-2.7/compressor.jpg"><meta data-rh="true" name="twitter:image" content="https://uppy.io/img/blog/2.4-2.7/compressor.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-03-11T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://uppy.io/blog/2022/03/2.4-2.7/"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/2022/03/2.4-2.7/" hreflang="en"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/2022/03/2.4-2.7/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q65IKQHNN5-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Uppy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Uppy Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Uppy" href="/opensearch.xml">

<script src="https://analytics.transloadit.com/js/plausible.js" async defer="defer" data-domain="uppy.io"></script>
<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.986ced6a.css">
<link rel="preload" href="/assets/js/runtime~main.080f925c.js" as="script">
<link rel="preload" href="/assets/js/main.e1e64b6f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Uppy Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Uppy Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Uppy</b></a><a class="navbar__item navbar__link" href="/docs/quick-start/">Docs</a><a class="navbar__item navbar__link" href="/examples/">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://community.transloadit.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://transloadit.com/open-source/support/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-05-new-website/">New Uppy.io and docs</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/12/3.3/">ðŸŽ„ Uppy 3.1-3.3: Improved AWS S3 Multipart, Single File Mode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/09/3.0/">Uppy 3.0: Future-proof, conveniently easy, stable as ever</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2022/03/2.4-2.7/">Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/12/2.1-2.3/">ðŸŽ„ Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://uppy.io/img/blog/2.4-2.7/compressor.jpg"><header><h1 class="title_f1Hy" itemprop="headline">Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-03-11T00:00:00.000Z" itemprop="datePublished">March 11, 2022</time> Â· <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:antoine@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/aduh95.png" alt="Antoine du Hamel"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="mailto:antoine@transloadit.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Antoine du Hamel</span></a></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:artur@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/arturi.png" alt="Artur Paikin"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="mailto:artur@transloadit.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Artur Paikin</span></a></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:mikael@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/mifi.png" alt="Mikael Finstad"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="mailto:mikael@transloadit.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Mikael Finstad</span></a></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:merlijn@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/murderlon.png" alt="Merlijn Vos"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="mailto:merlijn@transloadit.com" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Merlijn Vos</span></a></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Weâ€™re always looking for opportunities to teach Uppy cool new tricks, and the
past few months have been no exception. Since our
<a href="https://uppy.io/blog/2021/12/2.1-2.3/" target="_blank" rel="noopener noreferrer">most recent post</a> in December, Uppy has
continued to receive a steady stream of updates. This post covers all the
improvements made in Uppy versions 2.4 through 2.7. Changes and additions
include: image compression, improved Transloadit rate limiting and a lighter
Dashboard plugin. Weâ€™ve also moved our end-to-end tests to Cypress, and are
slowly converting plugins to ES modules (ESM).</p><img loading="lazy" class="border img_ev3q" alt="Uppy Compressor plugin showing compressed images notification" src="/img/blog/2.4-2.7/compressor.jpg"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="compressor">Compressor<a href="#compressor" class="hash-link" aria-label="Direct link to Compressor" title="Direct link to Compressor">â€‹</a></h2><p>Some of the most commonly uploaded files on the internet are images â€” photos,
stock images, screenshots, and documents scans. Uppy now includes a new plugin
called <code>@uppy/compressor</code> that optimizes images (JPEG, PNG), saving on average
up to 60% in size (roughly 18 MB for 10 images). It uses
<a href="https://github.com/fengyuanchen/compressorjs" target="_blank" rel="noopener noreferrer">Compressor.js</a> under the hood.</p><p><a href="https://uppy.io/docs/compressor/" target="_blank" rel="noopener noreferrer">Read the docs</a> and
<a href="https://uppy.io/examples/dashboard/" target="_blank" rel="noopener noreferrer">try Compressor in action</a>.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Compressor</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/compressor&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Compressor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>@uppy/compressor</code> is also the first plugin that we are releasing as ESM,
backwards compatible as CJS, to test out how this works. Please report any
issues.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hosted-companion-custom-credentials">Hosted Companion custom credentials<a href="#hosted-companion-custom-credentials" class="hash-link" aria-label="Direct link to Hosted Companion custom credentials" title="Direct link to Hosted Companion custom credentials">â€‹</a></h2><p>It cannot be overstated that our
<a href="https://transloadit.com/docs/sdks/uppy/" target="_blank" rel="noopener noreferrer">Transloadit-hosted</a>
<a href="https://uppy.io/docs/companion/" target="_blank" rel="noopener noreferrer">Companion Plugin</a> is the easiest secure way to
allow your users pick files from cloud sources like Google Drive, Instagram,
Box, etc. via Uppy. Up until now, however, that meant your users had to
authenticate their cloud account with Transloadit, preventing you from showing
your own logo instead. That has now been fixed! Head to <code>Transloadit Console</code> /
<code>Credentials</code>, scroll down to <code>Third-party Credentials</code>, click on
<code>Add new Credentials</code>, select <code>Companion OAuth</code>, and voilÃ !</p><img loading="lazy" class="border img_ev3q" alt="Transloadit Companion 3rd party credentials" src="/img/blog/2.4-2.7/companion-3rd-party-oauth.jpg"><p>Try it out with the
<a href="https://transloadit.com/pricing/" target="_blank" rel="noopener noreferrer">free Transloadit Community Plan â€” 5GB / month and access to Companion</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="transloadit-rate-limiting">Transloadit rate limiting<a href="#transloadit-rate-limiting" class="hash-link" aria-label="Direct link to Transloadit rate limiting" title="Direct link to Transloadit rate limiting">â€‹</a></h2><p>Weâ€™ve added rate limiting to Transloadit
<a href="https://github.com/transloadit/uppy/pull/3429" target="_blank" rel="noopener noreferrer">assembly creation and status polling</a>,
and <a href="https://github.com/transloadit/uppy/pull/3394" target="_blank" rel="noopener noreferrer">tus retries</a>:</p><blockquote><p>When the remote server responds with HTTP 429, all requests are paused for a
while in the hope that it can resolve the rate limiting. Failed requests are
now also queued up after the retry delay. Before, they were scheduled for
retry without being queued up, which would sometimes end up overflowing the
limit option.</p></blockquote><p>As a result of this change, uploading many files at once has become even more
robust.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="move-to-esm">Move to ESM<a href="#move-to-esm" class="hash-link" aria-label="Direct link to Move to ESM" title="Direct link to Move to ESM">â€‹</a></h2><p>The JavaScript ecosystem is moving towards ESM, and we want to follow suit. We
are slowly starting to adopt ESM in Uppy packages. To do so, we integrated a
plugin into our build system that transpiles ESM source code to CommonJS syntax,
which is distributed with the npm package. Nothing will change on your end,
though â€“ we know that not everyone is using tooling that support ESM, so weâ€™re
holding on to CommonJS for the time being. Our plan is to refactor all official
Uppy plugins to ESM before Uppy 3.0 is released, and drop CommonJS in favor of
ESM in the npm packages at that point.</p><p>For details, see <a href="https://github.com/transloadit/uppy/pull/3468" target="_blank" rel="noopener noreferrer">PR 3468</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-move-to-cypress">End to end: move to Cypress<a href="#end-to-end-move-to-cypress" class="hash-link" aria-label="Direct link to End to end: move to Cypress" title="Direct link to End to end: move to Cypress">â€‹</a></h2><p>Uppy has had end to end from the start, but the developer experience was less
than ideal with custom Webdriver.io + Selenium. The transition to
<a href="https://github.com/transloadit/uppy/pull/3444" target="_blank" rel="noopener noreferrer">Cypress</a> allows us to write
tests with ease and comfort, backed by great documentation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lighter-bundle">Lighter Bundle<a href="#lighter-bundle" class="hash-link" aria-label="Direct link to Lighter Bundle" title="Direct link to Lighter Bundle">â€‹</a></h2><p>We continue to look for ways to reduce Uppyâ€™s bundle size and modernize our
build toolchain. This time, weâ€™ve replaced the
<a href="https://github.com/exif-js/exif-js" target="_blank" rel="noopener noreferrer">Exifr.js</a> legacy bundle with the modern one
without IE polyfills. Our Browserify bundler has been replaced with a modern and
more efficient ESBuild.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion-improvements">Companion improvements<a href="#companion-improvements" class="hash-link" aria-label="Direct link to Companion improvements" title="Direct link to Companion improvements">â€‹</a></h2><ul><li>Improved private IP check (#3403)</li><li>Implement periodic ping functionality (#3246)</li><li>Fix broken thumbnails for Box and Dropbox (#3460)</li><li>Fix unpslash author meta, sanitize metadata to strings and improve Companion
tests (#3478)</li></ul><p>Thatâ€™s it for today! See the full
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1300" target="_blank" rel="noopener noreferrer">changelog</a>
for more details.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Wr5y"><ul class="footer_ZfVL"><li><a target="_blank" rel="noopener" href="https://twitter.com/uppy_io">Twitter</a></li><li><a target="_blank" rel="noopener" href="https://uppy.io/blog/atom.xml">RSS feed</a></li><li><a target="_blank" rel="noopener" href="https://github.com/transloadit/uppy">GitHub</a></li></ul></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2022/09/3.0/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Uppy 3.0: Future-proof, conveniently easy, stable as ever</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/12/2.1-2.3/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">ðŸŽ„ Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#compressor" class="table-of-contents__link toc-highlight">Compressor</a></li><li><a href="#hosted-companion-custom-credentials" class="table-of-contents__link toc-highlight">Hosted Companion custom credentials</a></li><li><a href="#transloadit-rate-limiting" class="table-of-contents__link toc-highlight">Transloadit rate limiting</a></li><li><a href="#move-to-esm" class="table-of-contents__link toc-highlight">Move to ESM</a></li><li><a href="#end-to-end-move-to-cypress" class="table-of-contents__link toc-highlight">End to end: move to Cypress</a></li><li><a href="#lighter-bundle" class="table-of-contents__link toc-highlight">Lighter Bundle</a></li><li><a href="#companion-improvements" class="table-of-contents__link toc-highlight">Companion improvements</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.080f925c.js"></script>
<script src="/assets/js/main.e1e64b6f.js"></script>
</body>
</html>