<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Uppy 0.21: End to End Tests, Accessibility, Additional Security for Uppy Server | Uppy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://uppy.io/img/og_image.jpg"><meta data-rh="true" name="twitter:image" content="https://uppy.io/img/og_image.jpg"><meta data-rh="true" property="og:url" content="https://uppy.io/blog/2017/10/0.21/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:domain" content="uppy.io"><meta data-rh="true" name="twitter:title" content="Uppy"><meta data-rh="true" name="twitter:description" content="Sleek, modular open source JavaScript file uploader"><meta data-rh="true" property="og:title" content="Uppy 0.21: End to End Tests, Accessibility, Additional Security for Uppy Server | Uppy"><meta data-rh="true" name="description" content="Hi all! We’ve been busy with Halloween, but also another release, so here is"><meta data-rh="true" property="og:description" content="Hi all! We’ve been busy with Halloween, but also another release, so here is"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2017-11-24T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://uppy.io/blog/2017/10/0.21/"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/2017/10/0.21/" hreflang="en"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/2017/10/0.21/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q65IKQHNN5-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://uppy.io/blog/2017/10/0.21","mainEntityOfPage":"https://uppy.io/blog/2017/10/0.21","url":"https://uppy.io/blog/2017/10/0.21","headline":"Uppy 0.21: End to End Tests, Accessibility, Additional Security for Uppy Server","name":"Uppy 0.21: End to End Tests, Accessibility, Additional Security for Uppy Server","description":"Hi all! We’ve been busy with Halloween, but also another release, so here is","datePublished":"2017-11-24T00:00:00.000Z","author":{"@type":"Person","name":"Artur Paikin","email":"artur@transloadit.com","image":"https://github.com/arturi.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://uppy.io/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Uppy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Uppy Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Uppy" href="/opensearch.xml">

<meta name="google-site-verification" content="JxARoHXoCI8bD07pLV_u3z6xpuWNcSIZIcHEytyCkUc">
<script src="https://plausible.io/js/script.js" async defer="defer" data-domain="uppy.io"></script>
<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.5855d191.css">
<script src="/assets/js/runtime~main.9ac8d9e7.js" defer="defer"></script>
<script src="/assets/js/main.9781c112.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Uppy</b></a><a class="navbar__item navbar__link" href="/docs/quick-start/">Docs</a><a class="navbar__item navbar__link" href="/examples/">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://community.transloadit.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://transloadit.com/open-source/support/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/uppy-4.0/">New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/3.13-3.21/">🎄 Uppy 3.13 to 3.21: Typescript Saga: the beginning, Image Editor improvements, Dashboard auto-install</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-10-25-image-editor/">Scaling Images on Rotation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/07/3.3-3.13/">Uppy 3.3 to 3.13: conditional S3 multipart, signing on the client, speedy handling of 10k files and much much more</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023-05-new-website/">New Uppy.io and docs</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Uppy 0.21: End to End Tests, Accessibility, Additional Security for Uppy Server</h1><div class="container_mt6G margin-vert--md"><time datetime="2017-11-24T00:00:00.000Z">November 24, 2017</time> · <!-- -->6 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:artur@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/arturi.png" alt="Artur Paikin"></a><div class="avatar__intro"><div class="avatar__name"><a href="mailto:artur@transloadit.com" target="_blank" rel="noopener noreferrer"><span>Artur Paikin</span></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>Hi all! We’ve been busy with Halloween, but also another release, so here is
Uppy <code>0.21</code>! This one improves accessibility, features new end-to-end tests and
improved security in Uppy Server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="accessibility">Accessibility<a class="hash-link" aria-label="Direct link to Accessibility" title="Direct link to Accessibility" href="/blog/2017/10/0.21/#accessibility">​</a></h2>
<p>One of the goals we’ve set out to achieve with Uppy was to make an accessibe
file upload widget, and in this release we’ve achieved some more progress in
this area:</p>
<ul>
<li>Dashboard modal dialog now handles focus better (it’s trapped inside the modal
while open);</li>
<li>First button is in focus right after the modal dialog is open;</li>
<li>More (aria-)labels have been added;</li>
<li>Files from remote providers are now selectable with a keyboard.</li>
</ul>
<p>We plan to continue gradually improving in the accessibility area.</p>
<p>See <a href="https://github.com/transloadit/uppy/pull/414" target="_blank" rel="noopener noreferrer">#414 PR</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="returning--successful-failed--from-uppyupload">Returning <code>{ successful, failed }</code> from <code>uppy.upload()</code><a class="hash-link" aria-label="Direct link to returning--successful-failed--from-uppyupload" title="Direct link to returning--successful-failed--from-uppyupload" href="/blog/2017/10/0.21/#returning--successful-failed--from-uppyupload">​</a></h2>
<p><strong>⚠️ Breaking change</strong></p>
<p><code>uppy.upload()</code> promise now resolves to a <code>result</code> object with two arrays of
files: <code>{ successful, failed }</code>. This lets you handle succesful and failed
uploads in one go:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">upload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">info</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Successful uploads:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">successful</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">failed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Errors:&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">failed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;core:complete&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> successful</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> failed </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">failed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;UPLOAD SUCCESSFUL!!!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">warn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;UPLOAD FAILED!!!&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;successful files:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> successful</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;failed files:&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> failed</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://uppy.io/docs/uppy/#uppy-upload" target="_blank" rel="noopener noreferrer"><code>uppy.upload()</code></a> and
<a href="https://uppy.io/docs/uppy/#core-complete" target="_blank" rel="noopener noreferrer"><code>core:complete</code></a> in docs, as well as
<a href="https://github.com/transloadit/uppy/pull/404" target="_blank" rel="noopener noreferrer">#404 PR</a> for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-tests">End to end tests<a class="hash-link" aria-label="Direct link to End to end tests" title="Direct link to End to end tests" href="/blog/2017/10/0.21/#end-to-end-tests">​</a></h2>
<p>We’ve refactored end to end tests to use <a href="http://webdriver.io" target="_blank" rel="noopener noreferrer">Webdriver.io</a>,
and for the occasion added tests for Edge, Safari, Android and iOS. Now tests on
Travis and Sauce Labs (thanks for the open source tier!) run smoothly and it’s
easier to alter them or write new ones.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-secure-uppy-server">More secure Uppy Server<a class="hash-link" aria-label="Direct link to More secure Uppy Server" title="Direct link to More secure Uppy Server" href="/blog/2017/10/0.21/#more-secure-uppy-server">​</a></h2>
<p>We made sure access tokens from third-party providers, such as Google Drive or
Instagram, are not stored on the server with Uppy Server, and kept in your
browser instead. Then, when you want to pick a file from your Instagram, the
token is used to make a request to Uppy Server, which is in turn used by Uppy
Server to communicate with Instagram.</p>
<p>Data validation is also now done during intiation of an upload, to prevent
corrupt data from triggering funny behaviours on the server. :)</p>
<p>And, while we were at this, we also made sure all sensitive data is masked in
request logs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-to-dropbox-v2-api">Migration to Dropbox v2 API<a class="hash-link" aria-label="Direct link to Migration to Dropbox v2 API" title="Direct link to Migration to Dropbox v2 API" href="/blog/2017/10/0.21/#migration-to-dropbox-v2-api">​</a></h2>
<p>Since the
<a href="https://blogs.dropbox.com/developers/2017/09/api-v1-shutdown-details/" target="_blank" rel="noopener noreferrer">deprecation of Dropbox v1 API</a>,
uppy/uppy-server have now been updated to use the v2 API. It is implemented to
work closely as its previous implementation so there should be no worries.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-plugin-id">Custom plugin id<a class="hash-link" aria-label="Direct link to Custom plugin id" title="Direct link to Custom plugin id" href="/blog/2017/10/0.21/#custom-plugin-id">​</a></h2>
<p>Up until now you could only use a plugin once with an Uppy instance. Now you can
pass custom <code>id</code> for any plugin (though this has to be manually implemented in
any new plugin). This allows using, for example, two <code>StatusBar</code>s, one inside
the <code>Dashboard</code>, and one somewhere on the page, visible even when <code>Dashboard</code> is
closed.</p>
<p>Can be used like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// one StatusBar comes included in the Dashboard, another will be mounted on the page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token spread operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">StatusBar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PageStatusBar&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;body&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://github.com/transloadit/uppy/pull/418" target="_blank" rel="noopener noreferrer">#418 PR</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc-good-stuff">Misc good stuff<a class="hash-link" aria-label="Direct link to Misc good stuff" title="Direct link to Misc good stuff" href="/blog/2017/10/0.21/#misc-good-stuff">​</a></h2>
<ul>
<li>Migrated Dropbox in Uppy Server to use v2 API.</li>
<li>Fixed generating thumbnails for images with transparent background.</li>
<li>We are now using <a href="https://github.com/goto-bus-stop/tinyify" target="_blank" rel="noopener noreferrer"><code>tinyify</code></a>(by our
own <a href="https://github.com/goto-bus-stop" target="_blank" rel="noopener noreferrer">@goto-bus-stop</a>) for the Uppy bundle to
make it smaller and more efficient.</li>
<li>Instead of restarting only the file upload itself, start an entirely new
upload for retries. Fixes retrying uploads with processing plugins.</li>
<li>The S3 plugin now includes XHRUpload. <strong>⚠️ Breaking change: you should remove
<code>.use(XHRUpload)</code> when using S3.</strong></li>
<li>XHRUpload now includes a timeout <code>opts.timeout = 30000</code>, after which it errors
and offers a retry (retry UI supported in Dashboard), see
<a href="https://github.com/transloadit/uppy/pull/378" target="_blank" rel="noopener noreferrer">#378</a> for more.</li>
<li>Renamed <code>RestoreFiles</code> → <code>GoldenRetriever</code>, and <code>Tus10</code> → <code>Tus</code>. <strong>⚠️ Breaking
change: please make sure to use the new names when setting up plugins</strong>.</li>
<li>The Webcam plugin has been refactored. There’s no flash fallback now, it works
in modern browsers only, and the Webcam tab won’t appear in the Dashboard if a
camera is not supported on the device.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="full-changelog">Full Changelog<a class="hash-link" aria-label="Direct link to Full Changelog" title="Direct link to Full Changelog" href="/blog/2017/10/0.21/#full-changelog">​</a></h2>
<p>Here is the full list of changes for version <code>0.21.0</code> (and patches <code>0.20.1</code>,
<code>0.20.2</code>, <code>0.20.3</code>):</p>
<ul>
<li>accessibility: add tabindex=&quot;0&quot; to buttons and tabs, aria-labels, focus (#414
/ @arturi)</li>
<li>core: allow setting custom <code>id</code> for plugins to allow a plugin to be used
multiple times (#418 / @arturi)</li>
<li>core: do not check isPreviewSupported for unknown filetypes (#417 /
@sadovnychyi)</li>
<li>core: refactor <code>uppy-base</code> (#382 / @goto-bus-stop)</li>
<li>core: remove functions from state object (#408 / @goto-bus-stop)</li>
<li>core: return <code>{ successful, failed }</code> from <code>uppy.upload()</code> (#404 /
@goto-bus-stop)</li>
<li>core: update state with error messages rather than error objects (#406 /
@richardwillars)</li>
<li>core: use <code>tinyify</code> for the unpkg bundle. (#371 / @goto-bus-stop)</li>
<li>dashboard: Fix pasting files, default <code>image</code> file name, add type to meta,
file type refactor (#395 / @arturi)</li>
<li>dragdrop: Fix of the .uppy-DragDrop-inner spacing on small screens (#405 /
@nqst)</li>
<li>react: fix <code>uppy</code> PropType, closes (#416 / @goto-bus-stop)</li>
<li>s3: automatically wrap XHRUpload. Users should remove <code>.use(XHRUpload)</code> when
using S3. (#408 / @goto-bus-stop)</li>
<li>test: refactored end-to-end tests to not use website, switched to
Webdriver.io, added tests for Edge, Safari, Android and iOS (#410 / @arturi)</li>
<li>tus: Rename Tus10 → Tus (#285 / @goto-bus-stop)</li>
<li>uppy-serer: mask sensitive data from request logs (@ifedapoolarewaju)</li>
<li>uppy-server: add request body validators (@ifedapoolarewaju)</li>
<li>uppy-server: migrate dropbox to use v2 API (#386 / @ifedapoolarewaju)</li>
<li>uppy-server: store tokens in user’s browser only (@ifedapoolarewaju)</li>
<li>webcam: only show the webcam tab when browser support is available (media
recorder API) (#421 / @arturi, @goto-bus-stop)</li>
<li>webcam: simplify and refactor webcam plugin (modern browser APIs only) (#382 /
@goto-bus-stop)</li>
<li>xhrupload: set a timeout in the onprogress event handler to detect stale
network (#378 / @goto-bus-stop)</li>
<li>uppy-server: allow flexible whitelist endpoint protocols (@ifedapoolarewaju)</li>
<li>core: Start a completely new upload when retrying. (#390 / @goto-bus-stop)</li>
<li>dashboard: Show errors that occurred during processing on the file items.
(#391 / @goto-bus-stop)</li>
<li>transloadit: Mark files as having errored if their assembly fails. (#392 /
@goto-bus-stop)</li>
<li>core: Clear file upload progress when an upload starts. (#393 /
@goto-bus-stop)</li>
<li>tus: Clean up <code>tus.Upload</code> instance and events when an upload starts,
finishes, or fails. (#390 / @goto-bus-stop)</li>
<li>docs: fix <code>getMetaFromForm</code> documentation (@arturi)</li>
<li>core: fix generating thumbnails for images with transparent background (#380 /
@goto-bus-stop)</li>
<li>transloadit: use Translator class for localised strings (#383 /
@goto-bus-stop)</li>
<li>goldenretriever: don&#x27;t crash when required server-side (#384 / @goto-bus-stop)</li>
<li>redux: add plugin for syncing uppy state with a Redux store (#376 /
@richardwillars)</li>
</ul>
<p>The Uppy Team</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Wr5y"><ul class="footer_ZfVL"><li><a href="https://twitter.com/uppy_io" target="_blank" rel="noopener">Twitter</a></li><li><a href="https://uppy.io/blog/atom.xml" target="_blank" rel="noopener">RSS feed</a></li><li><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener">GitHub</a></li></ul></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2017/12/0.22/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Uppy 0.22: Preact, Form, Improved Dashboard, Custom Stores</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2017/10/0.20/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Uppy 0.20: React, Retry &amp; Time Travel</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#accessibility">Accessibility</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#returning--successful-failed--from-uppyupload">Returning <code>{ successful, failed }</code> from <code>uppy.upload()</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#end-to-end-tests">End to end tests</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#more-secure-uppy-server">More secure Uppy Server</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#migration-to-dropbox-v2-api">Migration to Dropbox v2 API</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#custom-plugin-id">Custom plugin id</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#misc-good-stuff">Misc good stuff</a></li><li><a class="table-of-contents__link toc-highlight" href="/blog/2017/10/0.21/#full-changelog">Full Changelog</a></li></ul></div></div></div></div></div><footer class="footer_J6tW"><p><img class="IndexFooter-logo" title="Uppy" alt="Uppy" src="/img/logo.svg"></p><p>Released under the<!-- --> <a href="http://opensource.org/licenses/MIT" target="_blank" rel="noreferrer noopener">MIT License</a> <!-- -->⋅ <a href="/privacy-policy/">Privacy Policy</a> ⋅<!-- --> <a href="https://github.com/transloadit/uppy/blob/main/.github/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contributing</a></p><p>© 2016-<!-- -->2025<!-- --> <a href="https://transloadit.com" target="_blank" rel="noopener noreferrer">Transloadit</a></p></footer></div>
</body>
</html>