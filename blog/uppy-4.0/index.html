<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more | Uppy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:url" content="https://uppy.io/blog/uppy-4.0/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:domain" content="uppy.io"><meta data-rh="true" name="twitter:title" content="Uppy"><meta data-rh="true" name="twitter:description" content="Sleek, modular open source JavaScript file uploader"><meta data-rh="true" property="og:title" content="New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more | Uppy"><meta data-rh="true" name="description" content="Hold on to your leashes, folks! Uppy 4.0 is here, and it’s more exciting than a"><meta data-rh="true" property="og:description" content="Hold on to your leashes, folks! Uppy 4.0 is here, and it’s more exciting than a"><meta data-rh="true" property="og:image" content="https://uppy.io/img/blog/4.0/preview.jpg"><meta data-rh="true" name="twitter:image" content="https://uppy.io/img/blog/4.0/preview.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-07-10T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://uppy.io/blog/uppy-4.0/"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/uppy-4.0/" hreflang="en"><link data-rh="true" rel="alternate" href="https://uppy.io/blog/uppy-4.0/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q65IKQHNN5-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://uppy.io/blog/uppy-4.0","mainEntityOfPage":"https://uppy.io/blog/uppy-4.0","url":"https://uppy.io/blog/uppy-4.0","headline":"New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more","name":"New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more","description":"Hold on to your leashes, folks! Uppy 4.0 is here, and it’s more exciting than a","datePublished":"2024-07-10T00:00:00.000Z","author":[{"@type":"Person","name":"Antoine du Hamel","email":"antoine@transloadit.com","image":"https://github.com/aduh95.png"},{"@type":"Person","name":"Evgenia Karunus","email":"lakesare@gmail.com","image":"https://github.com/lakesare.png"},{"@type":"Person","name":"Mikael Finstad","email":"mikael@transloadit.com","image":"https://github.com/mifi.png"},{"@type":"Person","name":"Merlijn Vos","email":"merlijn@transloadit.com","image":"https://github.com/murderlon.png"}],"image":{"@type":"ImageObject","@id":"https://uppy.io/img/blog/4.0/preview.jpg","url":"https://uppy.io/img/blog/4.0/preview.jpg","contentUrl":"https://uppy.io/img/blog/4.0/preview.jpg","caption":"title image for the blog post: New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://uppy.io/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Uppy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Uppy Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Uppy" href="/opensearch.xml">

<meta name="google-site-verification" content="JxARoHXoCI8bD07pLV_u3z6xpuWNcSIZIcHEytyCkUc">
<script src="https://plausible.io/js/script.js" async defer="defer" data-domain="uppy.io"></script>
<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.cdd6708e.css">
<script src="/assets/js/runtime~main.0a4762f1.js" defer="defer"></script>
<script src="/assets/js/main.79ab7f95.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="https://github.com/aduh95.png"><link rel="preload" as="image" href="https://github.com/lakesare.png"><link rel="preload" as="image" href="https://github.com/mifi.png"><link rel="preload" as="image" href="https://github.com/murderlon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><p class="header_wuUL"><a href="/blog/uppy-5.0/">Uppy 5.0 is here with headless components and hooks</a></p><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Uppy</b></a><a class="navbar__item navbar__link" href="/docs/quick-start/">Docs</a><a class="navbar__item navbar__link" href="/examples/">Examples</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog/">Blog</a><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://community.transloadit.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://transloadit.com/open-source/support/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts="Meta+k"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 24 24" aria-hidden="true"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1"><article class=""><header><h1 class="title_f1Hy">New Uppy 4.0 major: TypeScript rewrite, Google Photos, React hooks, and much more</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-07-10T00:00:00.000Z">July 10, 2024</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:antoine@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/aduh95.png" alt="Antoine du Hamel"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="mailto:antoine@transloadit.com" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Antoine du Hamel</span></a></div><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:lakesare@gmail.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/lakesare.png" alt="Evgenia Karunus"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="mailto:lakesare@gmail.com" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Evgenia Karunus</span></a></div><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:mikael@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/mifi.png" alt="Mikael Finstad"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="mailto:mikael@transloadit.com" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Mikael Finstad</span></a></div><div class="authorSocials_rSDt"></div></div></div></div><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="mailto:merlijn@transloadit.com" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://github.com/murderlon.png" alt="Merlijn Vos"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="mailto:merlijn@transloadit.com" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp" translate="no">Merlijn Vos</span></a></div><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><img decoding="async" loading="lazy" src="/img/blog/4.0/preview.jpg" alt="Screenshot of Uppy Dashboard with text outlining the major new features in 4.0" class="img_ev3q">
<p>Hold on to your leashes, folks! Uppy 4.0 is here, and it’s more exciting than a
tennis ball at the dog park! Our beloved Uppy mascot, the adorable coding
canine, has been hard at work fetching all the latest updates for you.</p>
<p>From a full TypeScript makeover to shiny new React hooks, and even Google Photos
integration – this release is so packed with treats that we’re almost wagging
our tails in excitement. Without further a-dog, let’s dig into what makes Uppy
4.0 the goodest of good boys in file uploading!</p>
<p><a href="https://www.producthunt.com/posts/uppy-4-0?embed=true&amp;utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-uppy-4-0" target="_blank" rel="noopener noreferrer" class=""><img decoding="async" loading="lazy" src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=473003&amp;theme=light" alt="Uppy 4.0 - TypeScript rewrite, Google Photos, and much more | Product Hunt" style="width:250px;height:54px" width="250" height="54" class="img_ev3q"></a></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="migration-guide">Migration guide<a href="#migration-guide" class="hash-link" aria-label="Direct link to Migration guide" title="Direct link to Migration guide" translate="no">​</a></h2>
<p>This post covers the most exciting new features of Uppy 4.0. We have an
accompanying <a class="" href="/docs/guides/migration-guides/">migration guide</a> to help you
transition to 4.0.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="typescript-rewrite">TypeScript rewrite<a href="#typescript-rewrite" class="hash-link" aria-label="Direct link to TypeScript rewrite" title="Direct link to TypeScript rewrite" translate="no">​</a></h2>
<p>In the year 2024, people expect excellent types from their libraries. We used to
author types separately by hand, but they were often inconsistent or incomplete.
As of now, Uppy has been completely rewritten in TypeScript!</p>
<p>From now on you’ll be in safe hands when working with Uppy, whether it’s setting
the right options, building plugins, or listening to events.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Event name autocompletion and inferred argument types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;file-added&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token builtin">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>One important thing to note is the new generics on <code>@uppy/core</code>.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// xhr-upload is for uploading to your own back end.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> XHRUpload </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/xhr-upload&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Your own metadata on files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The response from your server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> someThingMyBackendReturns</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name">Meta</span><span class="token class-name punctuation" style="color:#393A34">,</span><span class="token class-name"> Body</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">XHRUpload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/upload&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;example.jpg&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Blob</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	meta</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This is now typed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">upload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This is strictly typed too</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> someThingMyBackendReturns </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Happy inferring!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="merging-the-two-aws-s3-plugins">Merging the two AWS S3 plugins<a href="#merging-the-two-aws-s3-plugins" class="hash-link" aria-label="Direct link to Merging the two AWS S3 plugins" title="Direct link to Merging the two AWS S3 plugins" translate="no">​</a></h2>
<p>We used to have two separate plugins for uploading to S3 and S3-compatible
services: <code>@uppy/aws-s3</code> and <code>@uppy/aws-s3-multpart</code>. They have different use
cases. The advantages of multipart uploads are:</p>
<ul>
<li class="">Improved throughput – You can upload parts in parallel to improve throughput.</li>
<li class="">Quick recovery from any network issues – Smaller part size minimizes the
impact of restarting a failed upload due to a network error.</li>
<li class="">Pause and resume object uploads – You can upload object parts over time. After
you initiate a multipart upload, there is no expiry; you must explicitly
complete or stop the multipart upload.</li>
<li class="">Begin an upload before you know the final object size – You can upload an
object as you are creating it.</li>
</ul>
<p>However, the downside is request overhead, as it needs to do creation, signing,
and completion requests besides the upload requests. For example, if you are
uploading files that are only a couple kilobytes with a 100ms roundtrip latency,
you are spending 400ms on overhead and only a few milliseconds on uploading.
This really adds up if you upload a lot of small files.</p>
<p>AWS – and the internet in general, from what we found – tends to agree that
<strong>you don’t want to use multipart uploads for files under 100 MB</strong>. This
sometimes puts users of our libraries in an awkward position, though, as their
end users may not exclusively upload very large files, or only small files. In
this case, a portion of their users get a subpar experience.</p>
<hr>
<p>We’ve merged the two plugins into <code>@uppy/aws-s3</code> with a new
<a class="" href="/docs/aws-s3/#shouldusemultipartfile"><code>shouldUseMultipart</code></a> option! By default,
it switches to multipart uploads if the file is larger than 100 MB. You can pass
a <code>boolean</code> or a function to determine this per file.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="react-hooks">React hooks<a href="#react-hooks" class="hash-link" aria-label="Direct link to React hooks" title="Direct link to React hooks" translate="no">​</a></h2>
<p>People working with React are more likely to create their own user interface on
top of Uppy than those working with “vanilla” setups. Working with our pre-built
UI components is a plug-and-play experience, but building on top of Uppy’s state
with React primitives has been tedious.</p>
<p>To address this, we’re introducing two new hooks: <code>useUppyState</code> and
<code>useUppyEvent</code>. Thanks to the TypeScript rewrite, we can now do powerful
inference in hooks as well.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="useuppystateuppy-selector"><code>useUppyState(uppy, selector)</code><a href="#useuppystateuppy-selector" class="hash-link" aria-label="Direct link to useuppystateuppy-selector" title="Direct link to useuppystateuppy-selector" translate="no">​</a></h3>
<p>Use this hook when you need to read Uppy’s state.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useUppyState </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// IMPORTANT: passing an initializer function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to prevent Uppy from being recreated on every render.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> files </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useUppyState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">files</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> totalProgress </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useUppyState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">totalProgress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// We can also get a specific plugin state.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Note that the value on `plugins` depends on the `id` of the plugin.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> metaFields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useUppyState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">plugins</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">Dashboard</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">metaFields</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>You can see all the values you can access on the
<a href="https://github.com/transloadit/uppy/blob/dab8082a4e67c3e7f109eacfbd6c3185f117dc60/packages/%40uppy/core/src/Uppy.ts#L156" target="_blank" rel="noopener noreferrer" class=""><code>State</code></a>
type.</p>
<p>Using this hook, you can also access the state of any Uppy plugin. For example,
in order to access the state of <code>ImageEditor</code>, you would have to look at the
types of the plugin.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> State </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="useuppyeventuppy-event-callback"><code>useUppyEvent(uppy, event, callback)</code><a href="#useuppyeventuppy-event-callback" class="hash-link" aria-label="Direct link to useuppyeventuppy-event-callback" title="Direct link to useuppyeventuppy-event-callback" translate="no">​</a></h3>
<p>Listen to Uppy <a class="" href="/docs/uppy/#events">events</a> in a React component.</p>
<p>The hook returns <code>[results, clear]</code>. <code>results</code> is an array of values from the
event. Depending on the event, this can be empty or have up to three values.
<code>clear</code> is a function to clear the <code>results</code> array.</p>
<p>Values remain in state until the next event (if that ever comes) or the moment
when the state is manually cleared. Depending on your use case, you may want to
keep the values in state or clear the state after something else happened.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useState </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Transloadit </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/transloadit&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> useUppyEvent </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/react&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// IMPORTANT: passing an initializer function</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// to prevent Uppy from being recreated on every render.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">results</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clearResults</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useUppyEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;transloadit:result&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">stepName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> assembly</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> results</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// strongly typed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">useUppyEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;cancel-all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Handle event here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="google-photos">Google Photos<a href="#google-photos" class="hash-link" aria-label="Direct link to Google Photos" title="Direct link to Google Photos" translate="no">​</a></h2>
<p>An often requested feature is finally here: Google Photos support!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Uppy can bring in files from the cloud with <a class="" href="/docs/companion/">Companion</a>.</p><p>Companion is a hosted, standalone, or middleware server that takes away the
complexity of authentication and the cost of downloading files from remote
sources, such as Instagram, Google Drive, and others.</p><p>This means a 5 GB video isn’t eating into your users’ data plans and you don’t
have to worry about OAuth.</p></div></div>
<p><video src="/img/blog/4.0/google-photos.mp4" controls=""></video></p>
<p><a class="" href="/docs/google-drive/"><code>@uppy/google-drive</code></a> and
<a class="" href="/docs/google-photos-picker/"><code>@uppy/google-photos-picker</code></a> are separate
plugins. However, you can use the same OAuth app for both these plugins. Be sure
to enable “Photos Library API” in your OAuth app, though!</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ux-improvements-for-viewing-remote-files">UX improvements for viewing remote files<a href="#ux-improvements-for-viewing-remote-files" class="hash-link" aria-label="Direct link to UX improvements for viewing remote files" title="Direct link to UX improvements for viewing remote files" translate="no">​</a></h2>
<p>When using <a class="" href="/docs/dashboard/">Dashboard</a> with any of our remote sources (Google
Drive, Facebook, etc.) you use our internal <code>@uppy/provider-views</code> plugin to
navigate the folders and select files. In Uppy 4.0, we are making a few quality
of life improvements for users. The main changes are described in the table
below.</p>
<table style="text-align:left;font-size:15px">
  <tbody>
    <tr>
      <td colspan="2">
        <b style="font-size:17px">Folder states: checked, unchecked, partial</b>
        <p style="margin-bottom:0">In 4.0, we introduce a new folder state – a &quot;partially checked&quot; folder. A folder acquires this state when certain files within the folder are &quot;checked&quot;, and other files are &quot;unchecked&quot;.</p>
      </td>
    </tr>
    <tr>
      <th style="padding-top:0;padding-bottom:0">PREVIOUSLY</th>
      <th style="padding-top:0;padding-bottom:0">NOW</th>
    </tr>
    <tr>
      <td style="width:50%"><video src="/img/blog/4.0/partial-old.mp4" controls=""></video></td>
      <td style="width:50%"><video src="/img/blog/4.0/partial-new.mp4" controls=""></video></td>
    </tr>
    <tr>
      <td colspan="2">
        <b style="font-size:17px">Cache</b>
        <p style="margin-bottom:0">When navigating in and out of folders, you no longer have to wait for the same API call — results are cached.</p>
      </td>
    </tr>
    <tr>
      <th style="padding-top:0;padding-bottom:0">PREVIOUSLY</th>
      <th style="padding-top:0;padding-bottom:0">NOW</th>
    </tr>
    <tr>
      <td style="width:50%"><video src="/img/blog/4.0/cache-old.mp4" controls=""></video></td>
      <td style="width:50%"><video src="/img/blog/4.0/cache-new.mp4" controls=""></video></td>
    </tr>
    <tr>
      <td colspan="2">
        <b style="font-size:17px">Restrictions</b>
        <p style="margin-bottom:0">
          Uppy supports file <a class="" href="/docs/uppy/#restrictions">restrictions</a>, such as maximum number of files and maximum file size. In 4.0, we reworked our restrictions UI – users will get immediate feedback upon exceeding the number of selected files, and get a chance to re-enter the correct number of files after their first upload attempt.
        </p>
      </td>
    </tr>
    <tr>
      <th style="padding-top:0;padding-bottom:0">PREVIOUSLY</th>
      <th style="padding-top:0;padding-bottom:0">NOW</th>
    </tr>
    <tr>
      <td style="width:50%"><video src="/img/blog/4.0/restrictions-old.mp4" controls=""></video></td>
      <td style="width:50%"><video src="/img/blog/4.0/restrictions-new.mp4" controls=""></video></td>
    </tr>
  </tbody></table>
<p>We’re confident this turns our interface for remote sources into the most
advanced one out there. We’ve seen some competing libraries not even aggregating
results beyond the first page returned by the provider API.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="revamped-options-for-uppyxhr-upload">Revamped options for <code>@uppy/xhr-upload</code><a href="#revamped-options-for-uppyxhr-upload" class="hash-link" aria-label="Direct link to revamped-options-for-uppyxhr-upload" title="Direct link to revamped-options-for-uppyxhr-upload" translate="no">​</a></h2>
<p>In previous versions, the <code>@uppy/xhr-upload</code> plugin had the options
<code>getResponseData</code>, <code>getResponseError</code>, <code>validateStatus</code> and
<code>responseUrlFieldName</code>. These were inflexible and too specific. Now we have
hooks similar to <code>@uppy/tus</code>:</p>
<ul>
<li class=""><code>onBeforeRequest</code> to manipulate the request before it is sent.</li>
<li class=""><code>shouldRetry</code> to determine if a request should be retried. By default, three
retries with exponential backoff. After three attempts it will throw an error,
regardless of whether you returned <code>true</code>.</li>
<li class=""><code>onAfterResponse</code> called after a successful response, but before Uppy resolves
the upload.</li>
</ul>
<p>You could, for instance, use them to refresh your auth token when it expires:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">XHR</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/xhr-upload&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAuthToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> res </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/auth/token&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> json </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">XHR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&lt;your-endpoint&gt;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// Called again for every retry too.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onBeforeRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">xhr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAuthToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		xhr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setRequestHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Authorization&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onAfterResponse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">xhr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xhr</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">401</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			token </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAuthToken</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>Check out the <code>@uppy/xhr-upload</code> <a class="" href="/docs/xhr-upload/">docs</a> for more info.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="simpler-configuration-for-uppytransloadit">Simpler configuration for <code>@uppy/transloadit</code><a href="#simpler-configuration-for-uppytransloadit" class="hash-link" aria-label="Direct link to simpler-configuration-for-uppytransloadit" title="Direct link to simpler-configuration-for-uppytransloadit" translate="no">​</a></h2>
<p>To get started with <code>@uppy/transloadit</code>, you would configure
<a class="" href="/docs/transloadit/#assemblyoptions"><code>assemblyOptions</code></a> with your auth key,
template ID, and other optional values. <code>assemblyOptions</code> can be an object or a
function, which is called per file, which returns an object:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;params&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;auth&quot;: { &quot;key&quot;: &quot;key-from-transloadit&quot; },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;template_id&quot;: &quot;id-from-transloadit&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;steps&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Overruling Template at runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		&quot;notify_url&quot;: &quot;https://your-domain.com/assembly-status&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;signature&quot;: &quot;generated-signature&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	&quot;fields&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Dynamic or static fields to send along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>When you go to production, you always want to make sure to set the <code>signature</code>.
<strong>Not using
<a href="https://transloadit.com/docs/topics/signature-authentication/" target="_blank" rel="noopener noreferrer" class="">Signature Authentication</a>
can be a security risk</strong>. Signature Authentication is a security measure that
can prevent outsiders from tampering with your Assembly Instructions.</p>
<p>This means the majority of implementers will write something like this, as
recommended:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">AssemblyOptions</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/transloadit&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">assemblyOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/transloadit-params&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> AssemblyOptions</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>However, now you are making a request to your back end for <em>every file</em>, while
the response likely remains the same, unless you are setting dynamic <code>fields</code>
per file.</p>
<p><strong>This has now been improved to</strong>:</p>
<ul>
<li class="">Only call <code>assemblyOptions()</code> once.</li>
<li class=""><code>fields</code> is for global variables in your
<a href="https://transloadit.com/docs/topics/templates/" target="_blank" rel="noopener noreferrer" class="">template</a>.</li>
<li class="">All metadata on your files is automatically sent along to Transloadit. This
will end up in <code>file.user_meta</code> for you to dynamically access in your Template
<em>per file</em>.</li>
</ul>
<p>You can read more about Assembly Variables in the
<a href="https://transloadit.com/docs/topics/assembly-variables/" target="_blank" rel="noopener noreferrer" class="">docs</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="companion">Companion<a href="#companion" class="hash-link" aria-label="Direct link to Companion" title="Direct link to Companion" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="streaming-uploads-by-default">Streaming uploads by default<a href="#streaming-uploads-by-default" class="hash-link" aria-label="Direct link to Streaming uploads by default" title="Direct link to Streaming uploads by default" translate="no">​</a></h3>
<p>Streaming uploads are now the default in Companion. This comes with greatly
improved upload speeds and allows uploading up to hundreds of gigabytes without
needing a large server storage. We found that this improves speeds by about 37%
for a Google Drive upload of a 1 GB file
(<a href="https://github.com/transloadit/uppy/pull/4046#issuecomment-1235697937" target="_blank" rel="noopener noreferrer" class="">source</a>).
This feature was also available before, but we wanted to have more real-world
usage before setting it as the default.</p>
<p>With streaming upload disabled, the whole file will be downloaded first. The
upload will then start when the download has completely finished.</p>
<p>When streaming upload is enabled, Companion will start downloading the file from
the provider (such as Google Drive), while at the same time starting the upload
to the destination (such as Tus), and sending every chunk of data consecutively.</p>
<p>For more information, see the <a class="" href="/docs/companion/">Companion docs</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="corsorigins-option-is-now-required"><code>corsOrigins</code> option is now required<a href="#corsorigins-option-is-now-required" class="hash-link" aria-label="Direct link to corsorigins-option-is-now-required" title="Direct link to corsorigins-option-is-now-required" translate="no">​</a></h3>
<p>As a security measure, we now require the
<a class="" href="/docs/companion/#corsorigins-required"><code>corsOrigins</code></a> option to be set.</p>
<p>It serves two purposes: it sets the <code>Access-Control-Allow-Origin</code> header as well
as the target origin for <code>window.postMessage()</code>, which is needed to communicate
the OAuth token from the new tab you used to log in to a provider back to
Companion.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="and-more">And more<a href="#and-more" class="hash-link" aria-label="Direct link to And more" title="Direct link to And more" translate="no">​</a></h2>
<p>The 4.0 release contains over 170 contributions, many too small to mention, but
together resulting in Uppy continuing to grow and improve. We closely listen to
the community and are always looking for ways to improve the experience, for
users and developers alike.</p>
<p>Ready to upgrade? Be sure to check out the
<a class="" href="/docs/guides/migration-guides/">migration guide</a>.</p>
<p><a href="https://www.producthunt.com/posts/uppy-4-0?embed=true&amp;utm_source=badge-featured&amp;utm_medium=badge&amp;utm_souce=badge-uppy-4-0" target="_blank" rel="noopener noreferrer" class=""><img decoding="async" loading="lazy" src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=473003&amp;theme=light" alt="Uppy 4.0 - TypeScript rewrite, Google Photos, and much more | Product Hunt" style="width:250px;height:54px" width="250" height="54" class="img_ev3q"></a></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Wr5y"><ul class="footer_ZfVL"><li><a href="https://twitter.com/uppy_io" target="_blank" rel="noopener">Twitter</a></li><li><a href="https://uppy.io/blog/atom.xml" target="_blank" rel="noopener">RSS feed</a></li><li><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener">GitHub</a></li></ul></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/uppy-5.0/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Announcing Uppy 5.0: headless components and hooks</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2023/07/3.13-3.21/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">🎄 Uppy 3.13 to 3.21: Typescript Saga: the beginning, Image Editor improvements, Dashboard auto-install</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#migration-guide" class="table-of-contents__link toc-highlight">Migration guide</a></li><li><a href="#typescript-rewrite" class="table-of-contents__link toc-highlight">TypeScript rewrite</a></li><li><a href="#merging-the-two-aws-s3-plugins" class="table-of-contents__link toc-highlight">Merging the two AWS S3 plugins</a></li><li><a href="#react-hooks" class="table-of-contents__link toc-highlight">React hooks</a></li><li><a href="#google-photos" class="table-of-contents__link toc-highlight">Google Photos</a></li><li><a href="#ux-improvements-for-viewing-remote-files" class="table-of-contents__link toc-highlight">UX improvements for viewing remote files</a></li><li><a href="#revamped-options-for-uppyxhr-upload" class="table-of-contents__link toc-highlight">Revamped options for <code>@uppy/xhr-upload</code></a></li><li><a href="#simpler-configuration-for-uppytransloadit" class="table-of-contents__link toc-highlight">Simpler configuration for <code>@uppy/transloadit</code></a></li><li><a href="#companion" class="table-of-contents__link toc-highlight">Companion</a></li><li><a href="#and-more" class="table-of-contents__link toc-highlight">And more</a></li></ul></div></div></div></div></div><footer class="footer_J6tW"><p><img class="IndexFooter-logo" title="Uppy" alt="Uppy" src="/img/logo.svg"></p><p>Released under the<!-- --> <a href="http://opensource.org/licenses/MIT" target="_blank" rel="noreferrer noopener">MIT License</a> <!-- -->⋅ <a href="/privacy-policy/">Privacy Policy</a> ⋅<!-- --> <a href="https://github.com/transloadit/uppy/blob/main/.github/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contributing</a></p><p>© 2016-<!-- -->2025<!-- --> <a href="https://transloadit.com" target="_blank" rel="noopener noreferrer">Transloadit</a></p></footer></div>
</body>
</html>