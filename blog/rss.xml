<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Uppy Blog</title>
        <link>https://uppy.io/blog</link>
        <description>Uppy Blog</description>
        <lastBuildDate>Fri, 08 Dec 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Scaling Images on Rotation]]></title>
            <link>https://uppy.io/blog/2023-10-25-image-editor</link>
            <guid>https://uppy.io/blog/2023-10-25-image-editor</guid>
            <pubDate>Fri, 08 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[We recently released an ‚Äúimage scaling on rotation‚Äù feature for Uppy‚Äôs]]></description>
            <content:encoded><![CDATA[<p>We recently released an ‚Äúimage scaling on rotation‚Äù feature for Uppy‚Äôs
<a href="https://uppy.io/docs/image-editor/" target="_blank" rel="noopener noreferrer">Image Editor</a>, an often-requested feature
that we‚Äôre super proud to be able to announce.</p>
<p>In this blog post, we‚Äôll be taking a peek behind the curtain, as we take a
detailed look into the development of this feature, and our thought-process
approaching it.</p>
<p>Before we start though, take a look below at a comparison between how Uppy‚Äôs
Image Editor used to handle image rotations, and how it handles them now.</p>

  
  
  <table textalign:="">
  <thead>
  <tr>
    <th colspan="{2}">
      Rotation
    </th>
  </tr><tr>
    <th>Without scaling</th>
    <th>With scaling</th>
  </tr>
  </thead><tbody>
  <tr>
  <td>
    <video controls="" muted="" autoplay="">
      <source src="/img/blog/2023-10-25-image-editor/without-scaling.mov" type="video/mp4">
    </video>
  </td><td>
    <video controls="" muted="" autoplay="">
      <source src="/img/blog/2023-10-25-image-editor/with-scaling.mov" type="video/mp4">
    </video>
  </td>
  </tr>
  </tbody></table>
<p>Without further adieu, let‚Äôs dive into some of the finer technical details, so
you can follow along and implement this feature into your own image editor.</p>
<p>The above UI is present in many image editors - for example, the default image
editors on iOS and Android both employ it. Often users expect this behaviour
too, leading to some confusion when their images are left with ugly corners
after a rotation.</p>
<p>We implemented this in Uppy‚Äôs Image Editor last week, and the solution turned
out to be non-trivial. Since this is a pretty ubiquitous task to solve for all
image editors, we decided to release our solution to the world and write out a
post about it, instead of keeping it hidden away as part of internal notes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-steps">3 Steps<a href="https://uppy.io/blog/2023-10-25-image-editor#3-steps" class="hash-link" aria-label="Direct link to 3 Steps" title="Direct link to 3 Steps">‚Äã</a></h2>
<p>There are <strong>3 steps</strong> to our scaling implementation:</p>
<ol>
<li>Ask your designer what scaling on rotation should look like</li>
<li>Find the <code>.scale()</code> function</li>
<li>Calculating the geometry</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-trust-your-designer">1. Trust your designer<a href="https://uppy.io/blog/2023-10-25-image-editor#1-trust-your-designer" class="hash-link" aria-label="Direct link to 1. Trust your designer" title="Direct link to 1. Trust your designer">‚Äã</a></h3>
<p>When I first approached this task, my gut-instinct was to go for the ‚Äúrotated
rectangle inscribed within another rectangle‚Äù solution so that the largest-area
inscription possible is achieved. This route turned out to be an unpleasant user
experience, so take this as an important lesson in trusting your designer, and
consulting them first on what the user might want.</p>
<p>Alternatively, you can choose to trust our designer‚Äôs advice by:</p>
<ul>
<li>always rotating the image around the center of the image (intersection of the
diagonals)</li>
<li>just enlarging the image to remove any empty corners</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-find-the-scale-function">2. Find the <code>.scale()</code> function<a href="https://uppy.io/blog/2023-10-25-image-editor#2-find-the-scale-function" class="hash-link" aria-label="Direct link to 2-find-the-scale-function" title="Direct link to 2-find-the-scale-function">‚Äã</a></h3>
<p>To enlarge the image in a way that covers empty corners, we first need a scaling
function. Uppy uses <a href="https://github.com/fengyuanchen/cropperjs" target="_blank" rel="noopener noreferrer">cropperjs v1.x</a>
as an image editing library, which exposes the <code>cropper.scale(scalingFactor)</code>
function. Most image editing libraries are likely to have a similar function,
but of course feel free to code one yourself if you feel up to the challenge.</p>
<p>Importantly, the scaling function should
<a href="https://en.wikipedia.org/wiki/Scaling_(geometry)#Uniform_scaling" target="_blank" rel="noopener noreferrer">uniformly enlarge</a>
the image <em>around its center</em>, where the <code>scalingFactor</code> is determined by
<code>desiredHeight/oldHeight</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-calculate-the-geometry">3. Calculate the geometry<a href="https://uppy.io/blog/2023-10-25-image-editor#3-calculate-the-geometry" class="hash-link" aria-label="Direct link to 3. Calculate the geometry" title="Direct link to 3. Calculate the geometry">‚Äã</a></h3>
<p>Now, we want to draw our before-rotation &amp; after-rotation shapes on the same
picture, and apply some trigonometry. If you need to brush up on the mathematics
behind this, we recommend watching the following Khan Academy lessons on
<a href="https://www.khanacademy.org/test-prep/praxis-math/praxis-math-lessons/gtp--praxis-math--lessons--geometry/a/gtp--praxis-math--article--angles--lesson" target="_blank" rel="noopener noreferrer">how angles work</a>
and
<a href="https://www.khanacademy.org/math/geometry/hs-geo-trig/hs-geo-trig-ratios-intro/a/finding-trig-ratios-in-right-triangles" target="_blank" rel="noopener noreferrer">how sines and cosines work</a>,
as these cover everything you‚Äôll need to follow along.</p>
<p>In the images below, we see what happens on rotation by default. To remove the
empty corners, the user would have to drag around the edges of the cropbox. What
we can do instead is scale the image (in the directions shown by the &lt;span
style={{ color: <code>rgb(127, 194, 65)</code> }}&gt;green arrows) so that these
corners disappear.</p>

  
  <table background:="">
  <thead>
  <tr><th colspan="{2}">What happens on rotation</th></tr>
  </thead><tbody>
  <tr>
  <td width="50%">
    <img loading="lazy" maxwidth:="" src="https://uppy.io/img/blog/2023-10-25-image-editor/1a.png" class="img_ev3q">
  </td><td width="50%">
    <img loading="lazy" maxwidth:="" src="https://uppy.io/img/blog/2023-10-25-image-editor/1b.png" class="img_ev3q">
  </td>
  </tr>
  </tbody></table>
<p>So, to cover up these checkered corners, we will need to scale the image. If we
cover up the larger corner, the smaller corner will get covered up
automatically, so our code takes the form of
<code>scale(Math.max(scalingFactor1, scalingFactor2))</code>. These two scaling factors are
calculated very similarly, so we‚Äôll only focus on calculating only one of them
in this tutorial (although the full solution is given in the conclusion).</p>
<p>In the images below, the &lt;span style={{ color: <code>rgb(127, 194, 65)</code> }}&gt;green
rectangle represents the desired dimensions of our image after it‚Äôs
scaled. Our scaling function (and hopefully yours) is defined in such a way that
if we have the image of height <code>h</code>, and we want to scale it up to height <code>H</code>, we
need to execute <code>.scale(H/h)</code>. Since we already know <code>h</code>, as it‚Äôs the height of
our image, we only need to find <code>H</code> to complete our scaling function.</p>

  
  <table background:="">
  <thead>
  <tr><th colspan="{2}">We want to find H</th></tr>
  </thead><tbody>
  <tr>
  <td width="50%">
    <img loading="lazy" src="https://uppy.io/img/blog/2023-10-25-image-editor/2a.png" class="img_ev3q">
  </td><td width="50%">
    <img loading="lazy" src="https://uppy.io/img/blog/2023-10-25-image-editor/2b.png" class="img_ev3q">
  </td>
  </tr>
  </tbody></table>
<p>For the rest of the tutorial, the following steps are then automatic - as we
know all the angles in the image, we know the image‚Äôs width and height, and we
know to find <code>H</code>.</p>
<p padding:="">The easiest way to go about it, is to first annotate the image with all the
relevant angles. We‚Äôll be using <span color:="">blue </span> for the rotation angle
 <code>Œ±</code>, and <span color:="">pink </span>
for <code>90 - Œ±</code>:</p>

  <table background:="" textalign:="">
  <thead display:="" width:="">
  <tr><th>Color all angles</th></tr>
  </thead><tbody display:="" width:="">
  <tr>
  <td>
    <img loading="lazy" width:="" src="https://uppy.io/img/blog/2023-10-25-image-editor/3.png" class="img_ev3q">
  </td>
  </tr>
  </tbody></table>
<p>We can then find <code>H</code>, by adding the two outer sides of these triangles.</p>

  
  <table background:="">
  <thead>
  <tr><th colspan="{2}">Add two triangle sides: H = sin(Œ± - 90) * h + sin(Œ±) * w</th></tr>
  </thead><tbody>
  <tr>
  <td width="50%">
    <img loading="lazy" src="https://uppy.io/img/blog/2023-10-25-image-editor/4a.png" class="img_ev3q">
  </td><td width="50%">
    <img loading="lazy" src="https://uppy.io/img/blog/2023-10-25-image-editor/4b.png" class="img_ev3q">
  </td>
  </tr>
  </tbody></table>
<p>So, now we have our desired <code>H</code>! We know one of our scaling factors is <code>H/h</code>.
Now, we just need to find our other scaling factor, which is <code>W/w</code>. This follows
a similar process, and you can find the calculations as part of the full
solution below.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scalingFactor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scalingFactor1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> scalingFactor2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">H</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">W</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ± </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ± </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">90</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> w</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="https://uppy.io/blog/2023-10-25-image-editor#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>In Uppy, our code ended up looking like this:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getScalingFactor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">w</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> h</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> rotationAngle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Œ± </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">abs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">toRadians</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rotationAngle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> scalingFactor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">cos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">sin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token known-class-name class-name">Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">cos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Œ±</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> scalingFactor</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> image </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cropper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getImageData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> scaleFactor </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getScalingFactor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> image</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> rotationAngle</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cropper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">scale</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scaleFactor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can see the full version
<a href="https://github.com/transloadit/uppy/blob/12e08ada02b9080bd5e1d19526bdf8a2010e62a1/packages/%40uppy/image-editor/src/utils/getScaleFactorThatRemovesDarkCorners.js" target="_blank" rel="noopener noreferrer">on GitHub</a>.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Bonus content: our founder‚Äôs (Tim Koschuetzki) initial scribbled notes with the solution</summary><div><div class="collapsibleContent_i85q">
  <!-- -->
  <img loading="lazy" src="https://uppy.io/img/blog/2023-10-25-image-editor/tim.jpg" class="img_ev3q">
</div></div></details>]]></content:encoded>
            <author>lakesare@gmail.com (Evgenia Karunus)</author>
            <author>tim@transloadit.com (Tim Koschuetzki)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 3.3 to 3.13: conditional S3 multipart, signing on the client, speedy handling of 10k files and much much more]]></title>
            <link>https://uppy.io/blog/2023/07/3.3-3.13</link>
            <guid>https://uppy.io/blog/2023/07/3.3-3.13</guid>
            <pubDate>Wed, 26 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This is a big Uppy update post, covering releases from]]></description>
            <content:encoded><![CDATA[<img loading="lazy" src="https://uppy.io/img/blog/3.4-3.13/single-file-mode.jpg" class="border img_ev3q" alt="Screenshot of the new Uppy website homepage">
<p>This is a big Uppy update post, covering releases from
<a href="https://github.com/transloadit/uppy/compare/uppy%403.4.0...uppy%403.13.0" target="_blank" rel="noopener noreferrer"><code>3.3.0</code> to <code>3.13.0</code></a>!</p>
<p>In this issue: the long-awaited unified S3 plugin which can switch between
regular and multipart uploads, improved performance when adding and validating
10k+ files, and stability improvements and bug fixes. The Transloadit plugin is
now also easier to configure and leaner in bundle size, since we removed
<code>socket.io-client</code> in favor of
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events" target="_blank" rel="noopener noreferrer">Server-Sent Events</a>.</p>
<p>Please make a cup of something tasty ‚òïÔ∏è (in a non-spillable container), as this
will be quite a ride.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-s3">AWS S3<a href="https://uppy.io/blog/2023/07/3.3-3.13#aws-s3" class="hash-link" aria-label="Direct link to AWS S3" title="Direct link to AWS S3">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="merging-of-the-plugins">Merging of the plugins<a href="https://uppy.io/blog/2023/07/3.3-3.13#merging-of-the-plugins" class="hash-link" aria-label="Direct link to Merging of the plugins" title="Direct link to Merging of the plugins">‚Äã</a></h3>
<p>After years of separating regular non-multipart uploads and multipart uploads,
we are finally merging the two sibling plugins: <code>@uppy/aws-s3</code> and
<code>@uppy/aws-s3-multpart</code>. Here‚Äôs the brief version of what you need to know, with
details to follow in the next section:</p>
<ul>
<li><code>@uppy/aws-s3-multipart</code> is deprecated. You should use <code>@uppy/aws-s3</code> and set
the <code>shouldUseMultipart: true</code> option to get the same ‚Äúmultipart always
enabled‚Äù behavior. We plan to keep <code>@uppy/aws-s3-multipart</code> around as an alias
for the next major cycle and add a warning at the install when Uppy 4.0.0 will
be released.</li>
<li><code>@uppy/aws-s3</code> now hosts two plugins:
<ul>
<li>the legacy one, untouched, to guarantee backward compatibility. We plan to
get rid of it in the next major, we recommend moving away from it and report
if you see something missing in the new plugin.</li>
<li>the new merged plugin, available if you pass
<a href="https://uppy.io/docs/aws-s3-multipart/#shouldusemultipartfile" target="_blank" rel="noopener noreferrer"><code>shouldUseMultipart</code></a>
option.</li>
</ul>
</li>
</ul>
<p>Our plan for this merge is to maintain the backward compatibility until the next
major, while also providing forward compatibility so you can try our new plugin
and give us some feedback before we remove the old code for good.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conditional-multipart-explained">Conditional Multipart Explained<a href="https://uppy.io/blog/2023/07/3.3-3.13#conditional-multipart-explained" class="hash-link" aria-label="Direct link to Conditional Multipart Explained" title="Direct link to Conditional Multipart Explained">‚Äã</a></h3>
<p>Multipart and ‚Äúregular‚Äù uploads have different use cases. The advantages of
multipart uploads are:</p>
<ul>
<li><strong>Improved throughput</strong> ‚Äì You can upload parts in parallel to improve
throughput.</li>
<li><strong>Quick recovery from any network issues</strong> ‚Äì Smaller part size minimizes the
impact of restarting a failed upload due to a network error.</li>
<li><strong>Pause and resume object uploads</strong> ‚Äì You can upload object parts over time.
After you initiate a multipart upload, there is no expiry; you must explicitly
complete or stop the multipart upload.</li>
<li><strong>Begin an upload before you know the final object size</strong> ‚Äì You can upload an
object as you are creating it.</li>
</ul>
<p>However, the downside is <em>request overhead</em>, as it needs to do creation,
signing, and completion requests besides the upload requests. For example, if
you are uploading files that are only a couple kilobytes with a 100ms roundtrip
latency, you are spending 400ms on overhead and only a few milliseconds on
uploading. This really adds up if you upload a lot of small files.</p>
<p>So now you can use just one plugin, the <code>@uppy/aws-s3</code>, and enable multipart
conditionally, even per-file:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">AwsS3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">shouldUseMultipart</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">// Use multipart only for files larger than 100MiB.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">size</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">**</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>or</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">AwsS3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">shouldUseMultipart</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please see the new
<a href="https://uppy.io/docs/aws-s3-multipart/#shouldusemultipartfile" target="_blank" rel="noopener noreferrer"><code>shouldUseMultipart: boolean | function</code></a>
option for details.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="signing-on-the-client">Signing on the client<a href="https://uppy.io/blog/2023/07/3.3-3.13#signing-on-the-client" class="hash-link" aria-label="Direct link to Signing on the client" title="Direct link to Signing on the client">‚Äã</a></h3>
<p>By default, when you upload to S3 with Uppy, every file, or every chunk in case
of Multipart, needs to be signed on the server. For many small files or files
with many chunks this means a few additional requests per file/chunk of the
upload.</p>
<p>To address this issue and speed up the uploads by roughly 20%, we are
introducing a new option: <code>getTemporarySecurityCredentials: boolean | function</code>.
When <code>true</code>, both S3 and S3 Multipart uploads will be signed on the client using
the
<a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetFederationToken.html" target="_blank" rel="noopener noreferrer">AWS Security Federation Token</a>,
created once per user (until it expires) on your backend rather than a unique
signed URL for every single chunk.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>You should opt-in into this only if you are comfortable giving end users direct
access to signing files for your bucket.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stability-and-bug-fixes">Stability and bug fixes<a href="https://uppy.io/blog/2023/07/3.3-3.13#stability-and-bug-fixes" class="hash-link" aria-label="Direct link to Stability and bug fixes" title="Direct link to Stability and bug fixes">‚Äã</a></h3>
<ul>
<li>We‚Äôve improved the internal handling of <code>RateLimitedQueue</code> to make
<a href="https://github.com/transloadit/uppy/pull/4424" target="_blank" rel="noopener noreferrer">retries more robust</a> and
increased
<a href="https://github.com/transloadit/uppy/pull/4542" target="_blank" rel="noopener noreferrer">priority of <code>abort</code> and <code>complete</code></a>
requests.</li>
<li>While we were at it, we‚Äôve also fixed
<a href="https://github.com/transloadit/uppy/pull/4528" target="_blank" rel="noopener noreferrer">resuming in single-chunk uploads</a>,
and improved
<a href="https://github.com/transloadit/uppy/pull/4508" target="_blank" rel="noopener noreferrer">chunk size calculation</a>.</li>
<li><a href="https://github.com/transloadit/uppy/pull/4526" target="_blank" rel="noopener noreferrer">Golden Retriever integration with S3 Multipart</a>
was fixed.</li>
</ul>
<p>Additionally, we‚Äôve disabled pause-resume buttons in the UI for remote S3
Multipart uploads ‚Äî&nbsp;they are not supported on Companion, so the UI now reflects
that.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core">Core<a href="https://uppy.io/blog/2023/07/3.3-3.13#core" class="hash-link" aria-label="Direct link to Core" title="Direct link to Core">‚Äã</a></h2>
<p>Performance of adding and uploading big batches of files has (yet again) been
greatly improved with refactors in both Uppy Core and Provider Views (that‚Äôs
what we internally call all remote UIs: Instagram, Unsplash, Dropbox).</p>
<p>We‚Äôve been able to achieve this by
<a href="https://github.com/transloadit/uppy/pull/4402" target="_blank" rel="noopener noreferrer">refactoring out totals validation for Restrictions (maxTotalFileSize, maxNumberOfFiles)</a>:
instead of doing it for each file, we perform the check at the end, after all
the files have been added/validated. This was confirmed to work with 10k+ files!
üöÄ</p>
<img loading="lazy" src="https://uppy.io/img/blog/3.4-3.13/10k-files.jpg" class="border img_ev3q" alt="Uppy UI with over 10k files selected from a remote source">
<p>We‚Äôve also fixed an issue with delayed throttled progress events, which could
lead to incorrect progress.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="transloadit">Transloadit<a href="https://uppy.io/blog/2023/07/3.3-3.13#transloadit" class="hash-link" aria-label="Direct link to Transloadit" title="Direct link to Transloadit">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assemblyoptions">assemblyOptions<a href="https://uppy.io/blog/2023/07/3.3-3.13#assemblyoptions" class="hash-link" aria-label="Direct link to assemblyOptions" title="Direct link to assemblyOptions">‚Äã</a></h3>
<p>We‚Äôve introduced a new option called
<a href="https://uppy.io/docs/transloadit/#assemblyoptions" target="_blank" rel="noopener noreferrer"><code>assemblyOptions: object | function</code></a>,
which replaces the <code>getAssemblyOptions</code>, <code>params</code> and <code>fields</code> (those are now
deprecated and will be removed in the next major).</p>
<p>Here‚Äôs how you can use the new option as an object:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">assemblyOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">params</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'key-from-transloadit'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">template_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'id-from-transloadit'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">steps</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// Overruling Template at runtime</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">signature</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'generated-signature'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// Dynamic or static fields to send along</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And here‚Äôs an example with a function, to be able to set meta fields per-file,
for instance:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">assemblyOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">params</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">auth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'TRANSLOADIT_AUTH_KEY_HERE'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">template_id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'xyz'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">fields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">caption</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">caption</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="server-sent-events">Server-sent events<a href="https://uppy.io/blog/2023/07/3.3-3.13#server-sent-events" class="hash-link" aria-label="Direct link to Server-sent events" title="Direct link to Server-sent events">‚Äã</a></h3>
<p>Historically Transloadit supported progress updates via Socket.io. It is a
robust and stable package, but came with a ‚Äúprice-tag‚Äù in the form of bundle
size:
<a href="https://bundlephobia.com/package/socket.io-client@4.7.1" target="_blank" rel="noopener noreferrer">38.3 kB Minified</a>. So
it‚Äôs been on our minds for a while to replace it with something more
lightweight, without breaking backwards-compatibility for the older clients (so
simply removing Socket.io on the server in favor of plain WebSockets is not
desireable).</p>
<p>The answer ‚Äî
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events" target="_blank" rel="noopener noreferrer">Server-sent events</a>.
It‚Äôs a simple low-overhead one-way connection from Transloadit servers to
<code>@uppy/transloadit</code>. As was the case with Socket.io, we fall back to HTTP
polling every 2 seconds if SSE connection fails for some reason.</p>
<p>Socket.io is still around in <code>@uppy/transloadit</code>, but will be removed soon, once
SSE proves itself in production.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes">Bug fixes<a href="https://uppy.io/blog/2023/07/3.3-3.13#bug-fixes" class="hash-link" aria-label="Direct link to Bug fixes" title="Direct link to Bug fixes">‚Äã</a></h3>
<ul>
<li>Reset <code>tus</code> key in the file on error, so retried files are re-uploaded.</li>
<li>Clean up event listener to prevent cancelled assemblies.</li>
<li>Make sure <code>fields</code> is not nullish when there are no files in Assembly.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion">Companion<a href="https://uppy.io/blog/2023/07/3.3-3.13#companion" class="hash-link" aria-label="Direct link to Companion" title="Direct link to Companion">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="refresh-tokens">Refresh tokens<a href="https://uppy.io/blog/2023/07/3.3-3.13#refresh-tokens" class="hash-link" aria-label="Direct link to Refresh tokens" title="Direct link to Refresh tokens">‚Äã</a></h3>
<p>We‚Äôve
<a href="https://github.com/transloadit/uppy/pull/4448" target="_blank" rel="noopener noreferrer">implemented refresh tokens</a> for
Dropbox and Google Drive to solve issued where tokens would expire in the middle
of a long upload and then the upload would fail.</p>
<p>Here‚Äôs how it‚Äôs implemented in Companion:</p>
<ul>
<li>We changed the logic when receiving a 401 from Companion, Uppy will now call a
new <code>/:provider/refresh-token</code> endpoint which will give uppy a new access
token.</li>
<li><code>refresh_token</code> is now stored inside uppy auth token along with <code>access_token</code>
(encrypted JWT) for providers that give a refresh token (before only
<code>access_token</code> was stored, now we store both as a <code>JSON.stringify</code>‚Äôd
document).</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-and-improvements">Bug fixes and improvements<a href="https://uppy.io/blog/2023/07/3.3-3.13#bug-fixes-and-improvements" class="hash-link" aria-label="Direct link to Bug fixes and improvements" title="Direct link to Bug fixes and improvements">‚Äã</a></h3>
<ul>
<li>Fixed a bug with non-ASCII metadata crashed Companion. The AWS SDK doesn‚Äôt
encode metadata by itself, so now we do it in Companion.</li>
<li>Switched from aws-sdk v2 to @aws-sdk/* v3</li>
<li>Upgraded Grant dependency</li>
<li>We now send expire info for non-multipart uploads and added connection
keep-alive to Dropbox to improve connection stability</li>
<li>Merged Provider and SearchProvider internal remote source classes.</li>
<li>Increased max limits for remote file list operations and fixed part listing in
S3</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="url">Url<a href="https://uppy.io/blog/2023/07/3.3-3.13#url" class="hash-link" aria-label="Direct link to Url" title="Direct link to Url">‚Äã</a></h2>
<p>We‚Äôve upgraded the Url plugin to use <code>filename</code> from <code>Content-Disposition</code>
header of the file you are importing, instead of relying on the url (but kept
the latter as a fallback) (#4489). So now your files have proper names instead
of <code>noname</code>.</p>
<img loading="lazy" src="https://uppy.io/img/blog/3.4-3.13/url-name.jpg" class="border img_ev3q" alt="Uppy UI with a file selected with the Url plugin">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard-and-status-bar">Dashboard and Status Bar<a href="https://uppy.io/blog/2023/07/3.3-3.13#dashboard-and-status-bar" class="hash-link" aria-label="Direct link to Dashboard and Status Bar" title="Direct link to Dashboard and Status Bar">‚Äã</a></h2>
<p>Single File Mode has been improved to adapt to height of less than 400px ‚Äî the
UI turns back to grid in this case. We are also not using <code>fit: cover</code> anymore
to avoid cropping important parts of the image:</p>
<img loading="lazy" src="https://uppy.io/img/blog/3.4-3.13/single-file-mode.jpg" class="border img_ev3q" alt="Uppy UI with single file">
<p>We‚Äôve also added an option to disable the Single File mode, as it can be
unwanted in certain use cases:
<a href="https://uppy.io/docs/dashboard/#singlefilefullscreen" target="_blank" rel="noopener noreferrer"><code>singleFileFullScreen</code></a>.</p>
<p>If you wrapped Uppy Dashboard in a <code>&lt;form&gt;</code> element, it could be accidentally
submitted when a user pressed Enter to save meta fields or entering urls. Now
we‚Äôve
<a href="https://github.com/transloadit/uppy/pull/4283" target="_blank" rel="noopener noreferrer">added a <code>form=""</code> attribute, connected to an empty <code>&lt;form&gt;</code></a>
in document root to prevent the outer form from being submitted.</p>
<p>A bug has been fixed that allowed clicking on buttons and links in Dashboard
<a href="https://uppy.io/docs/dashboard/#disabled" target="_blank" rel="noopener noreferrer">disabled mode</a>.</p>
<p>Range selection of remote files has been fixed, you can now shift+click to
select multiple files again. We‚Äôve added the <code>VirtualList</code> component which is
already used in Uppy ‚Äúselected files‚Äù screen to remote file lists. So now
scrolling through 10k+ files is breeze üå¨Ô∏è</p>
<img loading="lazy" src="https://uppy.io/img/blog/3.4-3.13/range-selection.jpg" class="border img_ev3q" alt="Dashboard UI with range selection">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="status-bar">Status Bar<a href="https://uppy.io/blog/2023/07/3.3-3.13#status-bar" class="hash-link" aria-label="Direct link to Status Bar" title="Direct link to Status Bar">‚Äã</a></h3>
<ul>
<li>Fixed ETA when Uppy recovers its state.</li>
<li>Remove throttled component to fix a bug where state would become shared
between multiple status bars on a page.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="locales">Locales<a href="https://uppy.io/blog/2023/07/3.3-3.13#locales" class="hash-link" aria-label="Direct link to Locales" title="Direct link to Locales">‚Äã</a></h2>
<p>We‚Äôve added support for Hindi and Mexican Spanish. French, Spanish and Chinese
locales have been improved.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uploaders">Uploaders<a href="https://uppy.io/blog/2023/07/3.3-3.13#uploaders" class="hash-link" aria-label="Direct link to Uploaders" title="Direct link to Uploaders">‚Äã</a></h2>
<ul>
<li>Fixed an issue where sockets were opened right away, ignoring the
<code>RateLimitedQueue</code>, which led to bugs in all plugins that handle remote
uploads. Additionally, when file is removed (or all are canceled), we call
<code>controller.abort</code> on queued requests.</li>
<li>Fixed a bug with sockets being closed, while the upload was still in progress.</li>
<li>In XHR Upload we‚Äôve added support for arrays in metadata and an
<code>'upload-stalled'</code> event.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="miscellaneous">Miscellaneous<a href="https://uppy.io/blog/2023/07/3.3-3.13#miscellaneous" class="hash-link" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous">‚Äã</a></h2>
<ul>
<li><code>@uppy/golden-retriever</code> has been refactored refactor to modernize the
codebase.</li>
<li>We‚Äôve switched more non-critical errors to warnings.</li>
<li>Improved fallbacks for the drag &amp; drop API.</li>
<li>The React Native example has been modernized and updated.</li>
<li><code>uppy.resetProgress()</code> in Core has been fixed.</li>
</ul>
<p>We hope you‚Äôve enjoyed this update posts and all the fixes and features we‚Äôve
worked on! As always, please see the full changelog on GitHub:
<a href="https://github.com/transloadit/uppy/compare/uppy%403.4.0...uppy%403.13.0" target="_blank" rel="noopener noreferrer">3.4.0 ‚Äî 3.13.0</a>.</p>]]></content:encoded>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
        </item>
        <item>
            <title><![CDATA[New Uppy.io and docs]]></title>
            <link>https://uppy.io/blog/2023-05-new-website</link>
            <guid>https://uppy.io/blog/2023-05-new-website</guid>
            <pubDate>Wed, 10 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[We are excited to announce that our new website, documentation and blog are now]]></description>
            <content:encoded><![CDATA[<img loading="lazy" src="https://uppy.io/img/blog/new-website/homepage.png" class="border img_ev3q" alt="Screenshot of the new Uppy website homepage">
<p>We are excited to announce that our new website, documentation and blog are now
live out of beta, ready for you to enjoy on <a href="https://uppy.io/" target="_blank" rel="noopener noreferrer">Uppy.io</a>! Let us
know what you think <a href="https://twitter.com/uppy_io" target="_blank" rel="noopener noreferrer">on twitter</a>.</p>
<p>The first iteration of the Uppy website was built by Artur and Kevin over 7
years ago, using <a href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a> static site generator as a base. It
served us well, but over time Hexo got less maintained, our docs more messy, and
quite a few places were collecting dust.</p>
<p>About a year ago Merlijn set on a task to refresh the Uppy documentation
experience, rewriting most of the docs from the ground up, with everyone on the
team contributing in their area of Uppy knowledge.
<a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a> ü¶ï was chosen as one of the top modern
tools for documentation.</p>
<p><img loading="lazy" alt="Screenshot of the Uppy website showing a documentation page with new design" src="https://uppy.io/assets/images/dashboard-docs-e2995a541161834109482c6667565081.png" width="3410" height="2002" class="img_ev3q"></p>
<p>Most of the plugin‚Äôs docs now explain when you should use it (and sometimes when
not), followed by how to install, tips and details and links to CodeSandbox
samples.</p>
<p>And for desert, we now have a swift website-wide search in the top bar, powered
by <a href="https://www.algolia.com/" target="_blank" rel="noopener noreferrer">Algolia</a>, give it a go!</p>
<p><img loading="lazy" alt="Screenshot of the Uppy website showing the search interface" src="https://uppy.io/assets/images/search-9d346638aecf9ab33680181a8f7f821a.png" width="3450" height="1832" class="img_ev3q"></p>
<p>Enjoy the new <a href="https://uppy.io/" target="_blank" rel="noopener noreferrer">uppy.io</a>!</p>]]></content:encoded>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
        </item>
        <item>
            <title><![CDATA[üéÑ Uppy 3.1-3.3: Improved AWS S3 Multipart, Single File Mode]]></title>
            <link>https://uppy.io/blog/2022/12/3.3</link>
            <guid>https://uppy.io/blog/2022/12/3.3</guid>
            <pubDate>Fri, 23 Dec 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[üéÖüê∂ Ho-ho-ho, we are about to wrap up another year for Uppy! Three minor]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://uppy.io/assets/images/dashboard-christmas-7bdeb276706cce5b1944c93b7680ccfa.jpg" width="1400" height="1097" class="img_ev3q"></p>
<p>üéÖüê∂ Ho-ho-ho, we are about to wrap up another year for Uppy! Three <code>minor</code>
releases ago we‚Äôve introduced Uppy 3.0. It‚Äôs time to give you an update on
what‚Äôs been cooking in the Uppy-Transloadit headquarters (besides cranberry
sauce) for the past couple of months.</p>
<p>In short: AWS S3 Multipart stability improvements, Single File Mode for the
Dashboard, more tests and bugfixes, new locales.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="safer-aws-s3-multipart-uploads-on-slow-connections">Safer AWS S3 Multipart uploads on slow connections<a href="https://uppy.io/blog/2022/12/3.3#safer-aws-s3-multipart-uploads-on-slow-connections" class="hash-link" aria-label="Direct link to Safer AWS S3 Multipart uploads on slow connections" title="Direct link to Safer AWS S3 Multipart uploads on slow connections">‚Äã</a></h2>
<p><code>@uppy/aws-s3-multipart</code> has been serving well for people who prefer a
<em>client-to_s3</em> setup with Uppy. However, some uploads could occasionally fail in
poor network conditions. It turned out, simultaneously signing and uploading
many chunks at once saturated the HTTP/1.1 connection limit, which lead to
signatures expiring by the time Uppy started uploading the next chunk.</p>
<p>We‚Äôve refactored our internal queue mechanism to sign chunks right before we
begin uploading them to the remote server. When the upload is paused, the queue
is emptied and re-populated again on resume. The default <code>limit</code> for this plugin
has been set to <code>6</code> and the default S3 signature expiry has been lifted from
<code>300</code> to <code>800</code> seconds.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="single-file-mode">Single File Mode<a href="https://uppy.io/blog/2022/12/3.3#single-file-mode" class="hash-link" aria-label="Direct link to Single File Mode" title="Direct link to Single File Mode">‚Äã</a></h2>
<p>Often times people only want to upload a single file (most commonly an image)
via Uppy. But the Dashboard UI is tailored to handling many files at once, and
it used to display the single image as a small, sad-looking block in the corner.
This ends now! (Actually, it ended a few releases ago, figure of speech).</p>
<img loading="lazy" src="https://uppy.io/img/blog/3.1-3.3/single-file-mode.jpg" class="border img_ev3q">
<p>With only one file selected, we‚Äôll display it large and centered, and make sure
to re-generate the image preview so it‚Äôs <code>600px</code> wide, looking nice and sleek on
modern displays.</p>
<p>See <a href="https://github.com/transloadit/uppy/pull/4188" target="_blank" rel="noopener noreferrer">PR #4188</a> for more
screenshots.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fixes-and-upgrades">Bug fixes and Upgrades<a href="https://uppy.io/blog/2022/12/3.3#bug-fixes-and-upgrades" class="hash-link" aria-label="Direct link to Bug fixes and Upgrades" title="Direct link to Bug fixes and Upgrades">‚Äã</a></h2>
<p>We‚Äôve upgraded Typescript to <code>v4.8</code> and Jest to <code>v29</code>, among other tools and
packages.</p>
<p>We are now additionally testing that Uppy packages are correctly bundled with
the latest Rollup, Webpack, Parcel, Vite, and ESBuild.</p>
<p>Notable bug fixes:</p>
<ul>
<li>XHR Upload: Queue requests for socket token for remote files</li>
<li>Core: Prevent crashes when a file is removed before the upload starts</li>
<li>Golden Retriever: Fixed upload retries</li>
<li>AWS S3 and XHR Upload: Fixed Cannot mark a queued request as done in
MiniXHRUpload</li>
<li>Webcam: Set default videoConstraints</li>
<li>Image Editor: Fix controls in small Dashboard</li>
</ul>
<p>See the full list in the
<a href="https://github.com/transloadit/uppy/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer">changelog</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion">Companion<a href="https://uppy.io/blog/2022/12/3.3#companion" class="hash-link" aria-label="Direct link to Companion" title="Direct link to Companion">‚Äã</a></h2>
<p>And of course, this festive season we are not forgetting Companion under the
tree:</p>
<ul>
<li>Throttle progress by time</li>
<li>Added workaround for S3 accelerated endpoints</li>
<li>Send expire info for non-multipart uploads</li>
<li>Send expiry time alongside S3 signed requests</li>
<li>Added support for AbortSignal</li>
<li>Prevent preflight race condition</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="locales">Locales<a href="https://uppy.io/blog/2022/12/3.3#locales" class="hash-link" aria-label="Direct link to Locales" title="Direct link to Locales">‚Äã</a></h2>
<p>Uzbek language pack was added, while Polish and Ukrainian language packs were
updated.</p>
<hr>
<p>That‚Äôs it for our updates! Stay tuned for more in 2023 and happy holidays (if
you are celebrating)! Cheers. In the meantime, we are driving home, driving home
for Christmas. Yeah.</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/driving-home-0b068883d13788971c4bd54faf9e66f6.gif" width="480" height="270" class="img_ev3q"></p>]]></content:encoded>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 3.0: Future-proof, conveniently easy, stable as ever]]></title>
            <link>https://uppy.io/blog/2022/09/3.0</link>
            <guid>https://uppy.io/blog/2022/09/3.0</guid>
            <pubDate>Tue, 13 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Screenshot of Uppy 3.0.0 UI]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" alt="Screenshot of Uppy 3.0.0 UI" src="https://uppy.io/assets/images/uppy-3-0-71a46f198071d75565646ce69236acec.jpg" width="1200" height="630" class="img_ev3q"></p>
<blockquote>
<p>For those new to Uppy, coming from Reddit, Hacker News and Product Hunt today:
Uppy is a popular open source file uploader for the browser. Pick files from
local disk or camera, remote sources like Instagram, Unsplash, Dropbox etc,
record audio and screencasts. Crop and tweak images with the image editor
plugin. Supports resumable uploads to a tus.io server, AWS S3 (and many others
with similar API like DigitalOcean), multipart.
<a href="https://uppy.io/examples/dashboard" target="_blank" rel="noopener noreferrer">Try it</a>!</p>
</blockquote>
<p>Uppy is turning three! When you‚Äôre counting in
<a href="https://www.akc.org/expert-advice/health/how-to-calculate-dog-years-to-human-years/" target="_blank" rel="noopener noreferrer">dog years</a>
‚Äì which we most certainly are ‚Äì that‚Äôs 29 already. An age like that signifies
proper adulthood. For Uppy, this means it‚Äôs ready to stay loyal, but without the
silly mistakes (read: bugs). Uppy also underwent (ESM) surgery to keep it
strolling by your side in the current ecosystem, and received other behavioral
improvements üê∂</p>
<p>TL;DR: ESM transition, native mobile camera, new Remote Sources plugin, sweeping
Companion rewrite and streaming support, <code>async</code>/<code>await</code> everything, React 18
and Vue 3 support, all examples rewritten.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="esm-surgery">ESM surgery<a href="https://uppy.io/blog/2022/09/3.0#esm-surgery" class="hash-link" aria-label="Direct link to ESM surgery" title="Direct link to ESM surgery">‚Äã</a></h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">ECMAScript Modules</a>
(ESM) are the future and we‚Äôre ready to adopt it. Benefits over CommonJS
include: improved security, better tree shaking, and a syntax that can be
understood natively by browsers, which can greatly improve the DX if the tools
are configured to take advantage of that.</p>
<p>Following in the footsteps of many other packages, we now only ship Uppy core
and its plugins as ESM. For Uppy 2.x, we were shipping CommonJS.</p>
<p>If you are already using ESM or the CDN builds, nothing changes for you! If you
are using CommonJS, you may have to add extra tooling for everything to work, or
consider refactoring your codebase to ESM. Please refer to the
<a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c" target="_blank" rel="noopener noreferrer">Pure ESM package gist</a>
for more information and help on how to do that.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="less-integration-code-with-the-new-remote-sources-preset">Less integration code with the new remote sources preset<a href="https://uppy.io/blog/2022/09/3.0#less-integration-code-with-the-new-remote-sources-preset" class="hash-link" aria-label="Direct link to Less integration code with the new remote sources preset" title="Direct link to Less integration code with the new remote sources preset">‚Äã</a></h2>
<p>We‚Äôve introduced a new Uppy preset plugin,
<a href="https://uppy.io/docs/remote-sources/"><code>@uppy/remote-sources</code></a>, which combines Instagram,
Facebook, Google Drive, Box, Unsplash, Dropbox, One Drive, Zoom and any other
remote cloud sources that Uppy will support in the future. The plugin only works
with Dashboard and allows you to enable all the above sources in a single line.</p>
<p>Before, you had to manually include every cloud provider / remote source:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Instagram</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">GoogleDrive</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">OneDrive</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Instagram</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Facebook</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Unsplash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">RemoteSources</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To get started, check out the <a href="https://uppy.io/docs/remote-sources/"><code>RemoteSources</code> docs</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="robodog-ends-its-service">Robodog ends its service<a href="https://uppy.io/blog/2022/09/3.0#robodog-ends-its-service" class="hash-link" aria-label="Direct link to Robodog ends its service" title="Direct link to Robodog ends its service">‚Äã</a></h2>
<p>Uppy is flexible and extensible through plugins, but the integration code could
sometimes prove daunting. This is what brought <a href="https://uppy.io/docs/robodog/">Robodog</a> to
life. It served as an alternative with the same features, but with a more
ergonomic and minimal API.</p>
<p>It did, however, come with its own set of new problems:</p>
<ul>
<li>Robodog tries to do the exact same thing as Uppy, but looks like an entirely
different product.</li>
<li>Users are faced with a confusing choice between using Robodog or using Uppy
directly.</li>
<li>Robodog is more ergonomic because it‚Äôs limited. When hitting such a limit, the
user has to refactor everything to Uppy using plugins.</li>
</ul>
<p>This has now led us to deprecating Robodog and embracing Uppy for its strong
suits: modularity and flexibility. At the same time, we‚Äôre also introducing
something to take away some of the repetitive integration code:
<a href="https://uppy.io/docs/remote-sources/"><code>@uppy/remote-sources</code></a>.</p>
<p>Are you using Robodog in your code base? You can check out the
<a href="https://uppy.io/docs/guides/migration-guides/#migrate-from-robodog-to-uppy-plugins" target="_blank" rel="noopener noreferrer">migration guide</a>
to see how you can transition to Uppy plugins without losing functionality. We
have committed ourselves to extending Robodog support for one year to give our
users more time to migrate.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="native-mobile-camera">Native mobile camera<a href="https://uppy.io/blog/2022/09/3.0#native-mobile-camera" class="hash-link" aria-label="Direct link to Native mobile camera" title="Direct link to Native mobile camera">‚Äã</a></h2>
<p>As you are probably aware, Uppy‚Äôs Webcam plugin provides a nice UI for desktop
devices to take pictures and record videos. Up until 3.0, the same UI was
utilized on mobile as well.</p>
<p>Since most mobile devices have a system UI for taking pictures and recording
videos ‚Äì which is usually better than any custom solution we can offer ‚Äì we‚Äôve
introduced a new option called <code>mobileNativeCamera</code> for the Webcam plugin:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Webcam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">mobileNativeCamera</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isMobile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">tablet</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, it uses the <a href="https://github.com/juliangruber/is-mobile" target="_blank" rel="noopener noreferrer"><code>is-mobile</code></a>
package to detect mobile devices, like smartphones and tablets, but you can
manually set this option to <code>true</code> or <code>false</code> if you wish. When enabled, instead
of the usual Camera/Webcam Uppy UI, users will be presented with buttons that
open their device‚Äôs native camera interface:</p>
<p><img loading="lazy" alt="Uppy native camera UI" src="https://uppy.io/assets/images/native-camera-d180107e4e1d511e85c203b1d6b49cb9.jpg" width="1430" height="1321" class="img_ev3q"></p>
<p><a href="https://uppy.io/docs/webcam/#videoConstraints"><code>videoConstraints.facingMode</code></a> is also
supported by this option via the
<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/capture" target="_blank" rel="noopener noreferrer"><code>capture</code></a>
attribute (in the browsers and devices that respect it).</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Webcam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">videoConstraints</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">facingMode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'user'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The same applies to <a href="https://uppy.io/docs/webcam/#modes"><code>modes</code></a>, allowing you to enable only
video or only photos.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="devotedly-stable">Devotedly stable<a href="https://uppy.io/blog/2022/09/3.0#devotedly-stable" class="hash-link" aria-label="Direct link to Devotedly stable" title="Direct link to Devotedly stable">‚Äã</a></h2>
<p>Since the Uppy 2.7.0 release, <strong>we‚Äôve fixed over 95 bugs!</strong> This includes fixes
to bugs that made uploading less stable, documentation corrections, and
dependency upgrades.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion-turns-40">Companion turns 4.0<a href="https://uppy.io/blog/2022/09/3.0#companion-turns-40" class="hash-link" aria-label="Direct link to Companion turns 4.0" title="Direct link to Companion turns 4.0">‚Äã</a></h2>
<p>Everyone‚Äôs favorite Companion also received some love.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="streaming-upload">Streaming upload<a href="https://uppy.io/blog/2022/09/3.0#streaming-upload" class="hash-link" aria-label="Direct link to Streaming upload" title="Direct link to Streaming upload">‚Äã</a></h3>
<p>Streaming upload can now also be enabled in Companion when using Tus. This comes
with greatly improved upload speeds and allows uploading up to hundreds of
gigabytes without needing a large server storage. We found that this improves
speeds by about 37% for a Google Drive upload of a 1 GB file
(<a href="https://github.com/transloadit/uppy/pull/4046#issuecomment-1235697937" target="_blank" rel="noopener noreferrer">source</a>).
This feature was also available before Companion 4.0, but it didn‚Äôt work with
Tus until now.</p>
<p>With streaming upload disabled (default), the whole file will be downloaded
first. The upload will then start when the download has completely finished.</p>
<p>When streaming upload is enabled, Companion will start downloading the file from
the provider (such as Google Drive), while at the same time starting the upload
to the destination (such as Tus), and sending every chunk of data consecutively.</p>
<p>For more information, see the <a href="https://uppy.io/docs/companion/">Companion docs</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-emitter">Event emitter<a href="https://uppy.io/blog/2022/09/3.0#event-emitter" class="hash-link" aria-label="Direct link to Event emitter" title="Direct link to Event emitter">‚Äã</a></h3>
<p>Companion now has a server-side event emitter that can be used to detect when
uploads start, finish and fail, without having to depend on the client (so it
works even when users have closed their browser).</p>
<p>Example code:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> emitter </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> companion</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">app</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">emitter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'upload-start'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> token </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Upload started'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onUploadEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> action</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> payload </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'success'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			emitter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">off</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> onUploadEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// avoid listener leak</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Upload finished'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">action </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			emitter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">off</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> onUploadEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// avoid listener leak</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Upload failed'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	emitter</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> onUploadEvent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="internal-improvements">Internal improvements<a href="https://uppy.io/blog/2022/09/3.0#internal-improvements" class="hash-link" aria-label="Direct link to Internal improvements" title="Direct link to Internal improvements">‚Äã</a></h3>
<p>Companion‚Äôs internal request code and Providers have been rewritten to
<code>async</code>/<code>await</code>, which has greatly simplified and reduced the amount of code.
This will lead to less bugs and security issues, and make it easier to implement
new custom Providers.</p>
<p>We have also replaced the deprecated
<a href="https://github.com/request/request" target="_blank" rel="noopener noreferrer"><code>request</code></a> library with
<a href="https://github.com/sindresorhus/got" target="_blank" rel="noopener noreferrer"><code>got</code></a>. This also removed the need for
<a href="https://github.com/simov/purest" target="_blank" rel="noopener noreferrer"><code>purest</code></a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="and-more">And more!<a href="https://uppy.io/blog/2022/09/3.0#and-more" class="hash-link" aria-label="Direct link to And more!" title="Direct link to And more!">‚Äã</a></h3>
<ul>
<li><a href="https://uppy.io/docs/compressor/">Compressor</a> is officially stable. The Compressor plugin for
Uppy optimizes images (JPEG, PNG), saving on average up to 60% in size. It has
proven itself through extensive battle testing.</li>
<li><a href="https://uppy.io/docs/aws-s3-multipart/">AWS S3 Multipart</a> also became more stable this
release, as a result of us hammering out some of the last edge cases with lots
of files and/or huge files.</li>
<li>React 18 is now supported in <a href="https://uppy.io/docs/react/"><code>@uppy/react</code></a>, Vue 3 is supported
for <a href="https://uppy.io/docs/vue/"><code>@uppy/vue</code></a>, and Angular 14 for
<a href="https://uppy.io/docs/angular/"><code>@uppy/angular</code></a>.</li>
<li>Our <a href="https://github.com/transloadit/uppy/tree/main/examples" target="_blank" rel="noopener noreferrer">examples</a> have
received a fresh round of updates to keep them relevant.</li>
</ul>
<hr>
<p><img loading="lazy" alt="Animate picture of a visibly happy dog getting a head massage" src="https://uppy.io/assets/images/dog-enjoys-875f8d3432b4fa5d05df0255f83c655a.gif" width="400" height="286" class="img_ev3q"></p>
<p>For more details, see the full
<a href="https://github.com/transloadit/uppy/blob/HEAD/CHANGELOG.md#1300" target="_blank" rel="noopener noreferrer">changelog</a> and
the <a href="https://uppy.io/docs/migration-guides.html/">migration guide</a>.</p>
<p>That‚Äôs it from us for now! As you can see, Uppy may be slowly turning into an
old dog, but we‚Äôre still committed to keep teaching it new tricks. We hope
you‚Äôll enjoy this latest major release, and all the features and improvements it
includes. We can‚Äôt wait to hear your thoughts about it on
<a href="https://twitter.com/uppy_io" target="_blank" rel="noopener noreferrer">Twitter</a>!</p>]]></content:encoded>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM]]></title>
            <link>https://uppy.io/blog/2022/03/2.4-2.7</link>
            <guid>https://uppy.io/blog/2022/03/2.4-2.7</guid>
            <pubDate>Fri, 11 Mar 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[We‚Äôre always looking for opportunities to teach Uppy cool new tricks, and the]]></description>
            <content:encoded><![CDATA[<p>We‚Äôre always looking for opportunities to teach Uppy cool new tricks, and the
past few months have been no exception. Since our
<a href="https://uppy.io/blog/2021/12/2.1-2.3/" target="_blank" rel="noopener noreferrer">most recent post</a> in December, Uppy has
continued to receive a steady stream of updates. This post covers all the
improvements made in Uppy versions 2.4 through 2.7. Changes and additions
include: image compression, improved Transloadit rate limiting and a lighter
Dashboard plugin. We‚Äôve also moved our end-to-end tests to Cypress, and are
slowly converting plugins to ES modules (ESM).</p>
<img loading="lazy" class="border img_ev3q" alt="Uppy Compressor plugin showing compressed images notification" src="https://uppy.io/img/blog/2.4-2.7/compressor.jpg">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compressor">Compressor<a href="https://uppy.io/blog/2022/03/2.4-2.7#compressor" class="hash-link" aria-label="Direct link to Compressor" title="Direct link to Compressor">‚Äã</a></h2>
<p>Some of the most commonly uploaded files on the internet are images ‚Äî photos,
stock images, screenshots, and documents scans. Uppy now includes a new plugin
called <code>@uppy/compressor</code> that optimizes images (JPEG, PNG), saving on average
up to 60% in size (roughly 18 MB for 10 images). It uses
<a href="https://github.com/fengyuanchen/compressorjs" target="_blank" rel="noopener noreferrer">Compressor.js</a> under the hood.</p>
<p><a href="https://uppy.io/docs/compressor/" target="_blank" rel="noopener noreferrer">Read the docs</a> and
<a href="https://uppy.io/examples/dashboard/" target="_blank" rel="noopener noreferrer">try Compressor in action</a>.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Compressor</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/compressor'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Compressor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>@uppy/compressor</code> is also the first plugin that we are releasing as ESM,
backwards compatible as CJS, to test out how this works. Please report any
issues.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hosted-companion-custom-credentials">Hosted Companion custom credentials<a href="https://uppy.io/blog/2022/03/2.4-2.7#hosted-companion-custom-credentials" class="hash-link" aria-label="Direct link to Hosted Companion custom credentials" title="Direct link to Hosted Companion custom credentials">‚Äã</a></h2>
<p>It cannot be overstated that our
<a href="https://transloadit.com/docs/sdks/uppy/" target="_blank" rel="noopener noreferrer">Transloadit-hosted</a>
<a href="https://uppy.io/docs/companion/" target="_blank" rel="noopener noreferrer">Companion Plugin</a> is the easiest secure way to
allow your users pick files from cloud sources like Google Drive, Instagram,
Box, etc. via Uppy. Up until now, however, that meant your users had to
authenticate their cloud account with Transloadit, preventing you from showing
your own logo instead. That has now been fixed! Head to <code>Transloadit Console</code> /
<code>Credentials</code>, scroll down to <code>Third-party Credentials</code>, click on
<code>Add new Credentials</code>, select <code>Companion OAuth</code>, and voil√†!</p>
<img loading="lazy" class="border img_ev3q" alt="Transloadit Companion 3rd party credentials" src="https://uppy.io/img/blog/2.4-2.7/companion-3rd-party-oauth.jpg">
<p>Try it out with the
<a href="https://transloadit.com/pricing/" target="_blank" rel="noopener noreferrer">free Transloadit Community Plan ‚Äî 5GB / month and access to Companion</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="transloadit-rate-limiting">Transloadit rate limiting<a href="https://uppy.io/blog/2022/03/2.4-2.7#transloadit-rate-limiting" class="hash-link" aria-label="Direct link to Transloadit rate limiting" title="Direct link to Transloadit rate limiting">‚Äã</a></h2>
<p>We‚Äôve added rate limiting to Transloadit
<a href="https://github.com/transloadit/uppy/pull/3429" target="_blank" rel="noopener noreferrer">assembly creation and status polling</a>,
and <a href="https://github.com/transloadit/uppy/pull/3394" target="_blank" rel="noopener noreferrer">tus retries</a>:</p>
<blockquote>
<p>When the remote server responds with HTTP 429, all requests are paused for a
while in the hope that it can resolve the rate limiting. Failed requests are
now also queued up after the retry delay. Before, they were scheduled for
retry without being queued up, which would sometimes end up overflowing the
limit option.</p>
</blockquote>
<p>As a result of this change, uploading many files at once has become even more
robust.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="move-to-esm">Move to ESM<a href="https://uppy.io/blog/2022/03/2.4-2.7#move-to-esm" class="hash-link" aria-label="Direct link to Move to ESM" title="Direct link to Move to ESM">‚Äã</a></h2>
<p>The JavaScript ecosystem is moving towards ESM, and we want to follow suit. We
are slowly starting to adopt ESM in Uppy packages. To do so, we integrated a
plugin into our build system that transpiles ESM source code to CommonJS syntax,
which is distributed with the npm package. Nothing will change on your end,
though ‚Äì we know that not everyone is using tooling that support ESM, so we‚Äôre
holding on to CommonJS for the time being. Our plan is to refactor all official
Uppy plugins to ESM before Uppy 3.0 is released, and drop CommonJS in favor of
ESM in the npm packages at that point.</p>
<p>For details, see <a href="https://github.com/transloadit/uppy/pull/3468" target="_blank" rel="noopener noreferrer">PR 3468</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="end-to-end-move-to-cypress">End to end: move to Cypress<a href="https://uppy.io/blog/2022/03/2.4-2.7#end-to-end-move-to-cypress" class="hash-link" aria-label="Direct link to End to end: move to Cypress" title="Direct link to End to end: move to Cypress">‚Äã</a></h2>
<p>Uppy has had end to end from the start, but the developer experience was less
than ideal with custom Webdriver.io + Selenium. The transition to
<a href="https://github.com/transloadit/uppy/pull/3444" target="_blank" rel="noopener noreferrer">Cypress</a> allows us to write
tests with ease and comfort, backed by great documentation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lighter-bundle">Lighter Bundle<a href="https://uppy.io/blog/2022/03/2.4-2.7#lighter-bundle" class="hash-link" aria-label="Direct link to Lighter Bundle" title="Direct link to Lighter Bundle">‚Äã</a></h2>
<p>We continue to look for ways to reduce Uppy‚Äôs bundle size and modernize our
build toolchain. This time, we‚Äôve replaced the
<a href="https://github.com/exif-js/exif-js" target="_blank" rel="noopener noreferrer">Exifr.js</a> legacy bundle with the modern one
without IE polyfills. Our Browserify bundler has been replaced with a modern and
more efficient ESBuild.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion-improvements">Companion improvements<a href="https://uppy.io/blog/2022/03/2.4-2.7#companion-improvements" class="hash-link" aria-label="Direct link to Companion improvements" title="Direct link to Companion improvements">‚Äã</a></h2>
<ul>
<li>Improved private IP check (#3403)</li>
<li>Implement periodic ping functionality (#3246)</li>
<li>Fix broken thumbnails for Box and Dropbox (#3460)</li>
<li>Fix unpslash author meta, sanitize metadata to strings and improve Companion
tests (#3478)</li>
</ul>
<p>That‚Äôs it for today! See the full
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1300" target="_blank" rel="noopener noreferrer">changelog</a>
for more details.</p>]]></content:encoded>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
        </item>
        <item>
            <title><![CDATA[üéÑ Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more]]></title>
            <link>https://uppy.io/blog/2021/12/2.1-2.3</link>
            <guid>https://uppy.io/blog/2021/12/2.1-2.3</guid>
            <pubDate>Wed, 15 Dec 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Last Christmas, we gave you Uppy 1.24, but]]></description>
            <content:encoded><![CDATA[<p>Last Christmas, we gave you <a href="https://uppy.io/blog/2020/12/1.24/" target="_blank" rel="noopener noreferrer">Uppy 1.24</a>, but
this very next year, we‚Äôll take it away (since it‚Äôs outdated by now) and give
you a brand-new Uppy 2.3 üéÅ!</p>
<p>After the <a href="https://uppy.io/blog/2021/08/2.0/" target="_blank" rel="noopener noreferrer">release</a> of our latest major
version, 2.0.0, we‚Äôve been busy with many things. First of all is the
long-awaited Audio plugin to record and upload live audio directly. We then
worked on adding a fast and efficient streaming interface to Companion and made
Unsplash production ready. Housekeeping was also part of the job: we made Status
Bar improvements, moved from npm to Yarn 3, did some refactoring, and updated
dependencies.</p>
<p>Last but not least, we got the issue count down from around 110 since 2.0.0 to
around 45 now.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="audio-plugin">Audio plugin<a href="https://uppy.io/blog/2021/12/2.1-2.3#audio-plugin" class="hash-link" aria-label="Direct link to Audio plugin" title="Direct link to Audio plugin">‚Äã</a></h2>
<p>Uppy now has a new <code>@uppy/audio</code> plugin for recording audio memos, sounds,
jingling bells, Christmas carols, and all your holiday cheer. Check it out on
the <a href="https://uppy.io/examples/dashboard/" target="_blank" rel="noopener noreferrer">demo page</a>.</p>
<video alt="Audio plugin demo" muted="" autoplay="" loop="">
  <source src="/img/blog/2.1-2.3/audio-demo.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/2.1-2.3/audio-demo.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uppyunsplash-is-now-production-ready"><code>@uppy/unsplash</code> is now production ready<a href="https://uppy.io/blog/2021/12/2.1-2.3#uppyunsplash-is-now-production-ready" class="hash-link" aria-label="Direct link to uppyunsplash-is-now-production-ready" title="Direct link to uppyunsplash-is-now-production-ready">‚Äã</a></h2>
<p>The Unsplash plugin has received an update, providing attribution to the image
authors and adding some polish to make it look better. Being fully brand
compliant with Unsplash means it‚Äôs now production ready. You can demo the plugin
on the <a href="https://uppy.io/examples/dashboard" target="_blank" rel="noopener noreferrer">website</a> or read the
<a href="https://uppy.io/docs/unsplash/" target="_blank" rel="noopener noreferrer">docs</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-streaming-interface-for-companion">New streaming interface for Companion<a href="https://uppy.io/blog/2021/12/2.1-2.3#new-streaming-interface-for-companion" class="hash-link" aria-label="Direct link to New streaming interface for Companion" title="Direct link to New streaming interface for Companion">‚Äã</a></h2>
<p><a href="https://uppy.io/docs/companion/" target="_blank" rel="noopener noreferrer">Companion</a> handles the server-to-server communication between your
server and file storage providers such as Google Drive, Dropbox, Instagram, and
the like. This bypasses the client (so a 5 GB video isn‚Äôt eating into your
users‚Äô data plans) and files are directly uploaded to the final destination.
Companion is made to be effortlessly integrate-able with Uppy.</p>
<p>It used to work by downloading the requested file from a remote provider on the
server to then start uploading it to the destination. This did the job, but it‚Äôs
wasn‚Äôt ideal.</p>
<p>We now built streaming support into Companion, which means the download and
upload can happen simultaneously. This can result in <strong>two times faster
uploads</strong>, because we no longer have to wait for files to finish downloading
before starting the upload process. It‚Äôs especially useful for large files and
removes the need for a lot of storage space on the server, as data will be
buffered in memory.</p>
<p>You can enable this by setting <code>streamingUpload</code> in the Companion
<a href="https://uppy.io/docs/companion/#Options" target="_blank" rel="noopener noreferrer">options</a>.</p>
<p><strong>NOTE:</strong> Streaming is turned off by default. Do not turn it on yet if you‚Äôre
using TUS for uploads, due to
<a href="https://github.com/tus/tus-js-client/issues/275" target="_blank" rel="noopener noreferrer">this tus-js-client bug</a>.</p>
<p>Interested in using Companion? You can use Transloadit-hosted Companion on every
<a href="https://transloadit.com/pricing/" target="_blank" rel="noopener noreferrer">Plan</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="status-bar-error-state-improvements">Status Bar error state improvements<a href="https://uppy.io/blog/2021/12/2.1-2.3#status-bar-error-state-improvements" class="hash-link" aria-label="Direct link to Status Bar error state improvements" title="Direct link to Status Bar error state improvements">‚Äã</a></h2>
<p>The Status Bar plugin would get confused about upload errors in Uppy, and we‚Äôve
addressed this:</p>
<ul>
<li>The error state is now shown in case of only <em>one</em> failed file instead of
<em>all</em> failed files. The plugin used to get stuck in the uploading state when a
single file failed.</li>
<li>Added ‚ÄúX of X files uploaded‚Äù below ‚ÄúUpload failed‚Äù for extra context.</li>
<li>Improved the error details button styling in the Status Bar and the file info
card.</li>
<li>Status Bar state is set to complete if the user manually removes the failed
files.</li>
</ul>
<p><img loading="lazy" alt="status bar improvements screenshot" src="https://uppy.io/assets/images/status-bar-improvements-b57b432fbbd9ad9b7efad2690877f1f5.jpg" width="1200" height="879" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="internal-housekeeping">Internal housekeeping<a href="https://uppy.io/blog/2021/12/2.1-2.3#internal-housekeeping" class="hash-link" aria-label="Direct link to Internal housekeeping" title="Direct link to Internal housekeeping">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yarn-v3-instead-of-npm">Yarn v3 instead of npm<a href="https://uppy.io/blog/2021/12/2.1-2.3#yarn-v3-instead-of-npm" class="hash-link" aria-label="Direct link to Yarn v3 instead of npm" title="Direct link to Yarn v3 instead of npm">‚Äã</a></h3>
<p>We‚Äôve switched the Uppy repo to Yarn 3 to improve package install performance.
With our complex dependency graph and over thirty packages in a monorepo, we are
seeing install times reduced by more than a few minutes!</p>
<p>We are using <a href="https://github.com/nodejs/corepack" target="_blank" rel="noopener noreferrer">Corepack</a> to make sure all
Uppy contributors are using the same version of Yarn. If you are an Uppy
contributor, please run the following commands to enable Corepack:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">corepack -v || npm i -g corepack # install Corepack if not already installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn -v || corepack enable # install Yarn through Corepack if not already installed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">yarn || corepack yarn install # install npm dependencies using yarn</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/transloadit/uppy/pull/3237" target="_blank" rel="noopener noreferrer">View the PR</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="refactor-locale-scripts--generate-types-and-docs">Refactor locale scripts &amp; generate types and docs<a href="https://uppy.io/blog/2021/12/2.1-2.3#refactor-locale-scripts--generate-types-and-docs" class="hash-link" aria-label="Direct link to Refactor locale scripts &amp; generate types and docs" title="Direct link to Refactor locale scripts &amp; generate types and docs">‚Äã</a></h3>
<p>This is an internal change, but important nonetheless. Our locales now live in a
separate <code>locale.js</code> file for every plugin instead of <code>this.defaultLocale</code> in
the class. The docs and types are automatically updated when we add or remove
new locale strings.</p>
<p><a href="https://github.com/transloadit/uppy/pull/3276" target="_blank" rel="noopener noreferrer">View the PR</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automated-release-scripts">Automated release scripts<a href="https://uppy.io/blog/2021/12/2.1-2.3#automated-release-scripts" class="hash-link" aria-label="Direct link to Automated release scripts" title="Direct link to Automated release scripts">‚Äã</a></h3>
<p>A lot of things need to happen when we‚Äôre publishing a new release. A complete
redo of the automation script is now available for quick and secure releases.</p>
<p>Here are some highlights:</p>
<ul>
<li>Releaser runs <code>yarn release</code> and will get a series of
<a href="https://github.com/terkelg/prompts" target="_blank" rel="noopener noreferrer">prompts</a> to set up a release.</li>
<li>A changelog will be generated.</li>
<li>The contributions table will be updated.</li>
<li>GitHub Actions will create a release candidate pull request.</li>
<li>When approved, GitHub Actions automatically merges, publishes to the npm
public registry, and creates CDN bundles.</li>
</ul>
<p><a href="https://github.com/transloadit/uppy/pull/3304" target="_blank" rel="noopener noreferrer">View the PR</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-more">And more<a href="https://uppy.io/blog/2021/12/2.1-2.3#and-more" class="hash-link" aria-label="Direct link to And more" title="Direct link to And more">‚Äã</a></h2>
<ul>
<li>google-drive: plugin has been updated for brand compliance (#3178)</li>
<li>google-drive: sort Google Drive list by name #3069</li>
<li>status-bar: now shows all details on mobile when <code>showProgressDetails</code> is
<code>true</code> (#3174)</li>
<li>core: move <code>Uppy</code> class to its own module (#3225)</li>
<li>angular: fix component crash by loosening <code>package.json</code> version constraints
(#3210)</li>
<li>drop-target: exposed events (#3238)</li>
<li>companion: add <code>maxFileSize</code> option in companion for safety #3159</li>
<li>companion: new AWS S3 multipart presigned URL batching endpoint #3056</li>
<li>companion: improve CORS default headers #3167</li>
<li>companion: use GET instead of HEAD for <code>getURLMeta</code> for better server
compatibility (especially signed S3 URLs) #3048</li>
<li>companion: deprecate missing <code>uploadUrls</code> option (will be required in the
future) #3182</li>
<li>companion: close window on auth callback error and show error to user #3143</li>
<li>companion: cut off length of file names to avoid AWS error #3048</li>
<li>companion: safely escape <code>&lt;script&gt;</code> injected code in Companion‚Äôs send-token.js
#3101</li>
<li>companion: upgrade aws-sdk #3334</li>
<li>companion: improve logging #3103</li>
<li>companion: change Provider/SearchProvider API to async and use streams instead
#3159</li>
</ul>
<p>Happy Holidays from the Uppy team! Enjoy Christmas and New Year, stay safe, take
a walk outside. See you in 2022!</p>]]></content:encoded>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 2.0.0: smaller, faster, modular plugins, Preact X, stricter types, and much more]]></title>
            <link>https://uppy.io/blog/2021/08/2.0</link>
            <guid>https://uppy.io/blog/2021/08/2.0</guid>
            <pubDate>Mon, 30 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Today, our tails are positively wagging with excitement about the release of]]></description>
            <content:encoded><![CDATA[<p>Today, our tails are positively wagging with excitement about the release of
Uppy 2.0! This latest version is on average 25% smaller and up to a thousand
times faster, thanks to dropping support for IE11 and a lot of refactoring work.
We‚Äôve upgraded many dependencies, most notably Preact 8 to Preact X, greatly
improved TypeScript support and screen reader accessibility, paid technical
debt, and added support for multiple messages in the Informer plugin.</p>
<p>Chow down on all the juicy bits and pieces inside! And make sure to
<a href="https://uppy.io/examples/dashboard/" target="_blank" rel="noopener noreferrer">try Uppy live demo</a>.</p>
<p><img loading="lazy" alt="Uppy 2.0 cover banner" src="https://uppy.io/assets/images/uppy-2-0-cover-1e95fd5e9bcdf0f841e1ceb04f3f4595.jpg" width="1200" height="630" class="img_ev3q"></p>
<blockquote>
<p>Uppy is a sleek, modular JavaScript file uploader that integrates seamlessly
with any application. It is made for developers who want to provide their
users with the ability to see image previews, edit metadata, pick large files
directly from Dropbox, restore selected files when a tab was accidentally
closed, or crop an image in-browser before sending.</p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-pup-no-more">A pup no more<a href="https://uppy.io/blog/2021/08/2.0#a-pup-no-more" class="hash-link" aria-label="Direct link to A pup no more" title="Direct link to A pup no more">‚Äã</a></h2>
<p>Ever since the first introduction of Uppy
<a href="https://uppy.io/blog/2016/07/uppy-begins/">five years ago</a> (or 36 in
<a href="https://www.akc.org/expert-advice/health/how-to-calculate-dog-years-to-human-years/" target="_blank" rel="noopener noreferrer">dog-years</a>),
we‚Äôve always referred to our project as ‚Äòthe next open source file uploader for
web browsers‚Äô. The release of <a href="https://uppy.io/blog/2019/04/1.0/">Uppy 1.0</a> a little over two
years ago, however, soon led to a steep increase in adoption. Uppy now boasts
over
<a href="https://github.com/transloadit/uppy/stargazers" target="_blank" rel="noopener noreferrer">24,000 stargazers on GitHub</a>,
making it the undisputed top dog in the world of file uploaders üåç</p>
<p>With that in mind, we felt it was high time to give Uppy some more much-needed
trimming. We want to take this opportunity to break with the past, to make the
project leaner ‚Äì and to pave the way for an even brighter future for Uppy!</p>
<img loading="lazy" class="border img_ev3q" alt="Uppy 2.0 UI with files" src="https://uppy.io/img/blog/2.0/uppy-ui-with-files.jpg">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a href="https://uppy.io/blog/2021/08/2.0#table-of-contents" class="hash-link" aria-label="Direct link to Table of Contents" title="Direct link to Table of Contents">‚Äã</a></h2>
<ul>
<li><a href="https://uppy.io/blog/2021/08/2.0#Highlights-since-1-0">Highlights since 1.0</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Smaller-bundles">Smaller bundles</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Faster">Faster</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Preact-X-and-upgraded-dependencies">Preact X and upgraded dependencies</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Plugin-is-replaced-with-BasePlugin-and-UIPlugin"><code>Plugin</code> is replaced with <code>BasePlugin</code> and <code>UIPlugin</code></a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Strict-TypeScript-types-by-default">Strict TypeScript types by default</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#Batch-pre-signing-URLs-for-AWS-S3-Multipart">Batch pre-signing URL's for AWS S3 Multipart</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#And-more">And more</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#What-future-remains-for-1-0?">What future remains for 1.0?</a></li>
<li><a href="https://uppy.io/blog/2021/08/2.0#That%E2%80%99s-it">That's it</a></li>
</ul>
<video alt="Video demo showing updated Uppy 2.0 UI" muted="" autoplay="" loop="">
  <source src="/images/uppy-2-0-demo-aug-2021.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/images/uppy-2-0-demo-aug-2021.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="highlights-since-10">Highlights since 1.0<a href="https://uppy.io/blog/2021/08/2.0#highlights-since-10" class="hash-link" aria-label="Direct link to Highlights since 1.0" title="Direct link to Highlights since 1.0">‚Äã</a></h2>
<p>A lot of things have happened since we released Uppy 1.0 in April of 2019. In
case you have missed some of our 1.x releases, here is a small overview. We have
added:</p>
<ul>
<li>Official integrations for <a href="https://uppy.io/blog/2020/11/1.23/">Vue</a>
(<a href="https://uppy.io/blog/2021/04/1.27/">3</a>), <a href="https://uppy.io/blog/2021/07/1.30/">Angular</a>, and
<a href="https://uppy.io/blog/2020/12/1.24/">Svelte</a></li>
<li><a href="https://uppy.io/blog/2020/12/1.24/">Hooks</a> for the React integration</li>
<li>Support for picking files from <a href="https://uppy.io/blog/2020/11/1.23/">Box</a>,
<a href="https://uppy.io/blog/2020/10/1.22/">Unsplash</a>, <a href="https://uppy.io/blog/2020/04/1.10/">Facebook</a>, and
<a href="https://uppy.io/blog/2020/04/1.10/">OneDrive</a></li>
<li><a href="https://uppy.io/blog/2021/05/1.29/">‚ÄúGhost‚Äù files</a>, as part of a revamped Golden Retriever
plugin, which makes recovering lost files even more intuitive</li>
<li>Support for 25 more languages (bringing it to a total of
<a href="https://uppy.io/docs/locales/#List-of-locale-packs">37</a>)</li>
<li><a href="https://uppy.io/blog/2020/04/1.13/">Dark mode</a></li>
<li>an <a href="https://uppy.io/blog/2020/07/1.18-image-editor/">Image Editor</a></li>
<li>And four new core team members: <a href="https://github.com/ajkachnic" target="_blank" rel="noopener noreferrer">@ajkachnic</a>,
<a href="https://github.com/mifi" target="_blank" rel="noopener noreferrer">@mifi</a>, <a href="https://github.com/aduh95" target="_blank" rel="noopener noreferrer">@aduh95</a>, and
<a href="https://github.com/murderlon" target="_blank" rel="noopener noreferrer">@murderlon</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="smaller-bundles">Smaller bundles<a href="https://uppy.io/blog/2021/08/2.0#smaller-bundles" class="hash-link" aria-label="Direct link to Smaller bundles" title="Direct link to Smaller bundles">‚Äã</a></h2>
<p>With 2.0, following in the footsteps of Microsoft, we are dropping support for
IE11. As a result, we are able to remove all built-in polyfills, and the new
bundle size is <strong>25% smaller</strong>! If you want your app to still support older
browsers (such as IE11), you may need to add the following polyfills to your
bundle:</p>
<ul>
<li><a href="https://github.com/mo/abortcontroller-polyfill" target="_blank" rel="noopener noreferrer">abortcontroller-polyfill</a></li>
<li><a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer">core-js</a></li>
<li><a href="https://github.com/mozdevs/mediaDevices-getUserMedia-polyfill" target="_blank" rel="noopener noreferrer">md-gum-polyfill</a></li>
<li><a href="https://github.com/que-etc/resize-observer-polyfill" target="_blank" rel="noopener noreferrer">resize-observer-polyfill</a></li>
<li><a href="https://github.com/github/fetch" target="_blank" rel="noopener noreferrer">whatwg-fetch</a></li>
</ul>
<p>If you're using a bundler, you need import these before Uppy:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'core-js'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'whatwg-fetch'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'abortcontroller-polyfill/dist/polyfill-patch-fetch'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Order matters here: AbortController needs fetch, which needs Promise (provided by core-js).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'md-gum-polyfill'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ResizeObserver</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'resize-observer-polyfill'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ResizeObserver</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??=</span><span class="token plain"> </span><span class="token maybe-class-name">ResizeObserver</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#393A34">{</span><span class="token exports"> </span><span class="token exports keyword module" style="color:#00009f">default</span><span class="token exports"> </span><span class="token exports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token exports operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you're using Uppy from a CDN, we now provide two bundles: one for up-to-date
browsers that do not include polyfills and use modern syntax, and one for legacy
browsers. When migrating, be mindful about the types of browsers you want to
support:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Modern browsers (recommended) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://releases.transloadit.com/uppy/v2.0.1/uppy.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Legacy browsers (IE11+) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">nomodule</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://releases.transloadit.com/uppy/v2.0.1/uppy.legacy.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f"></span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">module</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import 'https://releases.transloadit.com/uppy/v2.0.1/uppy.min.js';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please note that while you may be able to get 2.0 to work in IE11 this way, we
do not officially support it anymore.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="faster">Faster<a href="https://uppy.io/blog/2021/08/2.0#faster" class="hash-link" aria-label="Direct link to Faster" title="Direct link to Faster">‚Äã</a></h2>
<p>Uppy now loads faster thanks to the decreased bundle size. With Uppy 1.0, adding
many files (hundreds or even thousands) used to take dozens of seconds. Uppy 2.0
does the same thing in mere milliseconds! So, at least for this specific use
case, we feel comfortable in claiming that you may see your loading times go
<strong>up to a thousand times faster</strong>.</p>
<p>This was made possible by avoiding having to re-render all the file components
whenever something changes, using <code>memoize</code> and <code>virtual-list</code> (allowing us to
only render what is actually visible on screen). In addition, multiple files are
now added to state in one go via <code>uppy.addFiles(Array)</code> as opposed to before,
when <code>uppy.addFile(File)</code> + <code>uppy.setState</code> were being called in a loop.</p>
<p>Before optimizations:</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/uppy-performance-before-b2a473c8bdbee03af5ea1c6a13d781fc.gif" width="800" height="438" class="img_ev3q"></p>
<p>And after:</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/uppy-performance-after-f44f25665c7970c71d9c5c93c5009a6d.gif" width="800" height="438" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="preact-x-and-upgraded-dependencies">Preact X and upgraded dependencies<a href="https://uppy.io/blog/2021/08/2.0#preact-x-and-upgraded-dependencies" class="hash-link" aria-label="Direct link to Preact X and upgraded dependencies" title="Direct link to Preact X and upgraded dependencies">‚Äã</a></h2>
<p>We‚Äôve upgraded almost all of Uppy‚Äôs dependencies. This includes the migration to
Preact X. All plugins that depend on Preact have been upgraded from <code>8.2.9</code> to
the latest version <code>10.5.13</code>. If you‚Äôd like your custom plugin to continue
working with Uppy 2.0, it also needs to be using latest version of Preact.</p>
<p>Other notable upgrades include browserify to <code>v10</code>, typescript to <code>v4.3</code>,
autoprefixer to <code>v10</code>, and lerna to <code>v4</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-is-replaced-with-baseplugin-and-uiplugin"><code>Plugin</code> is replaced with <code>BasePlugin</code> and <code>UIPlugin</code><a href="https://uppy.io/blog/2021/08/2.0#plugin-is-replaced-with-baseplugin-and-uiplugin" class="hash-link" aria-label="Direct link to plugin-is-replaced-with-baseplugin-and-uiplugin" title="Direct link to plugin-is-replaced-with-baseplugin-and-uiplugin">‚Äã</a></h2>
<p><a href="https://uppy.io/docs/uppy/"><code>@uppy/core</code></a> provided a <code>Plugin</code> class for creating plugins. This was
used for any official plugin, but also for users who want to create their own
custom plugin. However, <code>Plugin</code> always came bundled with Preact, even if the
plugin itself didn't add any UI elements.</p>
<p>As of Uppy 2.0.0, <code>Plugin</code> has been replaced with <code>BasePlugin</code> and <code>UIPlugin</code>.
<code>BasePlugin</code> is the minimum you need to create a plugin and <code>UIPlugin</code> adds
Preact for rendering user interfaces.</p>
<p><strong>Note:</strong> some bundlers will include <code>UIPlugin</code> (and therefore Preact) if you
import from <code>@uppy/core</code>. To make sure this does not happen, you can import
<code>Uppy</code> and <code>BasePlugin</code> directly:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core/lib/Uppy.js'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BasePlugin</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core/lib/BasePlugin.js'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Interested in creating your own plugin? Check out the
<a href="https://uppy.io/docs/writing-plugins/">‚Äúwriting plugins‚Äù</a> guide.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="strict-typescript-types-by-default">Strict TypeScript types by default<a href="https://uppy.io/blog/2021/08/2.0#strict-typescript-types-by-default" class="hash-link" aria-label="Direct link to Strict TypeScript types by default" title="Direct link to Strict TypeScript types by default">‚Äã</a></h2>
<p>Uppy used to have loose types by default and strict types as an opt-in. The
default export was a function that returned the <code>Uppy</code> class, and the types came
bundled with the default export (<code>Uppy.SomeType</code>).</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tus </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/tus'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">Uppy</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">Uppy</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">.</span><span class="token generic-function generic class-name">StrictTypes</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	invalidOption</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this will make the compilation fail!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Uppy is now strictly typed by default and loose types have been removed. The
default export is the <code>Uppy</code> class and not a function. This means you need to
call <code>Uppy</code> with the <code>new</code> keyword when initializing it.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	invalidOption</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this will make the compilation fail!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Uppy types are now individual exports and should be imported separately.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UIPlugin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginTarget </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-types">Event types<a href="https://uppy.io/blog/2021/08/2.0#event-types" class="hash-link" aria-label="Direct link to Event types" title="Direct link to Event types">‚Äã</a></h3>
<p><a href="https://uppy.io/docs/uppy/"><code>@uppy/core</code></a> provides an <a href="https://uppy.io/docs/uppy/#uppy-on-39-event-39-action"><code>.on</code></a>
method to listen to <a href="https://uppy.io/docs/uppy/#Events">events</a>. The types for these events
were loose and allowed for invalid events to be passed, such as
<code>uppy.on('upload-errrOOOoooOOOOOrrrr')</code>.</p>
<p>Events have received a big update thanks to <a href="https://github.com/Hawxy" target="_blank" rel="noopener noreferrer">@Hawxy</a>,
making them more strict and accurate.</p>
<p>A breaking change was required to make this happen:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Invalid event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">on</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">Meta</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'upload-errrOOOoooOOOOOrrrr'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Normal event signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'complete'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> successResults </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">successful</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Custom signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Notice how the custom type has now become the second argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">on</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name string" style="color:#e3116c">'complete'</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> Meta</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'complete'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// The passed type is now merged into the `meta` types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> meta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">successful</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">myCustomMetadata</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Plugins that add their own events can merge with existing ones in <code>@uppy/core</code>
with <code>declare module '@uppy/core' { ... }</code>. This is a TypeScript pattern called
<a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation" target="_blank" rel="noopener noreferrer">module augmentation</a>.
For instance, when using <a href="https://uppy.io/docs/dashboard/"><code>@uppy/dashboard</code></a>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'dashboard:file-edit-start'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-pre-signing-urls-for-aws-s3-multipart">Batch pre-signing URLs for AWS S3 Multipart<a href="https://uppy.io/blog/2021/08/2.0#batch-pre-signing-urls-for-aws-s3-multipart" class="hash-link" aria-label="Direct link to Batch pre-signing URLs for AWS S3 Multipart" title="Direct link to Batch pre-signing URLs for AWS S3 Multipart">‚Äã</a></h2>
<p>The <a href="https://uppy.io/docs/aws-s3-multipart/"><code>@uppy/aws-s3-multipart</code></a> plugin can be used to upload
files directly to an S3 bucket using S3‚Äôs Multipart upload strategy. With this
strategy, files are chopped up in parts of 5MB+ each, so they can be uploaded
concurrently. It is also very reliable: if a single part fails to upload, only
that 5MB chunk has to be retried.</p>
<p>However, in Uppy 1.0, every part had to make the trip to the server to generate
a pre-signed URL. This meant that a 1GB file uploaded in 5MB chunks would
require two hundred trips to the server.</p>
<p>As of Uppy 2.0.0, we now pre-sign URLs in batches. That same 1GB file now only
takes fifty trips to the server (if the limit was four).</p>
<p>This is now the new default. Thanks to
<a href="https://github.com/martin-brennan" target="_blank" rel="noopener noreferrer">@martin-brennan</a> for this contribution!</p>
<p>Do you care about reliable uploads? You could also consider <a href="https://uppy.io/docs/tus/"><code>@uppy/tus</code></a>
with a self-hosted or Transloadit Tus server. Tus can resume uploads, supports
smaller chunks, and offers increased upload speeds.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="and-more">And more<a href="https://uppy.io/blog/2021/08/2.0#and-more" class="hash-link" aria-label="Direct link to And more" title="Direct link to And more">‚Äã</a></h2>
<ul>
<li>The <code>.run</code> method on the <code>Uppy</code> instance has been removed. This method was
already obsolete and only logged a warning. As of this major version, it no
longer exists.</li>
<li><a href="https://uppy.io/docs/informer/"><code>@uppy/informer</code></a> now supports showing multiple notifications at
the same time. The notifications themselves have also been improved.</li>
<li>Improved screen reader accessibility for checkboxes and the 'remove file'
button for <a href="https://uppy.io/docs/dashboard/"><code>@uppy/dashboard</code></a>.</li>
<li>Sort files and folders alphabetically in the Google Drive provider.</li>
<li>Polished our code base with improved eslint rules, private field methods, and
other modern JavaScript features that help us write more intention-revealing
and safe code.</li>
<li>To make Uppy more friendly towards new contributors, we have renamed our
<code>master</code> branch to <code>main</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-future-remains-for-10">What future remains for 1.0?<a href="https://uppy.io/blog/2021/08/2.0#what-future-remains-for-10" class="hash-link" aria-label="Direct link to What future remains for 1.0?" title="Direct link to What future remains for 1.0?">‚Äã</a></h2>
<p>Uppy 1.0 will continue to receive bug fixes for three more months (until
<time datetime="2021-12-01">1 December 2021</time>), security fixes for one more
year (until <time datetime="2022-09-01">1 September 2022</time>), but no more
new features after today. Exceptions are unlikely, but <em>can</em> be made ‚Äì to
accommodate those with commercial support contracts, for example.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thats-it">That's it!<a href="https://uppy.io/blog/2021/08/2.0#thats-it" class="hash-link" aria-label="Direct link to That's it!" title="Direct link to That's it!">‚Äã</a></h2>
<p>We hope you'll waste no time in taking Uppy 2.0 out for a walk. When you do,
please let us know what you thought of it on
<a href="https://www.reddit.com/r/javascript/comments/penbr7/uppy_file_uploader_20_smaller_and_faster_modular/" target="_blank" rel="noopener noreferrer">Reddit</a>,
<a href="https://news.ycombinator.com/item?id=28359287" target="_blank" rel="noopener noreferrer">HN</a>, ProductHunt, or
<a href="https://twitter.com/uppy_io/status/1432399270846603264" target="_blank" rel="noopener noreferrer">Twitter</a>. We're howling
at the moon to hear from you!</p>]]></content:encoded>
            <author>antoine@transloadit.com (Antoine du Hamel)</author>
            <author>artur@transloadit.com (Artur Paikin)</author>
            <author>mikael@transloadit.com (Mikael Finstad)</author>
            <author>merlijn@transloadit.com (Merlijn Vos)</author>
            <author>github@kooi.me (Ren√©e Kooi)</author>
            <author>andrew@transloadit.com (Andrew Kachnic)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.30: Angular integration, granular image rotation, Google Drive shortcuts]]></title>
            <link>https://uppy.io/blog/2021/07/1.30</link>
            <guid>https://uppy.io/blog/2021/07/1.30</guid>
            <pubDate>Fri, 02 Jul 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.30 introduces the long-awaited Angular integration (beta), granular image]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.30 introduces the long-awaited Angular integration (beta), granular image
rotation and Google Drive shortcuts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="angular-integration">Angular integration<a href="https://uppy.io/blog/2021/07/1.30#angular-integration" class="hash-link" aria-label="Direct link to Angular integration" title="Direct link to Angular integration">‚Äã</a></h2>
<p>Uppy now has an official Angular integration! It‚Äôs still in beta, so please try
it out and do let us know how we can improve through
<a href="https://mobile.twitter.com/uppy_io/" target="_blank" rel="noopener noreferrer">Twitter</a> or
<a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener noreferrer">GitHub</a>. The original draft implementation
was made by <a href="https://github.com/adammedford" target="_blank" rel="noopener noreferrer">Adam Medford</a>, then finalized,
polished and brought to release today by
<a href="https://github.com/ajkachnic" target="_blank" rel="noopener noreferrer">Andrew Kachnic</a> üëè</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @uppy/angular</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// app.component.ts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Component </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@angular/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> Uppy </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token decorator at operator" style="color:#393A34">@</span><span class="token decorator function" style="color:#d73a49">Component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	selector</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'app-root'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">AppComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	uppy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> debug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> autoProceed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!--- app.component.html --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">uppy-dashboard</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">[uppy]</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">uppy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">uppy-dashboard</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The following plugins are available as Angular component wrappers:</p>
<ul>
<li><code>&lt;uppy-dashboard /&gt;</code></li>
<li><code>&lt;uppy-drag-drop /&gt;</code></li>
<li><code>&lt;uppy-progress-bar /&gt;</code></li>
<li><code>&lt;uppy-status-bar /&gt;</code></li>
</ul>
<p>See the <a href="https://uppy.io/docs/angular/">Angular docs</a> for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="granular-image-rotation">Granular image rotation<a href="https://uppy.io/blog/2021/07/1.30#granular-image-rotation" class="hash-link" aria-label="Direct link to Granular image rotation" title="Direct link to Granular image rotation">‚Äã</a></h2>
<p><code>@uppy/image-editor</code> plugin received a new option <code>granularRotate: true</code> that
allows for granular image rotation: be it 12¬∞ or 59¬∞ ‚Äî just adjust the slider to
your liking.</p>
<video alt="" muted="" autoplay="" loop="">
  <source src="/img/blog/1.30/granular-rotation.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/1.30/granular-rotation.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="google-drive-shortcuts">Google Drive Shortcuts<a href="https://uppy.io/blog/2021/07/1.30#google-drive-shortcuts" class="hash-link" aria-label="Direct link to Google Drive Shortcuts" title="Direct link to Google Drive Shortcuts">‚Äã</a></h2>
<p>Google Drive shortcuts, much like in a desktop OS, are pointers to files or
folders that can be stored in another folder or drive. Uppy now supports
shortcuts ‚Äì you will see them alongside your usual files and folders.</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/drive-shortcut-8e2ea1eb3b003abb51d0c1f080b3f11c.png" width="1400" height="898" class="img_ev3q"></p>
<p><img loading="lazy" src="https://uppy.io/assets/images/uppy-shortcut-bcc51c3d4b0990a0ae9a8fa8dd5384a1.png" width="1200" height="940" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2021/07/1.30#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/react: allowed HTML attributes to be passed via props (#2891 /
@ajkachnic)</li>
<li>@uppy/drag-drop: Expose drag-drop events (#2914 / @Murderlon)</li>
<li>@uppy/companion: add <code>logClientVersion</code> option (#2855 / @mifi)</li>
<li>build: Fix eslint uppy package imports (#2915 / @Murderlon)</li>
</ul>
<p>See the
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1300" target="_blank" rel="noopener noreferrer">changelog</a>
for more details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="download">Download<a href="https://uppy.io/blog/2021/07/1.30#download" class="hash-link" aria-label="Direct link to Download" title="Direct link to Download">‚Äã</a></h2>
<p><a href="https://releases.transloadit.com/uppy/v1.29.1/uppy-v1.30.0.zip" target="_blank" rel="noopener noreferrer" class="TryButton">Download
Uppy 1.30 Bundle</a></p>
<p><small>Or <a href="https://uppy.io/docs/" target="_blank" rel="noopener noreferrer">include from CDN</a>. Note that it‚Äôs highly
recommended to
<a href="https://uppy.io/docs/plugins/#package-list" target="_blank" rel="noopener noreferrer">pick and choose specific Uppy plugins</a>
that you need, and install them with <code>npm</code> or <code>yarn</code>. This is because the bundle
includes all Uppy plugins at once.</small></p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.29: Golden Retriever, disableLocalFiles, Webcam previews, uppy.logout]]></title>
            <link>https://uppy.io/blog/2021/05/1.29</link>
            <guid>https://uppy.io/blog/2021/05/1.29</guid>
            <pubDate>Mon, 31 May 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In Uppy 1.29, we‚Äôve revamped the Golden Retriever plugin with support for]]></description>
            <content:encoded><![CDATA[<p>In Uppy 1.29, we‚Äôve revamped the Golden Retriever plugin with support for
partially recovered ‚Äúghost‚Äù files, added a <code>disableLocalFiles</code> option to the
Dashboard, enabled the ability to preview webcam videos before submitting and
provided an <code>uppy.logout()</code> method, along with an assortment of Companion
improvements.</p>
<video alt="Demo of Uppy Golden Retriever file restore plugin in action" muted="" autoplay="" loop="">
  <source src="/img/blog/1.29/ghosts-demo.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/1.29/ghosts-demo.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="golden-retriever">Golden Retriever<a href="https://uppy.io/blog/2021/05/1.29#golden-retriever" class="hash-link" aria-label="Direct link to Golden Retriever" title="Direct link to Golden Retriever">‚Äã</a></h2>
<p><a href="https://uppy.io/docs/golden-retriever/">Golden Retriever</a> (<code>@uppy/golden-retriever</code>) is Uppy‚Äôs
innovative plugin that recovers users‚Äô files after an accidentally closed
tab/window or a browser crash. Golden Retriever was first
<a href="https://uppy.io/blog/2017/07/golden-retriever/">introduced a few years ago</a>, during
Transloadit‚Äôs company meetup in Berlin, and now it finally underwent a proper
refactor.</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/golden-retriever-all-recovered-b38cff840844494f6aa86cc305d4039a.png" width="1200" height="880" class="img_ev3q"></p>
<p>In this release, we‚Äôre adding support for ‚Äúghosts‚Äù ‚Äî files for which we‚Äôve
restored the metadata, but were unable to recover the data blob itself (usually
due to its size). In this case, users will see a ghost icon over the file and a
‚ÄúRe-select‚Äù button to pick the file again.</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/golden-retriever-ghost-9e9b02b8ae7f4416a8b4026bc3461bac.png" width="1200" height="940" class="img_ev3q"></p>
<p>You can try Golden Retriever in action on
<a href="https://uppy.io/examples/dashboard/" target="_blank" rel="noopener noreferrer">the Dashboard example page</a>.</p>
<center><img loading="lazy" src="https://uppy.io/img/blog/golden-retriever/catch-fail-2.gif" alt="Golden Retriever failing to catch something" title="Good try, girl!" class="img_ev3q"></center>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard-disablelocalfiles">Dashboard: <code>disableLocalFiles</code><a href="https://uppy.io/blog/2021/05/1.29#dashboard-disablelocalfiles" class="hash-link" aria-label="Direct link to dashboard-disablelocalfiles" title="Direct link to dashboard-disablelocalfiles">‚Äã</a></h2>
<p>The <code>disableLocalFiles: true</code> option will disable drag &amp; drop, and hide the
‚ÄúBrowse‚Äù and ‚ÄúMy Device‚Äù buttons, allowing only uploads from plugins, such as
Webcam, Screen Capture, Google Drive or Instagram.</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/disableLocalFiles-4446a558b5557cef7389050794daf7d5.png" width="1494" height="1094" class="img_ev3q"></p>
<p><a href="https://uppy.io/docs/dashboard/#disableLocalFiles" target="_blank" rel="noopener noreferrer">Docs: disableLocalFiles</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="webcam-previews">Webcam Previews<a href="https://uppy.io/blog/2021/05/1.29#webcam-previews" class="hash-link" aria-label="Direct link to Webcam Previews" title="Direct link to Webcam Previews">‚Äã</a></h2>
<p>When recording a video with the <code>@uppy/webcam</code> plugin, you will now be given the
opportunity to play it back and review before submitting. If you happen to not
like the crab mask you‚Äôve used, you can re-record the video using a more
appropriate baby Yoda or duckface mask.</p>
<video alt="Demo of Uppy Golden Retriever file restore plugin in action" muted="" autoplay="" loop="">
  <source src="/img/blog/1.29/webcam-preview-demo.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/1.29/webcam-preview-demo.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="uppylogout">uppy.logout()<a href="https://uppy.io/blog/2021/05/1.29#uppylogout" class="hash-link" aria-label="Direct link to uppy.logout()" title="Direct link to uppy.logout()">‚Äã</a></h2>
<p>When your users log out of your app, you might want to also log them out of any
cloud providers they might have used through Uppy, for extra security.</p>
<p><code>uppy.logout()</code> calls <code>provider.logout()</code> on each remote provider plugin, like
Google Drive, Instagram, Dropbox, etc.</p>
<p><a href="https://uppy.io/docs/uppy/#uppy-logout" target="_blank" rel="noopener noreferrer">Docs: uppy-logout</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion">Companion<a href="https://uppy.io/blog/2021/05/1.29#companion" class="hash-link" aria-label="Direct link to Companion" title="Direct link to Companion">‚Äã</a></h2>
<ul>
<li>@uppy/companion-client: rethrow original error objects (#2889 /
@goto-bus-stop)</li>
<li>Pull out metric middleware logic (#2854 / @mifi)</li>
<li>Smaller Heroku deployment (#2845 / @goto-bus-stop)</li>
<li>Bump redis from 2.8.0 to 3.1.1 (#2865 / @dependabot, @ kiloreux)</li>
<li>add chunkSize Companion option (#2881 / @mifi)</li>
<li>fix NRP TypeScript errors (#2884 / @mifi)</li>
<li>support relative redirect URLs in responses (#2901 / @ goto-bus-stop)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2021/05/1.29#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>core: use AggregateError when available (#2869 / @aduh95)</li>
<li>build: upgrade TypeScript (#2856 / @ajkachnic)</li>
<li>webcam: improve MIME type detection to solve issue in iOS Safari (#2851 /
@dominiceden)</li>
</ul>
<p>See
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1291" target="_blank" rel="noopener noreferrer">changelog</a>
for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="download">Download<a href="https://uppy.io/blog/2021/05/1.29#download" class="hash-link" aria-label="Direct link to Download" title="Direct link to Download">‚Äã</a></h2>
<p><a href="https://releases.transloadit.com/uppy/v1.29.1/uppy-v1.29.1.zip" target="_blank" rel="noopener noreferrer" class="TryButton">Download
Uppy 1.29.1</a></p>
<p><small>Or <a href="https://uppy.io/docs/" target="_blank" rel="noopener noreferrer">include from CDN</a>. Note that it‚Äôs highly
recommended to
<a href="https://uppy.io/docs/plugins/#package-list" target="_blank" rel="noopener noreferrer">pick and choose specific Uppy plugins</a>
that you need, and install them with <code>npm</code> or <code>yarn</code>. This is because the bundle
includes all Uppy plugins at once.</small></p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.27: Drop Target plugin, Vue 3 support, Dashboard dynamic meta fields, ‚ÄúShared with me‚Äù in Google Drive]]></title>
            <link>https://uppy.io/blog/2021/04/1.27</link>
            <guid>https://uppy.io/blog/2021/04/1.27</guid>
            <pubDate>Mon, 05 Apr 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[In Uppy 1.27 we‚Äôve added a new @uppy/drop-target plugin, enabled support for]]></description>
            <content:encoded><![CDATA[<p>In Uppy 1.27 we‚Äôve added a new <code>@uppy/drop-target</code> plugin, enabled support for
Vue 3, introduced dynamic <code>metaFields</code> option for Dashboard, Google Drive now
lists documents that have been shared with you.</p>
<video alt="Demo video showing Uppy with Drop Target plugin which allows accepting drag and drop anywhere on a page" poster="/img/blog/1.26/dashboard-disabled.jpg" muted="" autoplay="" loop="">
  <source src="/img/blog/1.27/drop-target.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/1.27/drop-target.mp4
</video>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="drop-target">Drop Target<a href="https://uppy.io/blog/2021/04/1.27#drop-target" class="hash-link" aria-label="Direct link to Drop Target" title="Direct link to Drop Target">‚Äã</a></h2>
<p>With <code>@uppy/drop-target</code> it is now possible to turn your whole app / page (or
any other element, like <code>&lt;textarea&gt;</code>, for instance) into a drag-and-drop area:</p>
<p><img loading="lazy" alt="Uppy Dashboard UI with drop target plugin" src="https://uppy.io/assets/images/drop-target-ece163fa99fef8451195acc5d4077e73.jpg" width="1600" height="812" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">DropTarget</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="google-drive-shared-with-me">Google Drive ‚ÄúShared with me‚Äù<a href="https://uppy.io/blog/2021/04/1.27#google-drive-shared-with-me" class="hash-link" aria-label="Direct link to Google Drive ‚ÄúShared with me‚Äù" title="Direct link to Google Drive ‚ÄúShared with me‚Äù">‚Äã</a></h2>
<p>If you connect Uppy to Google Drive, you‚Äôll now see a new virtual folder called
‚ÄúShared with me‚Äù ‚Äî there you‚Äôll find (hard to guess, I know), documents that
have been shared with you.</p>
<p><img loading="lazy" alt="Google Drive ‚ÄúShared with me‚Äù folder" src="https://uppy.io/assets/images/shared-with-me-caed07cd7437ba1a316ab05327ce55e7.jpg" width="1226" height="968" class="img_ev3q"></p>
<p><a href="https://github.com/transloadit/uppy/pull/2758" target="_blank" rel="noopener noreferrer">PR #2758</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard-dynamic-metafields">Dashboard Dynamic <code>metaFields</code><a href="https://uppy.io/blog/2021/04/1.27#dashboard-dynamic-metafields" class="hash-link" aria-label="Direct link to dashboard-dynamic-metafields" title="Direct link to dashboard-dynamic-metafields">‚Äã</a></h2>
<p>Sometimes you may want to show specific meta fields for certain type of files.
For instance, you may want to show location and alt attribute for images. Now,
instead of setting a fixed array of fields, you can pass a function that will be
called for each file, returning an array of fields from it:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">trigger</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'#pick-files'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">metaFields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fields </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'name'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'File name'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">startsWith</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'image/'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fields</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'location'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Photo Location'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      fields</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'alt'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Alt text'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://uppy.io/docs/dashboard/#metaFields" target="_blank" rel="noopener noreferrer">Dashboard <code>metaFields</code></a> docs
for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vue-3">Vue 3<a href="https://uppy.io/blog/2021/04/1.27#vue-3" class="hash-link" aria-label="Direct link to Vue 3" title="Direct link to Vue 3">‚Äã</a></h2>
<p><code>@uppy/vue</code> integration now supports Vue 3! This is done by checking the
arguments of the <code>render</code> function and determining whether it is using Vue 2 or
3, and then returning the appropriate rendering method.</p>
<p><a href="https://github.com/transloadit/uppy/pull/2755" target="_blank" rel="noopener noreferrer">PR #2755</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion-cors-and-better-testing">Companion CORS and Better Testing<a href="https://uppy.io/blog/2021/04/1.27#companion-cors-and-better-testing" class="hash-link" aria-label="Direct link to Companion CORS and Better Testing" title="Direct link to Companion CORS and Better Testing">‚Äã</a></h2>
<p>In Companion, we‚Äôve improved unit testing DX
(<a href="https://github.com/transloadit/uppy/pull/2827" target="_blank" rel="noopener noreferrer">#2827</a>) and switched to using
the <code>cors</code> module instead of custom cors logic
(<a href="https://github.com/transloadit/uppy/pull/2823" target="_blank" rel="noopener noreferrer">#2823</a>).</p>
<p>@coreprocess submited a fix that allows Companion to serve on a subpath
(<a href="https://github.com/transloadit/uppy/pull/2797" target="_blank" rel="noopener noreferrer">#2797</a>), and added Redis pubsub
scope setting (<a href="https://github.com/transloadit/uppy/pull/2804" target="_blank" rel="noopener noreferrer">#2804</a>)!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="npm-7">npm 7<a href="https://uppy.io/blog/2021/04/1.27#npm-7" class="hash-link" aria-label="Direct link to npm 7" title="Direct link to npm 7">‚Äã</a></h2>
<p>We‚Äôve finally upgraded our monorepo to npm 7 and
<a href="https://docs.npmjs.com/cli/v7/using-npm/workspaces" target="_blank" rel="noopener noreferrer">Workspaces</a>. If you are a
contributor, please upgrade <code>npm install npm -g</code>, as npm 7 is now required for
the Uppy repo.</p>
<p><a href="https://github.com/transloadit/uppy/pull/2835" target="_blank" rel="noopener noreferrer">PR #2835</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="new-linter-rules">New Linter Rules<a href="https://uppy.io/blog/2021/04/1.27#new-linter-rules" class="hash-link" aria-label="Direct link to New Linter Rules" title="Direct link to New Linter Rules">‚Äã</a></h2>
<p>Quite a few new rules have been added to our eslint-config, which is now mostly
<code>eslint-config-transloadit</code> with some custom uppy-specific overrides.</p>
<p><a href="https://github.com/transloadit/uppy/pull/2796" target="_blank" rel="noopener noreferrer">PR #2796</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2021/04/1.27#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/xhr-upload: Set headers just before the upload in case options changed
(#2781 / @rart)</li>
<li>@uppy/aws-s3-multipart: Aws-s3-multipart sends outdated file info to
upload-success event (#2828 / @goto-bus-stop)</li>
<li>@uppy/aws-s3: removeUploader triggered on uninstall (#2824 / @slawexxx44)</li>
<li>@uppy/webcam: Fix issue where the modes: <code>['audio-only']</code> option was ignored
when getting tracks from the media stream (#2810 / @dominiceden)</li>
<li>website: Website improvements (#2803 / @nqst)</li>
</ul>
<p>See
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1270" target="_blank" rel="noopener noreferrer">changelog</a>
for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="download">Download<a href="https://uppy.io/blog/2021/04/1.27#download" class="hash-link" aria-label="Direct link to Download" title="Direct link to Download">‚Äã</a></h2>
<p><a href="https://releases.transloadit.com/uppy/v1.27.0/uppy-v1.27.0.zip" target="_blank" rel="noopener noreferrer" class="TryButton">Download
Uppy 1.27.0</a></p>
<p><small>Or <a href="https://uppy.io/docs/" target="_blank" rel="noopener noreferrer">include from CDN</a>. Note that it‚Äôs highly
recommended to
<a href="https://uppy.io/docs/plugins/#package-list" target="_blank" rel="noopener noreferrer">pick and choose specific Uppy plugins</a>
that you need, and install them with <code>npm</code> or <code>yarn</code>. This is because the bundle
includes all Uppy plugins at once.</small></p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.26: Dashboard ‚Äúdisabled‚Äù, per-file headers]]></title>
            <link>https://uppy.io/blog/2021/02/1.26</link>
            <guid>https://uppy.io/blog/2021/02/1.26</guid>
            <pubDate>Fri, 26 Feb 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.26 brings a new disabled option for the Dashboad, ability to set]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.26 brings a new <code>disabled</code> option for the Dashboad, ability to set
headers per file with XHR Upload, and fixes for the Transloadit plugin.</p>
<p><img loading="lazy" alt="Uppy Dashboard UI with disabled state" src="https://uppy.io/assets/images/dashboard-disabled-6df98c5e4209d6d4290c96d100fe9617.jpg" width="1219" height="959" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dashboard-disabled">Dashboard ‚ÄúDisabled‚Äù<a href="https://uppy.io/blog/2021/02/1.26#dashboard-disabled" class="hash-link" aria-label="Direct link to Dashboard ‚ÄúDisabled‚Äù" title="Direct link to Dashboard ‚ÄúDisabled‚Äù">‚Äã</a></h2>
<p>You can now specify a <code>disabled</code> option for the Dashboard, in order to make it
non-interactive and grayed out. Users won‚Äôt be able to click on buttons or drop
files.</p>
<p>This is useful when you need to confitionally enable/disable file uploading or
manipulation, based on a condition in your app.</p>
<video alt="Demo video showing Uppy with Dashboard disabled vs enabled state" poster="/img/blog/1.26/dashboard-disabled.jpg" muted="" autoplay="" loop="">
  <source src="/img/blog/1.26/dashboard-disabled-vs-enabled.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/img/blog/1.26/dashboard-disabled-vs-enabled.mp4
</video>
<p>This option can be set on init:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">disabled</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and via API:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dashboard </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Dashboard'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dashboard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">disabled</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">userNameInput</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'change'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	dashboard</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">disabled</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://uppy.io/docs/dashboard/#disabled-false" target="_blank" rel="noopener noreferrer">See the docs</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="xhr-upload-per-file-headers">XHR Upload Per File headers<a href="https://uppy.io/blog/2021/02/1.26#xhr-upload-per-file-headers" class="hash-link" aria-label="Direct link to XHR Upload Per File headers" title="Direct link to XHR Upload Per File headers">‚Äã</a></h2>
<p><code>@uppy/xhr-upload</code> now accept a <code>headers: (file) =&gt; {}</code> function, so you can do:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">XHRUpload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function-variable function" style="color:#d73a49">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">global</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation property-access">userToken</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token string-property property" style="color:#36acaa">'header-name'</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">someMetaValue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>to determine file-specific headers.</p>
<p>The function syntax for <code>headers</code> is only available if the <code>bundle</code> option is
<code>false</code> (the default). <code>bundle</code> uploads share only one set of headers.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-system-improvements">Build System Improvements<a href="https://uppy.io/blog/2021/02/1.26#build-system-improvements" class="hash-link" aria-label="Direct link to Build System Improvements" title="Direct link to Build System Improvements">‚Äã</a></h2>
<ul>
<li>build: set legacy-peer-deps for npm 7. We have some peerDependency mismatches
in our install tree. In npm 6 this was OK (maybe reason for a warning) but in
npm 7 they hard fail the install</li>
<li>build: added npm version check (33e656cad32b865f960dbd88abf4d3839c8377f0 /
@goto-bus-stop)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="transloadit-plugin">Transloadit Plugin<a href="https://uppy.io/blog/2021/02/1.26#transloadit-plugin" class="hash-link" aria-label="Direct link to Transloadit Plugin" title="Direct link to Transloadit Plugin">‚Äã</a></h2>
<ul>
<li>Fixed a case where the plugin used stale file data.</li>
<li>Fixed polling fallback bugs.</li>
<li>Url concatenation is now more robust.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2021/02/1.26#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/companion: Docker tag release (#2771 / @kiloreux)</li>
<li>@uppy/companion: Companion should respect previously set value for
Accesss-Control-Allow-Methods (#2726 / @tim-kos, @mifi, @so-steve)</li>
<li>@uppy/transloadit: fix polling fallback bugs (#2759 / @goto-bus-stop)</li>
<li>@uppy/utils: added mp4 file type support ‚Äî Safari 14.0 on Mac records audio
using audio/mp4 MIME type which isn't currently recognised by Uppy (#2753 /
@dominiceden)</li>
</ul>
<p>See
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1260" target="_blank" rel="noopener noreferrer">changelog</a>
for details.</p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.25: right-to-left scripts, Ukrainian translation, Companion improvements]]></title>
            <link>https://uppy.io/blog/2021/01/1.25</link>
            <guid>https://uppy.io/blog/2021/01/1.25</guid>
            <pubDate>Fri, 29 Jan 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.25 adds support for right-to-left scripts, Ukrainian translation and]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.25 adds support for right-to-left scripts, Ukrainian translation and
various improvements for Companion.</p>
<p>Just see how cool this looks, and read further for a video demo and some behind
the scenes implementation sorcery:</p>
<p><img loading="lazy" alt="Uppy Dashboard UI flipped for right-to-left Arabic language" src="https://uppy.io/assets/images/right-to-left-0fae5444f3b207778e206525cdd3a6ff.jpg" width="1212" height="954" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="right-to-left-scripts">Right-to-left scripts<a href="https://uppy.io/blog/2021/01/1.25#right-to-left-scripts" class="hash-link" aria-label="Direct link to Right-to-left scripts" title="Direct link to Right-to-left scripts">‚Äã</a></h2>
<p>Ren√©e have improved support for right-to-left scripts (such as Arabic, Farsi,
Hebrew). This means that Uppy UI can now be mirrored, like how you might see on
sites like
<a href="https://ar.wikipedia.org/wiki/%D8%A7%D9%84%D8%B5%D9%81%D8%AD%D8%A9_%D8%A7%D9%84%D8%B1%D8%A6%D9%8A%D8%B3%D9%8A%D8%A9" target="_blank" rel="noopener noreferrer">Wikipedia</a>.</p>
<video alt="Demo video showing Uppy with right-to-left mirrored UI" poster="/img/blog/1.25/right-to-left.jpg" muted="" autoplay="" loop="">
  <source src="/img/blog/1.25/right-to-left.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/img/blog/1.25/right-to-left.mp4
</video>
<p>HTML <code>dir</code> attribute can be used to set the direction ‚Äî any parent element of
the Dashboard may have it. It‚Äôs good practice for sites to add a dir attribute
on <code>&lt;html&gt;</code> element, but for backwards compatibility the Dashboard will default
to left-to-right rendering.</p>
<p>The text direction can also be set in code using the new <code>direction</code> option for
the Dashboard plugin. This is useful for the modal dashboard, which would
typically be mounted in the <code>&lt;body&gt;</code> element, so there is no other parent
element that you could set the <code>dir</code> attribute on (aside from <code>&lt;body&gt;</code> and
<code>&lt;html&gt;</code>, which sites <em>should</em> do, but may not).</p>
<blockquote>
<p>Head over to the
<a href="https://github.com/transloadit/uppy/pull/2705" target="_blank" rel="noopener noreferrer">#2705 PR description and code</a>,
if you are interested in how this is implemented, using new CSS properties
like <code>inline-start</code> and <code>inline-end</code> with <code>postcss-logical</code> and
<code>postcss-dir-pseudo-class</code> for the fallback.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="locales">Locales<a href="https://uppy.io/blog/2021/01/1.25#locales" class="hash-link" aria-label="Direct link to Locales" title="Direct link to Locales">‚Äã</a></h2>
<p><a href="https://github.com/elkebab" target="_blank" rel="noopener noreferrer">@DenysNosov</a> contributed a Ukrainian translation
and fixes for Russian grammar!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-guide">Integration Guide<a href="https://uppy.io/blog/2021/01/1.25#integration-guide" class="hash-link" aria-label="Direct link to Integration Guide" title="Direct link to Integration Guide">‚Äã</a></h2>
<p>Andrew, who‚Äôs been on fire recently adding Vue and Svelte integrations for Uppy,
has taken the time to share his experience and has written an
‚Äú<a href="https://uppy.io/docs/contributing.html/#Adding-a-new-integration">Adding a new integration</a>‚Äù
guide, in case you‚Äôd like to help befriend Uppy with your favorite framework or
library.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="companion">Companion<a href="https://uppy.io/blog/2021/01/1.25#companion" class="hash-link" aria-label="Direct link to Companion" title="Direct link to Companion">‚Äã</a></h2>
<ul>
<li>Added support for setting 3rd party credentials in runtime</li>
<li>Metadata is now passed to S3</li>
<li>Support for <code>opts.companionCookiesRule</code> rule</li>
<li>Delete tus error‚Äôs <code>originalRequest</code> field before propagating error</li>
<li>Companion now uses multi-stage docker build</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2021/01/1.25#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/dashboard: emit fileId on both file-edit-start and file-edit-complete
events</li>
<li>@uppy/box: added Box to Uppy CDN</li>
</ul>
<p>See
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1250" target="_blank" rel="noopener noreferrer">changelog</a>
for details.</p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Uppy 1.24: üéÖ Happy Holidays ‚Äî Svelte, React hook, Auto Open Image Editor]]></title>
            <link>https://uppy.io/blog/2020/12/1.24</link>
            <guid>https://uppy.io/blog/2020/12/1.24</guid>
            <pubDate>Thu, 24 Dec 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.24 adds an experimental Svelte integration, additional React components,]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.24 adds an experimental Svelte integration, additional React components,
<code>autoOpenFileEditor</code> option for Dashboard, and a Norwegian (bokm√•l) translation!</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/uppy-svelte-db0a92474ec31b56b47af36c6181c90f.png" width="1006" height="968" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="svelte">Svelte<a href="https://uppy.io/blog/2020/12/1.24#svelte" class="hash-link" aria-label="Direct link to Svelte" title="Direct link to Svelte">‚Äã</a></h2>
<p>Last month we introduced the first release of official Vue.js components for
Uppy. This month, we're releasing <code>@uppy/svelte</code>: a set of components for the
Svelte framework. Credit, once again, goes to
<a href="https://github.com/ajkachnic" target="_blank" rel="noopener noreferrer">Andrew Kachnic</a> (and special thanks to
<a href="https://github.com/adammedford" target="_blank" rel="noopener noreferrer">Adam Medford</a>)!</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @uppy/svelte</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">main</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">&lt;Dashboard uppy={uppy} plugins={['Webcam']} /&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">main</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import { Dashboard } from '@uppy/svelte';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import Uppy from '@uppy/core';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import Webcam from '@uppy/webcam';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	let uppy = new Uppy().use(Webcam);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please see <a href="https://uppy.io/docs/svelte/" target="_blank" rel="noopener noreferrer">the Uppy Svelte documentation</a> for all
the components.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="react">React<a href="https://uppy.io/blog/2020/12/1.24#react" class="hash-link" aria-label="Direct link to React" title="Direct link to React">‚Äã</a></h2>
<p>The <code>@uppy/react</code> package now contains <code>&lt;FileInput /&gt;</code>, a wrapper for the
<code>@uppy/file-input</code> plugin. It can render simple HTML file input or button, for
situations where a flashy user interface is not desired.</p>
<p>Additionally, <code>useUppy()</code> is our first React Hook, made to manage the lifecycle
of Uppy instances. Without this, it's easy to accidentally create many garbage
Uppy instances in modern React code.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">FileInput</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useUppy </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Tus</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@uppy/tus'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">MyUploader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useUppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://tusd.tusdemo.net'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// useUppy() will automatically `.close()` the Uppy instance for us when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// MyUploader unmounts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">FileInput</span><span class="token plain"> uppy</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This does not solve all our problems yet: dynamic configuration is still
difficult to do right, due to the mismatch between React's declarative and
Uppy's imperative style. We hope to add more documentation and tools to bridge
the gap in the new year.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="locales">Locales<a href="https://uppy.io/blog/2020/12/1.24#locales" class="hash-link" aria-label="Direct link to Locales" title="Direct link to Locales">‚Äã</a></h2>
<p><a href="https://github.com/elkebab" target="_blank" rel="noopener noreferrer">@elkebab</a> contributed a Norwegian translation!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="auto-open-image-editor">Auto Open Image Editor<a href="https://uppy.io/blog/2020/12/1.24#auto-open-image-editor" class="hash-link" aria-label="Direct link to Auto Open Image Editor" title="Direct link to Auto Open Image Editor">‚Äã</a></h2>
<p>If you are using Image Editor plugin with the Dashboard, there‚Äôs a new option
<a href="https://uppy.io/docs/dashboard/#autoOpenFileEditor-false" target="_blank" rel="noopener noreferrer"><code>autoOpenFileEditor</code></a>,
which will open Image Editor automatically for the first image that was added to
Uppy.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">autoOpenFileEditor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img loading="lazy" class="border img_ev3q" src="https://uppy.io/img/blog/1.24/image-editor-alone.jpg" alt="Uppy Image Editor in Dashboard">
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2020/12/1.24#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/core: new event <code>files-added</code> with all files added in one batch (#2681 /
@arturi)</li>
<li>@uppy/utils: Add archive mime types (#2703 / @ahmedkandel)</li>
<li>@uppy/companion: fix crash when Dropbox API returns an error (#2687 /
@ifedapoolarewaju)</li>
</ul>
<p>See
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md#1240" target="_blank" rel="noopener noreferrer">changelog</a>
for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="happy-holidays">Happy Holidays!<a href="https://uppy.io/blog/2020/12/1.24#happy-holidays" class="hash-link" aria-label="Direct link to Happy Holidays!" title="Direct link to Happy Holidays!">‚Äã</a></h2>
<p>Many thanks to all our contributors and users over the past year! Uppy has
gained quite a few new features and important improvements in 2020 (despite
everything going on offline!). We hope to see you again soon in our first
release of 2021 :)</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Uppy 1.23: Vue.js, Box, Done button and cloud file restrictions]]></title>
            <link>https://uppy.io/blog/2020/11/1.23</link>
            <guid>https://uppy.io/blog/2020/11/1.23</guid>
            <pubDate>Mon, 30 Nov 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.23 brings Vue.js components üí•, Box file service support, a ‚ÄúDone‚Äù button]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.23 brings Vue.js components üí•, Box file service support, a ‚ÄúDone‚Äù button
for the Status Bar + Dashboard, and a better cloud file restrictions UI.</p>
<p><img loading="lazy" alt="Vue.js Uppy code sample" src="https://uppy.io/assets/images/vue-code-cover-93b2416dbbff70749807f4b77d0eceae.png" width="1156" height="1522" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vuejs">Vue.js<a href="https://uppy.io/blog/2020/11/1.23#vuejs" class="hash-link" aria-label="Direct link to Vue.js" title="Direct link to Vue.js">‚Äã</a></h2>
<p>We‚Äôve had <a href="https://uppy.io/docs/react/" target="_blank" rel="noopener noreferrer">Uppy React components</a> available for
quite some time now. With the increasing popularity of Vue.js library, we‚Äôre
proud to announce it‚Äôs now much easier to use
<a href="https://uppy.io/docs/vue/" target="_blank" rel="noopener noreferrer">Uppy with Vue</a>, thanks to the amazing work by
<a href="https://mobile.twitter.com/su_andrewk" target="_blank" rel="noopener noreferrer">Andrew Kachnic</a>:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @uppy/vue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">template</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">div</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">id</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">app</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dashboard</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">:uppy</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">uppy</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">:plugins</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">['Webcam']</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">div</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">template</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import { Dashboard } from '@uppy/vue';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import '@uppy/core/dist/style.css';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import '@uppy/dashboard/dist/style.css';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import Uppy from '@uppy/core';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	import Webcam from '@uppy/webcam';</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	export default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		name: 'App',</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		components: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			Dashboard,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		computed: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			uppy: () =&gt; new Uppy().use(Webcam),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		beforeDestroy() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			this.uppy.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>@uppy/vue</code> package provides components for all of the most popular Uppy UI
plugins:</p>
<ul>
<li><code>&lt;dashboard /&gt;</code> - renders an inline <code>@uppy/dashboard</code></li>
<li><code>&lt;dashboard-modal /&gt;</code> - renders a <code>@uppy/dashboard</code> modal</li>
<li><code>&lt;drag-drop /&gt;</code> - renders a <code>@uppy/drag-drop</code> area</li>
<li><code>&lt;progress-bar /&gt;</code> - renders a <code>@uppy/progress-bar</code></li>
<li><code>&lt;status-bar /&gt;</code> - renders a <code>@uppy/status-bar</code></li>
</ul>
<p>Check out the <a href="https://uppy.io/docs/vue/" target="_blank" rel="noopener noreferrer">Vue documentation</a> for details.</p>
<p>Angular and Svelte support is on our list next.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-file-restrictions">Cloud File Restrictions<a href="https://uppy.io/blog/2020/11/1.23#cloud-file-restrictions" class="hash-link" aria-label="Direct link to Cloud File Restrictions" title="Direct link to Cloud File Restrictions">‚Äã</a></h2>
<p>Dropbox, Instagram, Google Drive and other cloud providers now immediately gray
out files that won‚Äôt pass Uppy restrictions set by the developer:</p>
<p><img loading="lazy" alt="Google Drive restrictions example" src="https://uppy.io/assets/images/restrictions-1-735ee426cdbcb47e91c24ddfc162b03e.jpg" width="1400" height="707" class="img_ev3q"></p>
<p><img loading="lazy" alt="Instagram restrictions example" src="https://uppy.io/assets/images/restrictions-2-bd022c92c78fe86eed007875030d4cfc.jpg" width="1400" height="809" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="done-button">Done Button<a href="https://uppy.io/blog/2020/11/1.23#done-button" class="hash-link" aria-label="Direct link to Done Button" title="Direct link to Done Button">‚Äã</a></h2>
<p>If <a href="https://uppy.io/docs/dashboard/#doneButtonHandler" target="_blank" rel="noopener noreferrer"><code>doneButtonHandler</code></a>
option is passed to the Status Bar plugin, it will render a ‚ÄúDone‚Äù button in
place of Pause/Resume/Cancel buttons, once the upload/encoding is done. The
behaviour of the ‚ÄúDone‚Äù button is defined by the handler function ‚Äî can be used
to close file picker modals or clear the upload state.</p>
<img loading="lazy" class="border img_ev3q" alt="Status Bar Done button UI" src="https://uppy.io/img/blog/1.23/status-bar-done.jpg">
<p>By default the Done button will close the Dashboard modal window and reset Uppy
state.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="box-file-provider">Box File Provider<a href="https://uppy.io/blog/2020/11/1.23#box-file-provider" class="hash-link" aria-label="Direct link to Box File Provider" title="Direct link to Box File Provider">‚Äã</a></h2>
<p>Thanks to <a href="https://github.com/cartfisk" target="_blank" rel="noopener noreferrer">@cartfisk</a> Uppy gains support for Box
file service. You can add try it out by doing <code>npm install @uppy/box</code> and
upgrading <code>@uppy/companion</code> to the latest version.</p>
<p>Bragging moment, here‚Äôs what
<a href="https://github.com/transloadit/uppy/pull/2549#issue-491527196" target="_blank" rel="noopener noreferrer">@cartfish had to say about Uppy</a>:</p>
<blockquote>
<p>Hope this is useful! Hats off to the awesome React integration, easy
contribution workflow, helpful docs, and readable, clean code. 10/10.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="image-editor-optional-buttons">Image Editor Optional Buttons<a href="https://uppy.io/blog/2020/11/1.23#image-editor-optional-buttons" class="hash-link" aria-label="Direct link to Image Editor Optional Buttons" title="Direct link to Image Editor Optional Buttons">‚Äã</a></h2>
<p><code>@uppy/image-editor</code> plugin got support for optional buttons ‚Äî you can choose to
hide or show just the ones you need ‚Äî crop, rotate, square, landscape, etc.
Thanks, <a href="https://github.com/lamartire" target="_blank" rel="noopener noreferrer">@lamartire</a>!</p>
<p>See new <a href="https://uppy.io/docs/image-editor/#Options" target="_blank" rel="noopener noreferrer"><code>actions</code></a> property in the
Image Editor‚Äôs options.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2020/11/1.23#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/robodog: Update addTransloaditPlugin.js to include missing configurable
Transloadit plugin options (#2612 / @ethanwillis)</li>
<li>@uppy/core: add <code>uppy.opts.infoTimeout</code> (#2619 / @arturi)</li>
<li>@uppy/onedrive: fix OneDrive for Business (#2536 / @szh)</li>
<li>@uppy/image-editor: show ‚Äúedit‚Äù icon even when metaFields are not specified
(#2614 / @arturi)</li>
<li>test: added test DeepFrozenStore with deepFreeze to try and assert that state
in not mutated anywhere by accident (#2607 / @arturi)</li>
<li>build: switched from Travis to GitHub Actions (@goto-bus-stop)</li>
</ul>
<p>As always, you can find the full list of changes and package versions, as well
as future plans, in our
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">changelog</a>.</p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[üéÉ Uppy 1.22: Webcam camera source, Unsplash and maxTotalFileSize]]></title>
            <link>https://uppy.io/blog/2020/10/1.22</link>
            <guid>https://uppy.io/blog/2020/10/1.22</guid>
            <pubDate>Fri, 30 Oct 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Uppy 1.22 (the spooky Halloween edition) adds a new Unsplash provider, Webcam]]></description>
            <content:encoded><![CDATA[<p>Uppy 1.22 (the spooky Halloween edition) adds a new Unsplash provider, Webcam
camera selector dropdown and a <code>maxTotalFileSize</code> restriction.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="webcam-camera-source">Webcam Camera Source<a href="https://uppy.io/blog/2020/10/1.22#webcam-camera-source" class="hash-link" aria-label="Direct link to Webcam Camera Source" title="Direct link to Webcam Camera Source">‚Äã</a></h2>
<p>If your device has multiple cameras, you can now choose which one you want to
use (if you allow the
<a href="https://uppy.io/docs/webcam/#showVideoSourceDropdown-false" target="_blank" rel="noopener noreferrer">showVideoSourceDropdown</a>
option).</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/webcam-dropdown-full-584bce2c916573ac10d1aa02ad93311a.png" width="1000" height="731" class="img_ev3q"></p>
<p><img loading="lazy" src="https://uppy.io/assets/images/webcam-dropdown-short-1a53f0ea55f1e41124aae73369ffe840.png" width="1000" height="205" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maxtotalfilesize">maxTotalFileSize<a href="https://uppy.io/blog/2020/10/1.22#maxtotalfilesize" class="hash-link" aria-label="Direct link to maxTotalFileSize" title="Direct link to maxTotalFileSize">‚Äã</a></h2>
<p>New <code>maxTotalFileSize</code> restriction makes sure the total size of all the files
selected isn‚Äôt over a certain threshold:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">restrictions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">maxTotalFileSize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">104857600</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unsplash">Unsplash<a href="https://uppy.io/blog/2020/10/1.22#unsplash" class="hash-link" aria-label="Direct link to Unsplash" title="Direct link to Unsplash">‚Äã</a></h2>
<p><a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer">Unsplash</a> is a popular website dedicated to sharing free
stock photography. With a new Uppy plugin you can search for ‚Äútrains‚Äù, ‚ÄúNew
York‚Äù or ‚ÄúHarry Potter‚Äù images and upload them where needed:</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/unsplash-50a5909bde76cf3cb4eb212882870567.jpg" width="1000" height="735" class="img_ev3q"></p>
<p>The plugin launches in beta, but you can already try it out by installing
<code>@uppy/unsplash</code> and upgrading <code>@uppy/companion</code> to the latest version (2.1.0).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2020/10/1.22#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/companion: add option to hide welcome and metrics (#2521 / @szh)</li>
<li>@uppy/companion: add more test cases to companion tests (#2585 /
@ifedapoolarewaju)</li>
<li>@uppy/companion: upgrade prometheus (fixes memory leak) (#2600 /
@ifedapoolarewaju)</li>
<li>@uppy/locales: update th_TH.js (#2571 / @dogrocker)</li>
<li>@uppy/locales: add missing camera translations to de_DE (#2574 / @ferdiusa)</li>
<li>@uppy/locales: update el_GR.js with more proper wording for Drag'n'Drop (#2578
/ @aalepis)</li>
<li>@uppy/core: add postprocess progress when upload success (#2535 / @mejiaej)</li>
<li>@uppy/react: Webpack5: Fix react imports (#2589 / @olemoign)</li>
<li>@uppy/thumbnail-generator: Add support for png thumbnails (#2603 / @SxDx)</li>
<li>website: mobile issues fixes + compact Companion migration table (#2593 /
@nqst)</li>
</ul>
<p>As always, you can find the full list of changes and package versions, as well
as future plans, in our
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">changelog</a>.</p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Companion 2.0 is here]]></title>
            <link>https://uppy.io/blog/2020/09/companion-2.0</link>
            <guid>https://uppy.io/blog/2020/09/companion-2.0</guid>
            <pubDate>Wed, 09 Sep 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[We are happy to announce version 2.0 of Companion! üéâ After maintaining and]]></description>
            <content:encoded><![CDATA[<p>We are happy to announce version 2.0 of Companion! üéâ After maintaining and
improving the 1.x series for over a year, we're now releasing a major version
bump on the Companion package. The drive on this release is mainly towards
fixing some terminology inconsistencies and aligning with Node.js LTS to ease
the maintenance burden.</p>
<p>So what are the changes you can expect with Companion 2.0?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node--v10">Node &gt;= v10<a href="https://uppy.io/blog/2020/09/companion-2.0#node--v10" class="hash-link" aria-label="Direct link to Node >= v10" title="Direct link to Node >= v10">‚Äã</a></h2>
<p>Node.js 8.x has reached end-of-life. Consequently, Companion 2.0 has dropped
support for Node.js 6.x and Node.js 8.x, and now requires that you run at least
Node.js 10.20.1.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="renamed-provider-options">Renamed provider options<a href="https://uppy.io/blog/2020/09/companion-2.0#renamed-provider-options" class="hash-link" aria-label="Direct link to Renamed provider options" title="Direct link to Renamed provider options">‚Äã</a></h2>
<p>Pre 2.0, there were inconsistencies in relation to the provider names. In some
places, the Google Drive provider was referred to as <em>google</em> (e.g., in
<code>providerOptions</code>) while in some other places, it was referred to as <em>drive</em>
(e.g., the server endpoints <code>/drive/list</code>). Companion 2.0 now consistently uses
the name <em>drive</em> everywhere. Similarly, the OneDrive provider was made to have
the consistent name <em>onedrive</em>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="changed-redirect-uris">Changed Redirect URIs<a href="https://uppy.io/blog/2020/09/companion-2.0#changed-redirect-uris" class="hash-link" aria-label="Direct link to Changed Redirect URIs" title="Direct link to Changed Redirect URIs">‚Äã</a></h2>
<p>On the topic of consistent naming, we have also made some changes to the
redirect URIs supplied during the OAuth process. For example, in the case of
Google Drive, the form of the old redirect URI was
<code>https://mycompanionwebsite.tld/connect/google/callback</code>. In Companion 2.0, this
is now changed to <code>https://mycompanionwebsite.tld/drive/redirect</code>. This is a
Breaking Change: you will need to make the corresponding changes to your
redirect URIs on your Providers' API Dashboards.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="compatibility-with-uppy-1x-client">Compatibility with Uppy 1.x client<a href="https://uppy.io/blog/2020/09/companion-2.0#compatibility-with-uppy-1x-client" class="hash-link" aria-label="Direct link to Compatibility with Uppy 1.x client" title="Direct link to Compatibility with Uppy 1.x client">‚Äã</a></h2>
<p>Companion 2.0 is compatible with any Uppy 1.x version, so you don't have to
worry about upgrading your Uppy client installations when you upgrade Companion
on your server.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="will-companion-v1-still-receive-updates">Will Companion v1 still receive updates?<a href="https://uppy.io/blog/2020/09/companion-2.0#will-companion-v1-still-receive-updates" class="hash-link" aria-label="Direct link to Will Companion v1 still receive updates?" title="Direct link to Will Companion v1 still receive updates?">‚Äã</a></h2>
<p>Companion 1.x will continue to receive security patches until March 1, 2021.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrating-from-companion-1x-to-2x">Migrating from Companion 1.x to 2.x<a href="https://uppy.io/blog/2020/09/companion-2.0#migrating-from-companion-1x-to-2x" class="hash-link" aria-label="Direct link to Migrating from Companion 1.x to 2.x" title="Direct link to Migrating from Companion 1.x to 2.x">‚Äã</a></h2>
<p>Given the breaking changes, we've created a
<a href="https://uppy.io/docs/companion/#Migrating-v1-to-v2" target="_blank" rel="noopener noreferrer">migration tutorial for upgrading from Companion v1 to v2</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Image Editor üåà]]></title>
            <link>https://uppy.io/blog/2020/07/1.18-image-editor</link>
            <guid>https://uppy.io/blog/2020/07/1.18-image-editor</guid>
            <pubDate>Tue, 21 Jul 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[One of the most-requested Uppy features, the]]></description>
            <content:encoded><![CDATA[<p>One of the most-requested Uppy features, the
<a href="https://uppy.io/docs/image-editor/">Image Editor</a>, has landed (as beta) in 1.18.</p>
<video alt="Demo video showing Uppy with Image Editor plugin ‚Äî cropping, rotating and resizing images" poster="https://uppy.io/img/blog/1.18-image-editor/image-editor-dashboard.jpg" muted="" autoplay="" loop="">
  <source src="/img/blog/1.18-image-editor/image-editor-demo.mp4" type="video/mp4">
  Your browser does not support the video tag: https://uppy.io/img/blog/1.18-image-editor/image-editor-demo.mp4
</video>
<p>The editor currently supports cropping, resizing, rotating, flipping and zooming
your images in and out. You can try it out on
<a href="https://uppy.io/examples/dashboard/">the Dashboard example page</a>.</p>
<p>Under the hood we are using the excellent open source (just like Uppy itself)
<a href="https://fengyuanchen.github.io/cropperjs/" target="_blank" rel="noopener noreferrer">Cropper.js</a> library.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install @uppy/image-editor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Dashboard</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/dashboard'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">ImageEditor</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/image-editor'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ImageEditor</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">quality</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// for the resulting image, 0.8 is a sensible default</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="https://uppy.io/img/blog/1.18-image-editor/image-editor-dashboard.jpg" alt="Uppy with Image Editor plugin screenshot ‚Äî cropping, rotating and resizing images" class="img_ev3q"></p>
<p>The Image Editor plugin is meant to be used with the Dashboard UI, but in theory
it can work without it, rendered somewhere else. This has not been tested, try
at your own risk ;-)</p>
<p>You can
<a href="https://uppy.io/docs/image-editor/#cropperOptions" target="_blank" rel="noopener noreferrer">override the options from Cropper.js</a>,
too. Check out
<a href="https://uppy.io/docs/image-editor" target="_blank" rel="noopener noreferrer">the docs for up to date options and events</a>.</p>
<p>Please leave your feedback
<a href="https://mobile.twitter.com/uppy_io/status/1285532376249110528" target="_blank" rel="noopener noreferrer">on Twitter</a>.</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">üñº One of the most-requested Uppy features, the Image Editor, for cropping, resizing, rotating, flipping and zooming your images is live now! <br><br>Check it out: <a href="https://t.co/dDXRoW0HGj" target="_blank" rel="noopener noreferrer">https://t.co/dDXRoW0HGj</a> <a href="https://t.co/IhYo0gwtvP" target="_blank" rel="noopener noreferrer">pic.twitter.com/IhYo0gwtvP</a></p>‚Äî Uppy (@uppy_io) <a href="https://twitter.com/uppy_io/status/1285532376249110528?ref_src=twsrc%5Etfw" target="_blank" rel="noopener noreferrer">July 21, 2020</a></blockquote> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
        <item>
            <title><![CDATA[Adding Custom Providers: Step by Step Tutorial to add Custom Providers]]></title>
            <link>https://uppy.io/blog/2020/03/custom-providers</link>
            <guid>https://uppy.io/blog/2020/03/custom-providers</guid>
            <pubDate>Mon, 08 Jun 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[In this post we will be going through a step by step tutorial on how to develop,]]></description>
            <content:encoded><![CDATA[<p>In this post we will be going through a step by step tutorial on how to develop,
and add custom <a href="https://uppy.io/docs/providers/" target="_blank" rel="noopener noreferrer">providers</a> to Uppy and
Companion. For the purpose of this tutorial we will be building a custom
provider for <a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer">Unsplash</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-are-provider-plugins">What are Provider Plugins?<a href="https://uppy.io/blog/2020/03/custom-providers#what-are-provider-plugins" class="hash-link" aria-label="Direct link to What are Provider Plugins?" title="Direct link to What are Provider Plugins?">‚Äã</a></h2>
<blockquote>
<p>Provider Plugins help you connect to your accounts with remote file storage
providers such as Dropbox, Google Drive, Instagram and remote URLs.</p>
<p>They work tightly with
<a href="https://www.npmjs.com/package/@uppy/companion" target="_blank" rel="noopener noreferrer">Companion</a> ‚Äî Uppy's
server-to-server communication handler between your server and file storage
providers.</p>
</blockquote>
<p>Read more on <a href="https://uppy.io/docs/providers/" target="_blank" rel="noopener noreferrer">Provider Plugins</a>.</p>
<p>Creating a custom provider composes of two parts; <strong>Custom Companion Provider</strong>
and <strong>Custom Uppy Plugin</strong></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-custom-companion-provider">Creating a Custom Companion Provider<a href="https://uppy.io/blog/2020/03/custom-providers#creating-a-custom-companion-provider" class="hash-link" aria-label="Direct link to Creating a Custom Companion Provider" title="Direct link to Creating a Custom Companion Provider">‚Äã</a></h2>
<p>On the Companion side, we need to create a Provider that receives the provider
related requests that would come from Uppy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-companion">Setting up Companion<a href="https://uppy.io/blog/2020/03/custom-providers#setting-up-companion" class="hash-link" aria-label="Direct link to Setting up Companion" title="Direct link to Setting up Companion">‚Äã</a></h3>
<p>We'll start off by setting up a minimal express server.</p>
<ol>
<li>Create a folder named "custom-provider" and navigate into it</li>
</ol>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir custom-provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd custom-provider</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Run <code>npm init</code> to setup your <code>package.json</code> file</li>
<li>install express, express-session, body-parser, request, uppy and
@uppy/companion</li>
</ol>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm i -S express express-session body-parser request @uppy/companion uppy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>with all that done, my package.json file looks something like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"name": "custom-provider",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"dependencies": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"body-parser": "^1.18.2",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"express": "^4.16.2",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"express-session": "^1.15.6",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"request": "^2.88.0",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"uppy": "^1.16.1",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		"@uppy/companion": "^2.0.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	},</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"private": true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"scripts": {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Create a <code>server/index.js</code> file within the project and add initiate your
express server</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> express </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'express'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> companion </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/companion'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bodyParser </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'body-parser'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> session </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'express-session'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">express</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bodyParser</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">session</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'some-secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">resave</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">saveUninitialized</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Access-Control-Allow-Origin'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">origin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'*'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token string" style="color:#e3116c">'Access-Control-Allow-Methods'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token string" style="color:#e3116c">'GET, POST, OPTIONS, PUT, PATCH, DELETE'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token string" style="color:#e3116c">'Access-Control-Allow-Headers'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token string" style="color:#e3116c">'Authorization, Origin, Content-Type, Accept'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">next</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// initialize uppy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> companionOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">providerOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">dropbox</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your Dropbox key'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your Dropbox secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">server</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'localhost:3020'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">protocol</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">filePath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./output'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'some-secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">debug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">companion</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">app</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">companionOptions</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// handle 404</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">404</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">message</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Not Found'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">companion</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">socket</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3020</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'Welcome to Companion!'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Listening on http://0.0.0.0:3020</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The code snippet above sets up an express server and plugs Companion into it.
However, the Companion setup doesn't include a custom provider yet. It only
includes the Dropbox provider.</p>
<p>To be sure everything is working correctly so far, you can start the server by
running:</p>
<p><code>node server/index.js</code></p>
<p>It should log the following message in the console:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Welcome to Companion!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Listening on http://0.0.0.0:3020</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we need to proceed to add our custom provider.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-unsplash-api">Setting up Unsplash API<a href="https://uppy.io/blog/2020/03/custom-providers#setting-up-unsplash-api" class="hash-link" aria-label="Direct link to Setting up Unsplash API" title="Direct link to Setting up Unsplash API">‚Äã</a></h3>
<p>Head to Unsplash's <a href="https://unsplash.com/oauth/applications" target="_blank" rel="noopener noreferrer">developer platform</a>
(you'd need to create an account if you don't already have one).</p>
<p>Click "New Application" to create a new application. For the sake of this
tutorial, I am naming my application "companion-provider". Once it is created,
your page should look something like this:</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/unsplash-api-dashboard-f7e25bbc843dda7e930e425d1ffcac5b.png" width="2740" height="1364" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-the-custom-provider">Writing the custom provider<a href="https://uppy.io/blog/2020/03/custom-providers#writing-the-custom-provider" class="hash-link" aria-label="Direct link to Writing the custom provider" title="Direct link to Writing the custom provider">‚Äã</a></h3>
<p>Back to our project directory, we are going to create a
<code>server/customprovider.js</code> file. This will contain the code that implements the
Unsplash provider.</p>
<p>According to
<a href="https://uppy.io/docs/companion/#Adding-custom-providers" target="_blank" rel="noopener noreferrer">the docs</a>, we need to
create a class that implements the methods <code>list</code>, <code>download</code>, and <code>size</code>.</p>
<p>The constructor of our class will look something like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCustomProvider</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">authProvider</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'myunsplash'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the name of our provider (lowercased)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Our <code>list</code> method would look something like this</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">list</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> token</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> directory </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> done</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> directory </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">directory</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/collections</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">path</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">_adaptData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">_adaptData</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">items</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">nextPagePath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">published_at</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">isFolder</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">icon</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cover_photo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">mimeType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">thumbnail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cover_photo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">requestPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">modifiedDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updated_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">size</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>the method makes an http request to the unsplash API based on the documentation
to <a href="https://unsplash.com/documentation#list-collections" target="_blank" rel="noopener noreferrer">list collections</a> and
<a href="https://unsplash.com/documentation#get-a-collections-photos" target="_blank" rel="noopener noreferrer">list collection's photos</a>.
The <code>_adaptData</code> method exists to help us conform to
<a href="https://uppy.io/docs/companion/#list-data" target="_blank" rel="noopener noreferrer">the list data</a></p>
<p>Our <code>size</code> method will look something like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">size</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> token </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> done</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Unsplash's API doesn't provide the file size, so we are estimating it by
multiplying the width and height of the image.</p>
<p>The <code>download</code> method will look like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">download</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> token </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> onData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">links</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">download</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    request</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'data'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">chunk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chunk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'end'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With all of this put together the entire file would look something like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> request </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'request'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">BASE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://api.unsplash.com'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCustomProvider</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">options</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">authProvider</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'myunsplash'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">list</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> token</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> directory </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> done</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> directory </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">directory</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">''</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/collections</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">path</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">_adaptData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">download</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> token </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> onData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">links</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">download</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			request</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'data'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">chunk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> chunk</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'end'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'error'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> id</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> token </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> done</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation constant" style="color:#36acaa">BASE_URL</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">/photos/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'GET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">json</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">Authorization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token function" style="color:#d73a49">request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> resp</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token function" style="color:#d73a49">done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">width</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">height</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">_adaptData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">items</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">nextPagePath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> items </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">published_at</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">items</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				isFolder</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">icon</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cover_photo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">mimeType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'image/jpeg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">thumbnail</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> isFolder </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">cover_photo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">urls</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">thumb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">requestPath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">modifiedDate</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">updated_at</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">size</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">MyCustomProvider</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we can go back to <code>server/index.js</code> to enable our custom provider:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// initialize uppy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppyOptions </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">providerOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">dropbox</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your Dropbox key'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'your Dropbox secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">customProviders</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">myunsplash</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token comment" style="color:#999988;font-style:italic">// source https://unsplash.com/documentation#user-authentication</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">authorize_url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://unsplash.com/oauth/authorize'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">access_url</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://unsplash.com/oauth/token'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">oauth</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">key</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'YOUR UNSPLASH API KEY'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'YOUR UNSPLASH API SECRET'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// you provider module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">module</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'./customprovider'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">server</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'localhost:3020'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">protocol</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">filePath</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'./output'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'some-secret'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">debug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can find your unsplash API key on your Unsplash
<a href="https://unsplash.com/oauth/applications" target="_blank" rel="noopener noreferrer">app dashboard</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-custom-uppy-plugin">Creating a Custom Uppy Plugin<a href="https://uppy.io/blog/2020/03/custom-providers#creating-a-custom-uppy-plugin" class="hash-link" aria-label="Direct link to Creating a Custom Uppy Plugin" title="Direct link to Creating a Custom Uppy Plugin">‚Äã</a></h2>
<p>Now we need to implement the client part of this. To do this we need to
implement an Uppy Plugin.</p>
<p>First, we'll create a <code>client/MyCustomProvider.js</code> file. Following the
instructions <a href="https://uppy.io/docs/writing-plugins/" target="_blank" rel="noopener noreferrer">here</a>, our Uppy Plugin (aka
<code>client/MyCustomProvider.js</code> file) could look something like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">UIPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">Provider</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/companion-client'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">ProviderViews</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/provider-views'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> h </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'preact'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCustomProvider</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">UIPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">uppy</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'acquirer'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MyCustomProvider'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token maybe-class-name">Provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">initPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MyUnsplash'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">icon</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">svg width</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"32"</span><span class="token plain"> height</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"32"</span><span class="token plain"> xmlns</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"http://www.w3.org/2000/svg"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					d</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					fill</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"#000000"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					fill</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">rule</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"nonzero"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">svg</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">provider</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Provider</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">companionUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">companionHeaders</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">companionHeaders</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">provider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'myunsplash'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">pluginId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">files</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">onFirstRender</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">onFirstRender</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">render</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">bind</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">// merge default options with the ones set by user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">opts</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">opts </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">install</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">view</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ProviderViews</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">provider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">provider</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">opts</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">mount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">uninstall</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">view</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">tearDown</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">unmount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">onFirstRender</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">view</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getFolder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">view</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Asides from implementing the methods required by the Uppy Plugin, we are also
implmeneting the method <code>onFirstRender</code>. This is because we are using the
<a href="https://www.npmjs.com/package/@uppy/provider-views" target="_blank" rel="noopener noreferrer">@uppy/provider-views</a>
package to reuse its UI componenets. The
<a href="https://www.npmjs.com/package/@uppy/provider-views" target="_blank" rel="noopener noreferrer">@uppy/provider-views</a>
package requires that our plugin implements an <code>onFirstRender</code> method.</p>
<p>We are also pre-setting a default plugin with a default object structure which
is used by the <code>@uppy/provider-views</code> package.</p>
<p>With that done, we can now use our new plugin with Uppy. Create a file
<code>client/main.js</code> and initiate Uppy in there like so:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/core'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Dropbox</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/dropbox'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Tus</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/tus'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Dashboard</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'@uppy/dashboard'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">MyCustomProvider</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'./MyCustomProvider'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">debug</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dropbox</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://localhost:3020'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">MyCustomProvider</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'http://localhost:3020'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">inline</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'body'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'Dropbox'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'MyCustomProvider'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://master.tus.io/files/'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we need to bundle the file so it can be loaded on the browser. To do this,
we'd install <a href="https://www.npmjs.com/package/budo" target="_blank" rel="noopener noreferrer">budo</a>:</p>
<ol>
<li>In the root project directory, run <code>npm install budo -g</code>.</li>
<li>Create a <code>babel.config.js</code> file looking like so:</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method-variable function-variable method function property-access" style="color:#d73a49">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">api</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'test'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">presets</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token string" style="color:#e3116c">'@babel/preset-env'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token literal-property property" style="color:#36acaa">modules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token literal-property property" style="color:#36acaa">loose</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'@babel/plugin-transform-react-jsx'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">pragma</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'h'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token known-class-name class-name">Boolean</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="3">
<li>Add an <code>index.html</code> file (in the root of the project) that uses a bundle file
like so:</li>
</ol>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:#999988;font-style:italic">DOCTYPE</span><span class="token doctype" style="color:#999988;font-style:italic"> </span><span class="token doctype name" style="color:#999988;font-style:italic">html</span><span class="token doctype punctuation" style="color:#393A34;font-style:italic">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">utf-8</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">viewport</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">width=device-width, initial-scale=1</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">Uppy Custom provider Example</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">title</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">			</span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">https://releases.transloadit.com/uppy/v1.15.0/uppy.min.css</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">			</span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">stylesheet</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">		</span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">bundle.js</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">body</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">html</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Create the bundle file by running
<code>budo client/main.js:bundle.js -- -t babelify</code>. This will bundle your
<code>client</code> side work and have it running on a local server. Please check the
console log to see on what port the server is running. As at the time of this
writing, it defaults to <code>9966</code> (URL will be <a href="http://localhost:9966/" target="_blank" rel="noopener noreferrer">http://localhost:9966/</a>).</li>
</ol>
<p>You can now load the URL of your client on your browser to see it running. When
I run mine, it looks something like this:</p>
<p><img loading="lazy" src="https://uppy.io/assets/images/dashboard-preview-e73c4320ea02d4ef307f55d5f852aaca.png" width="1518" height="1130" class="img_ev3q"></p>
<p>In order to use this with our Companion implementation, we need to also start
our Companion server by running <code>node server/index.js</code>.</p>
<p>Congrats! üéâWe have completed our custom plugin at this point. For an example
source code on this tutorial, please see the
<a href="https://github.com/transloadit/uppy/tree/master/examples/custom-provider" target="_blank" rel="noopener noreferrer">custom provider example</a>.</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Uppy 1.11 ‚Äî 1.13: Dark Mode, custom meta fields and Google Docs in Companion]]></title>
            <link>https://uppy.io/blog/2020/04/1.13</link>
            <guid>https://uppy.io/blog/2020/04/1.13</guid>
            <pubDate>Mon, 20 Apr 2020 00:00:00 GMT</pubDate>
            <description><![CDATA[Releases 1.11 through 1.13 introduced a bunch of major new features and]]></description>
            <content:encoded><![CDATA[<p>Releases 1.11 through 1.13 introduced a bunch of major new features and
bugfixes. Let's go through the main ones!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dark-mode">Dark mode<a href="https://uppy.io/blog/2020/04/1.13#dark-mode" class="hash-link" aria-label="Direct link to Dark mode" title="Direct link to Dark mode">‚Äã</a></h2>
<p>A little while ago we‚Äôve
<a href="https://mobile.twitter.com/uppy_io/status/1221070643543838721" target="_blank" rel="noopener noreferrer">announced work in progress</a>
on Dark Mode for the Dashboard. We're happy to tell you it‚Äôs live now! You can
try it out on <a href="https://uppy.io/examples/dashboard/">the Dashboard example page</a>.</p>
<video alt="Demo video showing Uppy Dark Mode" muted="" autoplay="" loop="">
  <source src="/img/blog/1.13/dark-mode-auto.webm" type="video/webm">
  <source src="/img/blog/1.13/dark-mode-auto.mp4" type="video/mp4">
</video>
<p>There are three options available:</p>
<ul>
<li><code>light</code> ‚Äî the default</li>
<li><code>dark</code></li>
<li><code>auto</code> ‚Äî will respect the user‚Äôs system settings and switch automatically</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">theme</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'dark'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" src="https://uppy.io/assets/images/uppy-dashboard-dark-mar-2020-8404676e497ecef5f6832518f40f8fa6.png" width="1200" height="940" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-meta-fields">Custom meta fields<a href="https://uppy.io/blog/2020/04/1.13#custom-meta-fields" class="hash-link" aria-label="Direct link to Custom meta fields" title="Direct link to Custom meta fields">‚Äã</a></h2>
<p>This is big one! Thanks to @galli-leo, you can now add custom fields to the
Dashboard meta editor, such as <code>&lt;input type="tel"&gt;</code>, <code>&lt;select&gt;</code> or
<code>&lt;input type="checkbox"&gt;</code>, like this:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">trigger</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'#pick-files'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">metaFields</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'caption'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Caption'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">placeholder</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'describe what the image is about'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'public'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'Public'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token function-variable function" style="color:#d73a49">render</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">{</span><span class="token parameter"> value</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> onChange </span><span class="token parameter punctuation" style="color:#393A34">}</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> h</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">h</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'input'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'checkbox'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token function-variable function" style="color:#d73a49">onChange</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">ev</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">onChange</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ev</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">checked</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'on'</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'off'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					</span><span class="token literal-property property" style="color:#36acaa">defaultChecked</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'on'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>See <a href="https://uppy.io/docs/dashboard/#metaFields">the docs</a> and
<a href="https://github.com/transloadit/uppy/pull/2147" target="_blank" rel="noopener noreferrer">PR #2147</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="google-docs-support-in-companion">Google Docs support in Companion<a href="https://uppy.io/blog/2020/04/1.13#google-docs-support-in-companion" class="hash-link" aria-label="Direct link to Google Docs support in Companion" title="Direct link to Google Docs support in Companion">‚Äã</a></h2>
<p>In the past, Uppy could already import files from Google Drive using Companion.
However, files from Google Docs are not <em>really</em> files, and could not be
imported. That was confusing for users: some of their files simply didn't
appear!</p>
<p>Companion now automagically converts GSuite documents, such as docs,
spreadsheets and presentations, to <code>.docx</code>, <code>.xlsx</code> and <code>.ppt</code> files that can be
opened in various applications. The current list of conversions is hardcoded to:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"application/vnd.google-apps.document": ".docx",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"application/vnd.google-apps.drawing": ".png",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"application/vnd.google-apps.script": ".json",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"application/vnd.google-apps.spreadsheet": ".xlsx",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	"application/vnd.google-apps.presentation": ".ppt"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This may be configurable in a future release.</p>
<p>Note that only documents under 10MB are converted. This is a limitation set by
the Google Drive API.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="aws-s3">AWS S3<a href="https://uppy.io/blog/2020/04/1.13#aws-s3" class="hash-link" aria-label="Direct link to AWS S3" title="Direct link to AWS S3">‚Äã</a></h2>
<p>The Aws S3 plugin now handles uploads internally, instead of deferring to XHR
Upload. This change fixes many bugs with Aws S3. See
<a href="https://github.com/transloadit/uppy/pull/2147" target="_blank" rel="noopener noreferrer">PR #2060</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="locales">Locales<a href="https://uppy.io/blog/2020/04/1.13#locales" class="hash-link" aria-label="Direct link to Locales" title="Direct link to Locales">‚Äã</a></h2>
<p>Polish, Croatian and Romanian language packs have been added by @alfatv, @dkisic
and @akizor üéâ</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exifr-in-thumbnail-generator">Exifr in Thumbnail Generator<a href="https://uppy.io/blog/2020/04/1.13#exifr-in-thumbnail-generator" class="hash-link" aria-label="Direct link to Exifr in Thumbnail Generator" title="Direct link to Exifr in Thumbnail Generator">‚Äã</a></h2>
<p><a href="https://github.com/MikeKovarik" target="_blank" rel="noopener noreferrer">@MikeKovarik</a> created an awesome library called
<a href="https://github.com/MikeKovarik/exifr" target="_blank" rel="noopener noreferrer">Exifr</a>, useful for extracting EXIF image
data. He was kind enough to submit a PR that replaces Uppy‚Äôs internal fork of
<code>exif-js</code> with <code>exifr</code>. Our thumbnail generation is now faster and more robust!
See <a href="https://github.com/transloadit/uppy/pull/2140" target="_blank" rel="noopener noreferrer">PR 2140</a> for details.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="misc">Misc<a href="https://uppy.io/blog/2020/04/1.13#misc" class="hash-link" aria-label="Direct link to Misc" title="Direct link to Misc">‚Äã</a></h2>
<ul>
<li>@uppy/tus, @uppy/xhr-upload: emit error when companion returns error during
upload creation (#2166 / @ifedapoolarewaju)</li>
<li>@uppy/transloadit: fix progress with very different Assembly runtimes (#2143 /
@agreene-coursera)</li>
<li>@uppy/core: Only <code>_startIfAutoProceed</code> if some files were actually added
(#2146 / @arturi)</li>
<li>@uppy/companion: emit error to client if download fails (#2139 /
@ifedapoolarewaju)</li>
<li>@uppy/companion: validate all client provided upload data. (#2160 /
@ifedapoolarewaju)</li>
<li>@uppy/dashboard: Log warning instead of an error when trigger is not found
(#2144 / @arturi)</li>
<li>@uppy/robodog: Pass <code>hideUploadButton</code> to Dashboard in Robodog too (#2169 /
@arturi)</li>
<li>@uppy/aws-s3-multipart: emit <code>upload-error</code> when companion returns error
during upload instantiation (#2168 / @ifedapoolarewaju)</li>
</ul>
<p>As always, you can find the full list of changes and package versions, as well
as future plans, in our
<a href="https://github.com/transloadit/uppy/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">changelog</a>.</p>]]></content:encoded>
            <author>artur@transloadit.com (Artur Paikin)</author>
        </item>
    </channel>
</rss>