<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/migration-guides" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Migration guides | Uppy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://uppy.io/img/og_image.jpg"><meta data-rh="true" name="twitter:image" content="https://uppy.io/img/og_image.jpg"><meta data-rh="true" property="og:url" content="https://uppy.io/docs/guides/migration-guides/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:domain" content="uppy.io"><meta data-rh="true" name="twitter:title" content="Uppy"><meta data-rh="true" name="twitter:description" content="Sleek, modular open source JavaScript file uploader"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Migration guides | Uppy"><meta data-rh="true" name="description" content="These cover all the major Uppy versions and how to migrate to them."><meta data-rh="true" property="og:description" content="These cover all the major Uppy versions and how to migrate to them."><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://uppy.io/docs/guides/migration-guides/"><link data-rh="true" rel="alternate" href="https://uppy.io/docs/guides/migration-guides/" hreflang="en"><link data-rh="true" rel="alternate" href="https://uppy.io/docs/guides/migration-guides/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://Q65IKQHNN5-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Uppy RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Uppy Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Uppy" href="/opensearch.xml">

<meta name="google-site-verification" content="JxARoHXoCI8bD07pLV_u3z6xpuWNcSIZIcHEytyCkUc">
<script src="https://plausible.io/js/script.js" async defer="defer" data-domain="uppy.io"></script>
<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.13a575f4.css">
<script src="/assets/js/runtime~main.6841a8b6.js" defer="defer"></script>
<script src="/assets/js/main.2e2f1b34.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><p class="header_wuUL"><a href="/blog/uppy-4.0/">Uppy 4.0 is here: TypeScript rewrite, Google Photos, React hooks, and much more.</a></p><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Uppy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Uppy</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/quick-start/">Docs</a><a class="navbar__item navbar__link" href="/examples/">Examples</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://github.com/transloadit/uppy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://community.transloadit.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://transloadit.com/open-source/support/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quick-start/">Quick start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/guides/choosing-uploader/">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/choosing-uploader/">Choosing the uploader you need</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/building-plugins/">Building plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/building-your-own-ui-with-uppy/">Building your own UI with Uppy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/browser-support/">Supporting IE11</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/custom-stores/">Custom stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/migration-guides/">Migration guides</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/uppy/">Uppy core</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/companion/">Companion</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/dashboard/">User interfaces</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/webcam/">Sources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/transloadit/">Uploaders</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/angular/">Framework integrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/remote-sources/">Presets</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/locales/">Internationalisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/golden-retriever/">Golden Retriever</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/compressor/">Compressor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Uppy documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/form/">Form</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Migration guides</h1>
<p>These cover all the major Uppy versions and how to migrate to them.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-companion-4x-to-5x">Migrate from Companion 4.x to 5.x<a class="hash-link" aria-label="Direct link to Migrate from Companion 4.x to 5.x" title="Direct link to Migrate from Companion 4.x to 5.x" href="/docs/guides/migration-guides/#migrate-from-companion-4x-to-5x">​</a></h2>
<ul>
<li>End-of-Life versions of Node.js are no longer supported (use latest 18.x LTS,
20.x LTS, or 22.x current).</li>
<li>Setting the <code>corsOrigin</code> (<code>COMPANION_CLIENT_ORIGINS</code>) option is now required.
You should define the list of origins you expect your app to be served from,
otherwise it can be impersonated from a different origin you don’t control.
Set it to <code>true</code> if you don’t care about impersonating. If you’re using
Companion as an express middleware, do <strong>not</strong> use the <code>cors</code> module in your
project, because Companion already includes it. Use the <code>corsOrigins</code>
Companion option to customise CORS behavior.</li>
<li><code>COMPANION_REDIS_EXPRESS_SESSION_PREFIX</code> now defaults to <code>companion-session:</code>
(before <code>sess:</code>). To revert keep backwards compatibility, set the environment
variable <code>COMPANION_REDIS_EXPRESS_SESSION_PREFIX=sess:</code>.</li>
<li>The URL endpoint (used by the <code>Url</code>/<code>Link</code> plugin) is now turned off by
default and must be explicitly enabled with
<code>COMPANION_ENABLE_URL_ENDPOINT=true</code> or <code>enableUrlEndpoint: true</code>.</li>
<li>The option <code>streamingUpload</code> / <code>COMPANION_STREAMING_UPLOAD</code> now defaults to
<code>true</code>.</li>
<li>The option <code>getKey(req, filename, metadata)</code> has changed signature to
<code>getKey({ filename, metadata, req })</code>.</li>
<li>The option <code>bucket(req, metadata)</code> has changed signature to
<code>bucketOrFn({ req, metadata, filename })</code>.</li>
<li>Custom provider breaking changes. If you have not implemented a custom
provider, you should not be affected.
<ul>
<li>The static <code>getExtraConfig</code> property has been renamed to
<code>getExtraGrantConfig</code>.</li>
<li>The static <code>authProvider</code> property has been renamed to <code>oauthProvider</code>.</li>
</ul>
</li>
<li>Endpoint <code>GET /s3/params</code> now returns <code>{ method: &quot;POST&quot; }</code> instead of
<code>{ method: &quot;post&quot; }</code>. This will not affect most people.</li>
<li><code>access-control-allow-headers</code> is no longer included in
<code>Access-Control-Expose-Headers</code>, and <code>uppy-versions</code> is no longer an allowed
header. We are not aware of any issues this might cause.</li>
<li>Internal refactoring (probably won’t affect you)
<ul>
<li><code>getProtectedGot</code> parameter <code>blockLocalIPs</code> changed to <code>allowLocalIPs</code>
(inverted boolean).</li>
<li><code>getURLMeta</code> 2nd (boolean) argument inverted.</li>
<li><code>getProtectedHttpAgent</code> parameter <code>blockLocalIPs</code> changed to <code>allowLocalIPs</code>
(inverted boolean).</li>
<li><code>downloadURL</code> 2nd (boolean) argument inverted.</li>
<li><code>StreamHttpJsonError</code> renamed to <code>HttpError</code>.</li>
</ul>
</li>
<li>Removed the <code>oauthOrigin</code> option, as well as the (undocumented) option
<code>clients</code>. Use <code>corsOrigin</code> instead.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppycompanion-client"><code>@uppy/companion-client</code><a class="hash-link" aria-label="Direct link to uppycompanion-client" title="Direct link to uppycompanion-client" href="/docs/guides/migration-guides/#uppycompanion-client">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Unless you built a custom provider, you don’t use <code>@uppy/companion-client</code>
directly but through provider plugins such as <code>@uppy/google-drive</code>. In which
case you don’t have to do anything.</p></div></div>
<ul>
<li><code>supportsRefreshToken</code> now defaults to <code>false</code> instead of <code>true</code>. If you have
implemented a custom provider, this might affect you.</li>
<li><code>Socket</code> class is no longer in use and has been removed. Unless you used this
class you don’t need to do anything.</li>
<li>Remove deprecated options <code>serverUrl</code> and <code>serverPattern</code> (they were merely
defined in Typescript, not in use).</li>
<li><code>RequestClient</code> methods <code>get</code>, <code>post</code>, <code>delete</code> no longer accepts a boolean as
the third argument. Instead, pass <code>{ skipPostResponse: true | false }</code>. This
won’t affect you unless you’ve been using <code>RequestClient</code>.</li>
<li>When pausing uploads, the WebSocket towards companion will no longer be
closed. This allows paused uploads to be cancelled, but once a file has been
paused it will still occupy its place in the concurrency queue.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-uppy-3x-to-4x">Migrate from Uppy 3.x to 4.x<a class="hash-link" aria-label="Direct link to Migrate from Uppy 3.x to 4.x" title="Direct link to Migrate from Uppy 3.x to 4.x" href="/docs/guides/migration-guides/#migrate-from-uppy-3x-to-4x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typescript-rewrite">TypeScript rewrite<a class="hash-link" aria-label="Direct link to TypeScript rewrite" title="Direct link to TypeScript rewrite" href="/docs/guides/migration-guides/#typescript-rewrite">​</a></h3>
<p>Almost all plugins have been completely rewritten in TypeScript! This means you
may run into type error all over the place, but the types now accurately show
Uppy’s state and files.</p>
<p>There are too many small changes to cover, so you have to upgrade and see where
TypeScript complains.</p>
<p>One important thing to note are the new generics on <code>@uppy/core</code>.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// xhr-upload is for uploading to your own backend.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> XHRUpload </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/xhr-upload&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Your own metadata on files</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// The response from your server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Body</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> someThingMyBackendReturns</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token class-name operator" style="color:#393A34">&lt;</span><span class="token class-name">Meta</span><span class="token class-name punctuation" style="color:#393A34">,</span><span class="token class-name"> Body</span><span class="token class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">XHRUpload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	endpoint</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/upload&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> id </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;example.jpg&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Blob</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	meta</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;foo&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This is now typed</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">upload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// This is strictly typed too</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> someThingMyBackendReturns </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">body</span><span class="token operator" style="color:#393A34">!</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyaws-s3-and-uppyaws-s3-multipart"><code>@uppy/aws-s3</code> and <code>@uppy/aws-s3-multipart</code><a class="hash-link" aria-label="Direct link to uppyaws-s3-and-uppyaws-s3-multipart" title="Direct link to uppyaws-s3-and-uppyaws-s3-multipart" href="/docs/guides/migration-guides/#uppyaws-s3-and-uppyaws-s3-multipart">​</a></h3>
<ul>
<li>
<p><code>@uppy/aws-s3</code> and <code>@uppy/aws-s3-multipart</code> have been combined into a single
plugin. You should now only use <code>@uppy/aws-s3</code> with the new option,
<a href="/docs/aws-s3-multipart/#shouldusemultipartfile"><code>shouldUseMultipart()</code></a>, to
allow you to switch between regular and multipart uploads. You can read more
about this in the
<a href="https://uppy.io/docs/aws-s3-multipart/#when-should-i-use-it" target="_blank" rel="noopener noreferrer">plugin docs</a>.</p>
</li>
<li>
<p>Remove deprecated <code>prepareUploadParts</code> option.</p>
</li>
<li>
<p>Companion’s options (<code>companionUrl</code>, <code>companionHeaders</code>, and
<code>companionCookieRules</code>) are renamed to more generic names (<code>endpoint</code>,
<code>headers</code>, and <code>cookieRules</code>).</p>
<p>Using Companion with the <code>@uppy/aws-s3</code> plugin only makes sense if you already
need Companion for remote providers (such as Google Drive). When using your
own backend, you can let Uppy do all the heavy lifting on the client which it
would normally do for Companion, so you don’t have to implement that yourself.</p>
<p>As long as you return the JSON for the expected endpoints (see our
<a href="https://github.com/transloadit/uppy/blob/main/examples/aws-nodejs/index.js" target="_blank" rel="noopener noreferrer">server example</a>),
you only need to set <code>endpoint</code>.</p>
<p>If you are using Companion, rename the options. If you have a lot of
client-side complexity (<code>createMultipartUpload</code>, <code>signPart</code>, etc), consider
letting Uppy do this for you.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppycore"><code>@uppy/core</code><a class="hash-link" aria-label="Direct link to uppycore" title="Direct link to uppycore" href="/docs/guides/migration-guides/#uppycore">​</a></h3>
<ul>
<li>The <code>close()</code> method has been renamed to <code>destroy()</code> to more accurately
reflect you can not recover from it without creating a new <code>Uppy</code> instance.</li>
<li>The <code>clearUploadedFiles()</code> method has been renamed to <code>clear()</code> as a
convenience method to clear all the state. This can be useful when a user
navigates away and you want to clear the state on success.</li>
<li><code>bytesUploaded</code>, in <code>file.progress.bytesUploaded</code>, is now always a <code>boolean</code>,
instead of a <code>boolean</code> or <code>number</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyxhr-upload"><code>@uppy/xhr-upload</code><a class="hash-link" aria-label="Direct link to uppyxhr-upload" title="Direct link to uppyxhr-upload" href="/docs/guides/migration-guides/#uppyxhr-upload">​</a></h3>
<p>Before the plugin had the options <code>getResponseData</code>, <code>getResponseError</code>,
<code>validateStatus</code> and <code>responseUrlFieldName</code>. These were inflexible and too
specific. Now we have hooks similar to <code>@uppy/tus</code>:</p>
<ul>
<li><code>onBeforeRequest</code> to manipulate the request before it is sent.</li>
<li><code>shouldRetry</code> to determine if a request should be retried. By default 3
retries with exponential backoff. After three attempts it will throw an error,
regardless of whether you returned <code>true</code>.</li>
<li><code>onAfterResponse</code> called after a successful response but before Uppy resolves
the upload.</li>
</ul>
<p>Checkout the <a href="/docs/xhr-upload/">docs</a> for more info.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppytransloadit"><code>@uppy/transloadit</code><a class="hash-link" aria-label="Direct link to uppytransloadit" title="Direct link to uppytransloadit" href="/docs/guides/migration-guides/#uppytransloadit">​</a></h3>
<p>The options <code>signature</code>, <code>params</code>, <code>fields</code>, and <code>getAssemblyOptions</code> have been
removed in favor of <a href="/docs/transloadit/#assemblyoptions"><code>assemblyOptions</code></a>,
which can be an object or an (async) function returning an object.</p>
<p>When using <code>assemblyOptions()</code> as a function, it is now called only once for all
files, instead of per file. Before <code>@uppy/transloadit</code> was trying to be too
smart, creating multiple assemblies in which each assembly has files with
identical <code>fields</code>. This was done so you can use <code>fields</code> dynamically in your
template per file, instead of per assembly.</p>
<p>Now we sent all metadata of a file inside the tus upload (which
<code>@uppy/transloadit</code> uses under the hood) and make it accessible in your
Transloadit template as <code>file_user_meta</code>. You should use <code>fields</code> for global
values in your template and <code>file_user_meta</code> for per file values.</p>
<p>Another benefit of running <code>assemblyOptions()</code> only once, is that when
generating a
<a href="https://transloadit.com/docs/topics/signature-authentication/" target="_blank" rel="noopener noreferrer">secret</a> on your
server (which you should), a network request is made only once for all files,
instead of per file.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cdn">CDN<a class="hash-link" aria-label="Direct link to CDN" title="Direct link to CDN" href="/docs/guides/migration-guides/#cdn">​</a></h3>
<ul>
<li>We no longer build and serve the legacy build, made for IE11, on our CDN.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="miscellaneous">Miscellaneous<a class="hash-link" aria-label="Direct link to Miscellaneous" title="Direct link to Miscellaneous" href="/docs/guides/migration-guides/#miscellaneous">​</a></h3>
<ul>
<li>All uploaders plugins now consistently use
<a href="/docs/xhr-upload/#allowedmetafields"><code>allowedMetaFields</code></a>. Before there were
inconsistencies between plugins.</li>
<li>All plugin <code>titles</code> (what you see in the Dashboard when you open a plugin) are
now set from the <code>locale</code> option. See the
<a href="/docs/locales/#overriding-locale-strings-for-a-specific-plugin">docs</a> on how
to overide a string.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyangular"><code>@uppy/angular</code><a class="hash-link" aria-label="Direct link to uppyangular" title="Direct link to uppyangular" href="/docs/guides/migration-guides/#uppyangular">​</a></h3>
<ul>
<li>Upgrade to Angular 18.x (17.x is still supported too) and to TS 5.4</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyreact"><code>@uppy/react</code><a class="hash-link" aria-label="Direct link to uppyreact" title="Direct link to uppyreact" href="/docs/guides/migration-guides/#uppyreact">​</a></h3>
<ul>
<li>Remove deprecated <code>useUppy</code></li>
<li>You can no longer set <code>inline</code> on the <code>Dashboard</code> component, use <code>Dashboard</code>
or <code>DashboardModal</code> components respectively.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppysvelte"><code>@uppy/svelte</code><a class="hash-link" aria-label="Direct link to uppysvelte" title="Direct link to uppysvelte" href="/docs/guides/migration-guides/#uppysvelte">​</a></h3>
<ul>
<li>Make Svelte 5 the peer dependency</li>
<li>Remove UMD output</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyvue"><code>@uppy/vue</code><a class="hash-link" aria-label="Direct link to uppyvue" title="Direct link to uppyvue" href="/docs/guides/migration-guides/#uppyvue">​</a></h3>
<ul>
<li>Migrate to Composition API with TypeScript &amp; drop Vue 2 support</li>
<li>Drop Vue 2 support</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-robodog-to-uppy-plugins">Migrate from Robodog to Uppy plugins<a class="hash-link" aria-label="Direct link to Migrate from Robodog to Uppy plugins" title="Direct link to Migrate from Robodog to Uppy plugins" href="/docs/guides/migration-guides/#migrate-from-robodog-to-uppy-plugins">​</a></h2>
<p>Uppy is flexible and extensible through plugins. But the integration code could
sometimes be daunting. This is what brought Robodog to life. An alternative with
the same features, but with a more ergonomic and minimal API.</p>
<p>But, it didn’t come with its own set of new problems:</p>
<ul>
<li>It tries to do the exact same, but it looks like a different product.</li>
<li>It’s confusing for users whether they want to use Robodog or Uppy directly.</li>
<li>Robodog is more ergonomic because it’s limited. When you hit such a limit, you
need to refactor everything to Uppy with plugins.</li>
</ul>
<p>This has now led us to deprecating Robodog and embrace Uppy for its strong
suits; modularity and flexibility. At the same time, we also introduced
something to take away some repetitive integration code:
<a href="/docs/remote-sources/"><code>@uppy/remote-sources</code></a>.</p>
<p>To mimic the Robodog implementation with all its features, you can use the code
snippet below. But chances are Robodog did more than you need so feel free to
remove things or go through the <a href="/docs/companion/">list of plugins</a> and install
and use the ones you need.</p>
<p>You can also checkout how we migrated the Robodog example ourselves in this
<a href="https://github.com/transloadit/uppy/commit/089aaed615c77bafaf905e291b6b4e82aaeb2f6f" target="_blank" rel="noopener noreferrer">commit</a>.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Dashboard</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/dashboard&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">RemoteSources</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/remote-sources&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Webcam</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/webcam&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ScreenCapture</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/screen-capture&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">GoldenRetriever</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/golden-retriever&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ImageEditor</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/image-editor&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Audio</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/audio&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/transloadit&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core/dist/style.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/dashboard/dist/style.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/audio/dist/style.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/screen-capture/dist/style.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/image-editor/dist/style.css&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dashboard</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">inline</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#app&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">showProgressDetails</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">proudlyDisplayPoweredByUppy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">RemoteSources</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Webcam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">showVideoSourceDropdown</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">showRecordingLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Audio</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">showRecordingLength</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ScreenCapture</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">ImageEditor</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Transloadit</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">service</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;https://api2.transloadit.com&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getAssemblyOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// This is where you configure your auth key, auth secret, and template ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// /uppy/docs/transloadit/#getAssemblyOptions-file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// It is important to set the secret in production:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token comment" style="color:#999988;font-style:italic">// https://transloadit.com/docs/topics/signature-authentication/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/some-endpoint&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-uppy-2x-to-3x">Migrate from Uppy 2.x to 3.x<a class="hash-link" aria-label="Direct link to Migrate from Uppy 2.x to 3.x" title="Direct link to Migrate from Uppy 2.x to 3.x" href="/docs/guides/migration-guides/#migrate-from-uppy-2x-to-3x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppy-is-pure-esm">Uppy is pure ESM<a class="hash-link" aria-label="Direct link to Uppy is pure ESM" title="Direct link to Uppy is pure ESM" href="/docs/guides/migration-guides/#uppy-is-pure-esm">​</a></h3>
<p>Following the footsteps of many packages, we now only ship Uppy core and its
plugins as
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener noreferrer">ECMAScript Modules</a>
(ESM). On Uppy 2.x, we were shipping CommonJS.</p>
<p>If are already using ESM yourself, or are using the CDN builds, nothing changes
for you!</p>
<p>If you are using CommonJS, you might need to add some tooling for everything to
work, or you might want to refactor your codebase to ESM – refer to the
<a href="https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c" target="_blank" rel="noopener noreferrer">Pure ESM package</a>
gist for added information and help on how to do that.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="robodog-is-deprecated">Robodog is deprecated<a class="hash-link" aria-label="Direct link to Robodog is deprecated" title="Direct link to Robodog is deprecated" href="/docs/guides/migration-guides/#robodog-is-deprecated">​</a></h3>
<p>See the <a href="/docs/guides/migration-guides/#Migrate-from-Robodog-to-Uppy-plugins">Robodog migration guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppycore-1"><code>@uppy/core</code><a class="hash-link" aria-label="Direct link to uppycore-1" title="Direct link to uppycore-1" href="/docs/guides/migration-guides/#uppycore-1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-aggregateerror-polyfill">Remove <code>AggregateError</code> polyfill.<a class="hash-link" aria-label="Direct link to remove-aggregateerror-polyfill" title="Direct link to remove-aggregateerror-polyfill" href="/docs/guides/migration-guides/#remove-aggregateerror-polyfill">​</a></h4>
<p>It’s supported by most modern browsers and
<a href="https://github.com/transloadit/uppy/pull/3532#discussion_r818602636" target="_blank" rel="noopener noreferrer">can be polyfilled by the user</a>
if needed.</p>
<p>To migrate: install a <code>AggregateError</code> polyfill or use <code>core-js</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-reset-method">Remove <code>reset()</code> method.<a class="hash-link" aria-label="Direct link to remove-reset-method" title="Direct link to remove-reset-method" href="/docs/guides/migration-guides/#remove-reset-method">​</a></h4>
<p>It’s a duplicate of <code>cancelAll</code>, but with a less intention revealing name.</p>
<p>To migrate: use <code>cancelAll</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-backwards-compatible-exports-static-properties-on-uppy">Remove backwards compatible exports (static properties on <code>Uppy</code>)`<a class="hash-link" aria-label="Direct link to remove-backwards-compatible-exports-static-properties-on-uppy" title="Direct link to remove-backwards-compatible-exports-static-properties-on-uppy" href="/docs/guides/migration-guides/#remove-backwards-compatible-exports-static-properties-on-uppy">​</a></h4>
<p><code>Uppy</code>, <code>UIPlugin</code>, <code>BasePlugin</code>, and <code>debugLogger</code> used to also be accessible
on the <code>Uppy</code> export. This has now been removed due to the transition to ESM.</p>
<p>To migrate: import the <code>Uppy</code> class by default and/or use named exports for
everything else.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uppyvalidaterestrictions-now-returns-a-restrictionerror"><code>uppy.validateRestrictions()</code> now returns a <code>RestrictionError</code><a class="hash-link" aria-label="Direct link to uppyvalidaterestrictions-now-returns-a-restrictionerror" title="Direct link to uppyvalidaterestrictions-now-returns-a-restrictionerror" href="/docs/guides/migration-guides/#uppyvalidaterestrictions-now-returns-a-restrictionerror">​</a></h4>
<p>This method used to return <code>{ result: false, reason: err.message }</code>, but that
felt strange as it tries to mimic an error. Instead it now return a
<code>RestrictionError</code>, which is extended <code>Error</code> class.</p>
<p>To migrate: check the return value, if it’s defined you have an error, otherwise
all went well. Note that the error is <code>return</code>’ed, it’s not <code>throw</code>’n, so you
don’t have to <code>catch</code> it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppytransloadit-1"><code>@uppy/transloadit</code><a class="hash-link" aria-label="Direct link to uppytransloadit-1" title="Direct link to uppytransloadit-1" href="/docs/guides/migration-guides/#uppytransloadit-1">​</a></h3>
<p>Remove export of <code>ALLOWED_COMPANION_PATTERN</code>, <code>COMPANION</code>, and
<code>COMPANION_PATTERN</code> in favor of <code>COMPANION_URL</code> and <code>COMPANION_ALLOWED_HOSTS</code>.
This is to have more intention revealing names, <code>COMPANION</code> sounds like the
Companion instance, <code>COMPANION_URL</code> makes it more clear that it’s a URL.</p>
<p>These are properties can now be imported and used for remote sources plugins
when using Transloadit:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/transloadit&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Dropbox</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">companionUrl</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">companionAllowedHosts</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">COMPANION_ALLOWED_HOSTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyaws-s3-multipart"><code>@uppy/aws-s3-multipart</code><a class="hash-link" aria-label="Direct link to uppyaws-s3-multipart" title="Direct link to uppyaws-s3-multipart" href="/docs/guides/migration-guides/#uppyaws-s3-multipart">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="make-headers-inside-the-return-value-of-prepareuploadparts-part-indexed-too">Make <code>headers</code> inside the return value of <a href="/docs/aws-s3-multipart/#prepareUploadParts-file-partData"><code>prepareUploadParts</code></a> part-indexed too.<a class="hash-link" aria-label="Direct link to make-headers-inside-the-return-value-of-prepareuploadparts-part-indexed-too" title="Direct link to make-headers-inside-the-return-value-of-prepareuploadparts-part-indexed-too" href="/docs/guides/migration-guides/#make-headers-inside-the-return-value-of-prepareuploadparts-part-indexed-too">​</a></h4>
<p>This is to allow custom headers to be set per part. See this
<a href="https://github.com/transloadit/uppy/issues/3881" target="_blank" rel="noopener noreferrer">issue</a> for details.</p>
<p>To migrate: make headers part indexed like <code>presignedUrls</code>:
<code>{ &quot;headers&quot;: { &quot;1&quot;: { &quot;Content-MD5&quot;: &quot;foo&quot; } }}</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-client-getter-and-setter">Remove <code>client</code> getter and setter.<a class="hash-link" aria-label="Direct link to remove-client-getter-and-setter" title="Direct link to remove-client-getter-and-setter" href="/docs/guides/migration-guides/#remove-client-getter-and-setter">​</a></h4>
<p>It’s internal usage only.</p>
<p>To migrate: use exposed options only.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppytus-uppyaws-s3-uppyxhr-upload"><code>@uppy/tus/</code>, <code>@uppy/aws-s3</code>, <code>@uppy/xhr-upload</code><a class="hash-link" aria-label="Direct link to uppytus-uppyaws-s3-uppyxhr-upload" title="Direct link to uppytus-uppyaws-s3-uppyxhr-upload" href="/docs/guides/migration-guides/#uppytus-uppyaws-s3-uppyxhr-upload">​</a></h3>
<p>Rename <code>metaFields</code> option to <code>allowedMetaFields</code>. Counter intuitively,
<code>metaFields</code> is for <em>filtering</em> which <code>metaFields</code> to send along with the
request, not for adding extra meta fields to a request. As a lot of people were
confused by this, and the name overlaps with the
<a href="/docs/dashboard/#metaFields"><code>metaFields</code> option from Dashboard</a>, we renamed
it.</p>
<p>To migrate: use <code>allowedMetaFields</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyreact-1"><code>@uppy/react</code><a class="hash-link" aria-label="Direct link to uppyreact-1" title="Direct link to uppyreact-1" href="/docs/guides/migration-guides/#uppyreact-1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="uppy-dependencies-have-become-peer-dependencies">Uppy dependencies have become peer dependencies<a class="hash-link" aria-label="Direct link to Uppy dependencies have become peer dependencies" title="Direct link to Uppy dependencies have become peer dependencies" href="/docs/guides/migration-guides/#uppy-dependencies-have-become-peer-dependencies">​</a></h4>
<p><code>@uppy/dashboard</code>, <code>@uppy/drag-drop</code>, <code>@uppy/file-input</code>, <code>@uppy/progress-bar</code>,
and <code>@uppy/status-bar</code> are now peer dependencies. This means you don’t install
all these packages if you only need one.</p>
<p>To migrate: install only the packages you need. If you use the Dashboard
component, you need <code>@uppy/dashboard</code>, and so onwards.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dont-expose-validprops-on-the-exported-components">Don’t expose <code>validProps</code> on the exported components.<a class="hash-link" aria-label="Direct link to dont-expose-validprops-on-the-exported-components" title="Direct link to dont-expose-validprops-on-the-exported-components" href="/docs/guides/migration-guides/#dont-expose-validprops-on-the-exported-components">​</a></h4>
<p>It’s internal usage only.</p>
<p>To migrate: use exposed options only.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppysvelte-1"><code>@uppy/svelte</code><a class="hash-link" aria-label="Direct link to uppysvelte-1" title="Direct link to uppysvelte-1" href="/docs/guides/migration-guides/#uppysvelte-1">​</a></h3>
<p><code>@uppy/dashboard</code>, <code>@uppy/drag-drop</code>, <code>@uppy/progress-bar</code>, and
<code>@uppy/status-bar</code> are now peer dependencies. This means you don’t install all
these packages if you only need one.</p>
<p>To migrate: install only the packages you need. If you use the Dashboard
component, you need <code>@uppy/dashboard</code>, and so onwards.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppyvue-1"><code>@uppy/vue</code><a class="hash-link" aria-label="Direct link to uppyvue-1" title="Direct link to uppyvue-1" href="/docs/guides/migration-guides/#uppyvue-1">​</a></h3>
<p><code>@uppy/dashboard</code>, <code>@uppy/drag-drop</code>, <code>@uppy/file-input</code>, <code>@uppy/progress-bar</code>,
and <code>@uppy/status-bar</code> are now peer dependencies. This means you don’t install
all these packages if you only need one.</p>
<p>To migrate: install only the packages you need. If you use the Dashboard
component, you need <code>@uppy/dashboard</code>, and so onwards.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppystore-redux"><code>@uppy/store-redux</code><a class="hash-link" aria-label="Direct link to uppystore-redux" title="Direct link to uppystore-redux" href="/docs/guides/migration-guides/#uppystore-redux">​</a></h3>
<p>Remove backwards compatible exports (static properties on <code>ReduxStore</code>).
Exports, such as <code>reducer</code>, used to also be accessible on the <code>ReduxStore</code>
export. This has now been removed due to the transition to ESM.</p>
<p>To migrate: use named imports.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uppythumbnail-generator"><code>@uppy/thumbnail-generator</code><a class="hash-link" aria-label="Direct link to uppythumbnail-generator" title="Direct link to uppythumbnail-generator" href="/docs/guides/migration-guides/#uppythumbnail-generator">​</a></h3>
<p>Remove <code>rotateImage</code>, <code>protect</code>, and <code>canvasToBlob</code> from the plugin prototype.
They are internal usage only.</p>
<p>To migrate: use exposed options only.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known issues<a class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues" href="/docs/guides/migration-guides/#known-issues">​</a></h3>
<ul>
<li><a href="https://github.com/transloadit/uppy/issues/4057" target="_blank" rel="noopener noreferrer"><code>ERESOLVE could not resolve</code> on npm install</a>.</li>
<li><a href="https://github.com/transloadit/uppy/issues/4069" target="_blank" rel="noopener noreferrer">@uppy/svelte reports a broken dependency with the Vite bundler</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-companion-3x-to-4x">Migrate from Companion 3.x to 4.x<a class="hash-link" aria-label="Direct link to Migrate from Companion 3.x to 4.x" title="Direct link to Migrate from Companion 3.x to 4.x" href="/docs/guides/migration-guides/#migrate-from-companion-3x-to-4x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="minimum-required-nodejs-version-is-v14200">Minimum required Node.js version is v14.20.0<a class="hash-link" aria-label="Direct link to Minimum required Node.js version is v14.20.0" title="Direct link to Minimum required Node.js version is v14.20.0" href="/docs/guides/migration-guides/#minimum-required-nodejs-version-is-v14200">​</a></h3>
<p>Aligning with the Node.js
<a href="https://nodejs.org/en/about/releases/" target="_blank" rel="noopener noreferrer">Long Term Support (LTS) schedule</a> and to
use modern syntax features.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="companionapp-returns--app-emitter--instead-of-app"><code>companion.app()</code> returns <code>{ app, emitter }</code> instead of <code>app</code><a class="hash-link" aria-label="Direct link to companionapp-returns--app-emitter--instead-of-app" title="Direct link to companionapp-returns--app-emitter--instead-of-app" href="/docs/guides/migration-guides/#companionapp-returns--app-emitter--instead-of-app">​</a></h3>
<p>Companion 3.x provides the emitter as <code>companionEmitter</code> on <code>app</code>. As of 4.x, an
object is returned with an <code>app</code> property (express middleware) and an <code>emitter</code>
property (event emitter). This provides more flexibility in the future and
follows best practices.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-searchproviders-wrapper-object-inside-provideroptions">Removed <code>searchProviders</code> wrapper object inside <code>providerOptions</code><a class="hash-link" aria-label="Direct link to removed-searchproviders-wrapper-object-inside-provideroptions" title="Direct link to removed-searchproviders-wrapper-object-inside-provideroptions" href="/docs/guides/migration-guides/#removed-searchproviders-wrapper-object-inside-provideroptions">​</a></h3>
<p>To use <a href="/docs/unsplash/"><code>@uppy/unsplash</code></a>, you had to configure Unsplash in
Companion inside <code>providerOptions.searchProviders</code>. This is redundant, Unsplash
is a provider as well so we removed the wrapper object.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="moved-the-s3-options-out-of-provideroptions">Moved the <code>s3</code> options out of <code>providerOptions</code><a class="hash-link" aria-label="Direct link to moved-the-s3-options-out-of-provideroptions" title="Direct link to moved-the-s3-options-out-of-provideroptions" href="/docs/guides/migration-guides/#moved-the-s3-options-out-of-provideroptions">​</a></h3>
<p>To use AWS S3 for storage, you configured the <code>s3</code> object inside
<code>providerOptions</code>. But as S3 is not a provider but a destination. To avoid
confusion we moved the <code>s3</code> settings to the root settings object.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-compatibility-for-legacy-custom-provider-implementations">Removed compatibility for legacy Custom Provider implementations<a class="hash-link" aria-label="Direct link to Removed compatibility for legacy Custom Provider implementations" title="Direct link to Removed compatibility for legacy Custom Provider implementations" href="/docs/guides/migration-guides/#removed-compatibility-for-legacy-custom-provider-implementations">​</a></h3>
<p><a href="/docs/companion/#Adding-custom-providers">Custom Provider</a> implementations must
use the Promise API. The callback API is no longer supported.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-to-no-acl-for-aws-s3">Default to no ACL for AWS S3<a class="hash-link" aria-label="Direct link to Default to no ACL for AWS S3" title="Direct link to Default to no ACL for AWS S3" href="/docs/guides/migration-guides/#default-to-no-acl-for-aws-s3">​</a></h3>
<p>Default to no
<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html" target="_blank" rel="noopener noreferrer">ACL</a>
for S3 uploads. Before the default was <code>public-read</code> but AWS now discourages
ACLs. The environment variable <code>COMPANION_AWS_DISABLE_ACL</code> is also removed,
instead Companion only uses <code>COMPANION_AWS_ACL</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocol-sent-from-uppy-in-any-get-request-is-now-required-before-it-would-default-to-multipart"><code>protocol</code> sent from Uppy in any <code>get</code> request is now required (before it would default to Multipart).<a class="hash-link" aria-label="Direct link to protocol-sent-from-uppy-in-any-get-request-is-now-required-before-it-would-default-to-multipart" title="Direct link to protocol-sent-from-uppy-in-any-get-request-is-now-required-before-it-would-default-to-multipart" href="/docs/guides/migration-guides/#protocol-sent-from-uppy-in-any-get-request-is-now-required-before-it-would-default-to-multipart">​</a></h3>
<p>If you use any official Uppy plugins, then no migration is needed. For custom
plugins that talk to Companion, make to send along the <code>protocol</code> header with a
value of <code>multipart</code>, <code>s3Multipart</code>, or <code>tus</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="emitsuccess-and-emiterror-are-now-private-methods-on-the-uploader-class"><code>emitSuccess</code> and <code>emitError</code> are now private methods on the <code>Uploader</code> class.<a class="hash-link" aria-label="Direct link to emitsuccess-and-emiterror-are-now-private-methods-on-the-uploader-class" title="Direct link to emitsuccess-and-emiterror-are-now-private-methods-on-the-uploader-class" href="/docs/guides/migration-guides/#emitsuccess-and-emiterror-are-now-private-methods-on-the-uploader-class">​</a></h3>
<p>It’s unlikely you’re using this, but it’s technically a breaking change. In
general, don’t depend on implicitly internal methods, use exposed APIs instead.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-chunksize-backwards-compatibility-for-aws-s3-multipart">Removed <code>chunkSize</code> backwards compatibility for AWS S3 Multipart<a class="hash-link" aria-label="Direct link to removed-chunksize-backwards-compatibility-for-aws-s3-multipart" title="Direct link to removed-chunksize-backwards-compatibility-for-aws-s3-multipart" href="/docs/guides/migration-guides/#removed-chunksize-backwards-compatibility-for-aws-s3-multipart">​</a></h3>
<p><code>chunkSize</code> option will now be used as <code>partSize</code> in AWS multipart. Before only
valid values would be respected. Invalid values would be ignored. Now any value
will be passed on to the AWS SDK, possibly throwing an error on invalid values.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-backwards-compatibility-for-metrics-endpoint">Removed backwards compatibility for <code>/metrics</code> endpoint<a class="hash-link" aria-label="Direct link to removed-backwards-compatibility-for-metrics-endpoint" title="Direct link to removed-backwards-compatibility-for-metrics-endpoint" href="/docs/guides/migration-guides/#removed-backwards-compatibility-for-metrics-endpoint">​</a></h3>
<p>The <code>metrics</code> option is a boolean flag to tell Companion whether to provide an
endpoint <code>/metrics</code> with Prometheus metrics. Metrics will now always be served
under <code>options.server.path</code>. Before v4.x, it would always be served under the
root.</p>
<p>For example: if <code>{ options: { metrics: true, server: { path: &#x27;/companion&#x27; }}}</code>,
metrics will now be served under <code>/companion/metrics</code>. In v3.x, the metrics
would be served under <code>/metrics</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-uppy-1x-to-2x">Migrate from Uppy 1.x to 2.x<a class="hash-link" aria-label="Direct link to Migrate from Uppy 1.x to 2.x" title="Direct link to Migrate from Uppy 1.x to 2.x" href="/docs/guides/migration-guides/#migrate-from-uppy-1x-to-2x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-bundle-requires-manual-polyfilling">New bundle requires manual polyfilling<a class="hash-link" aria-label="Direct link to New bundle requires manual polyfilling" title="Direct link to New bundle requires manual polyfilling" href="/docs/guides/migration-guides/#new-bundle-requires-manual-polyfilling">​</a></h3>
<p>With 2.0, following in the footsteps of Microsoft, we are dropping support for
IE11. As a result, we are able to remove all built-in polyfills, and the new
bundle size is <strong>25% smaller</strong>! If you want your app to still support older
browsers (such as IE11), you may need to add the following polyfills to your
bundle:</p>
<ul>
<li><a href="https://github.com/mo/abortcontroller-polyfill" target="_blank" rel="noopener noreferrer">abortcontroller-polyfill</a></li>
<li><a href="https://github.com/zloirock/core-js" target="_blank" rel="noopener noreferrer">core-js</a></li>
<li><a href="https://github.com/mozdevs/mediaDevices-getUserMedia-polyfill" target="_blank" rel="noopener noreferrer">md-gum-polyfill</a></li>
<li><a href="https://github.com/que-etc/resize-observer-polyfill" target="_blank" rel="noopener noreferrer">resize-observer-polyfill</a></li>
<li><a href="https://github.com/github/fetch" target="_blank" rel="noopener noreferrer">whatwg-fetch</a></li>
</ul>
<p>If you’re using a bundler, you need import these before Uppy:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;core-js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;whatwg-fetch&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;abortcontroller-polyfill/dist/polyfill-patch-fetch&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Order matters here: AbortController needs fetch, which needs Promise (provided by core-js).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;md-gum-polyfill&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ResizeObserver</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;resize-observer-polyfill&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">ResizeObserver</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">??=</span><span class="token plain"> </span><span class="token maybe-class-name">ResizeObserver</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#393A34">{</span><span class="token exports"> </span><span class="token exports keyword module" style="color:#00009f">default</span><span class="token exports"> </span><span class="token exports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token exports operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you’re using Uppy from a CDN, we now provide two bundles: one for up-to-date
browsers that do not include polyfills and use modern syntax, and one for legacy
browsers. When migrating, be mindful about the types of browsers you want to
support:</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Modern browsers (recommended) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://releases.transloadit.com/uppy/v3.17.0/uppy.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">&lt;!-- Legacy browsers (IE11+) --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">nomodule</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f">	</span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">https://releases.transloadit.com/uppy/v3.17.0/uppy.legacy.min.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"></span><br></span><span class="token-line" style="color:#393A34"><span class="token tag" style="color:#00009f"></span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">script</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">module</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript">	</span><span class="token script language-javascript keyword module" style="color:#00009f">import</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:#e3116c">&#x27;https://releases.transloadit.com/uppy/v3.17.0/uppy.min.js&#x27;</span><span class="token script language-javascript punctuation" style="color:#393A34">;</span><span class="token script language-javascript"></span><br></span><span class="token-line" style="color:#393A34"><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">script</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please note that while you may be able to get 2.0 to work in IE11 this way, we
do not officially support it anymore.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-baseplugin-or-uiplugin-instead-of-plugin">Use <code>BasePlugin</code> or <code>UIPlugin</code> instead of <code>Plugin</code><a class="hash-link" aria-label="Direct link to use-baseplugin-or-uiplugin-instead-of-plugin" title="Direct link to use-baseplugin-or-uiplugin-instead-of-plugin" href="/docs/guides/migration-guides/#use-baseplugin-or-uiplugin-instead-of-plugin">​</a></h3>
<p><a href="/docs/uppy/"><code>@uppy/core</code></a> used to provide a <code>Plugin</code> class for creating plugins. This
was used for any official plugin, but also for users who want to create their
own custom plugin. But, <code>Plugin</code> always came bundled with Preact, even if the
plugin itself didn’t add any UI elements.</p>
<p><code>Plugin</code> has been replaced with <code>BasePlugin</code> and <code>UIPlugin</code>. <code>BasePlugin</code> is the
minimum you need to create a plugin and <code>UIPlugin</code> adds Preact for rendering
user interfaces.</p>
<p>You can import them from <a href="/docs/uppy/"><code>@uppy/core</code></a>:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BasePlugin</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">UIPlugin</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Note:</strong> some bundlers will include <code>UIPlugin</code> (and thus Preact) if you import
from <code>@uppy/core</code>. To make sure this does not happen, you can import <code>Uppy</code> and
<code>BasePlugin</code> directly:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core/lib/Uppy.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">BasePlugin</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core/lib/BasePlugin.js&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-latest-preact-for-your-uppy-plugins">Use the latest Preact for your Uppy plugins<a class="hash-link" aria-label="Direct link to Use the latest Preact for your Uppy plugins" title="Direct link to Use the latest Preact for your Uppy plugins" href="/docs/guides/migration-guides/#use-the-latest-preact-for-your-uppy-plugins">​</a></h3>
<p>Official plugins have already been upgraded. If you are using any custom
plugins, upgrade Preact to the latest version. At the time of writing this is
<code>10.5.13</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-plugin-titles-from-locales">Set plugin titles from locales<a class="hash-link" aria-label="Direct link to Set plugin titles from locales" title="Direct link to Set plugin titles from locales" href="/docs/guides/migration-guides/#set-plugin-titles-from-locales">​</a></h3>
<p>Titles for plugins used to be set with the <code>title</code> property in the plugin
options, but all other strings are set in <code>locale</code>. This has now been aligned.
You should set your plugin title from the <code>locale</code> property.</p>
<p>Before</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Webcam</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/webcam&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Webcam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Some title&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Webcam</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/webcam&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Webcam</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">locale</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token literal-property property" style="color:#36acaa">strings</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><span class="token literal-property property" style="color:#36acaa">title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Some title&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="initialize-uppy-with-the-new-keyword">Initialize Uppy with the <code>new</code> keyword<a class="hash-link" aria-label="Direct link to initialize-uppy-with-the-new-keyword" title="Direct link to initialize-uppy-with-the-new-keyword" href="/docs/guides/migration-guides/#initialize-uppy-with-the-new-keyword">​</a></h3>
<p>The default export <code>Uppy</code> is no longer callable as a function. This means you
construct the <code>Uppy</code> instance using the <code>new</code> keyword.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Uppy</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// correct.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> otherUppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#d73a49">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// incorrect, will throw.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rename-allowmultipleuploads-to-allowmultipleuploadbatches">Rename <code>allowMultipleUploads</code> to <code>allowMultipleUploadBatches</code><a class="hash-link" aria-label="Direct link to rename-allowmultipleuploads-to-allowmultipleuploadbatches" title="Direct link to rename-allowmultipleuploads-to-allowmultipleuploadbatches" href="/docs/guides/migration-guides/#rename-allowmultipleuploads-to-allowmultipleuploadbatches">​</a></h3>
<p><a href="/docs/uppy/#allowmultipleuploadbatches"><code>allowMultipleUploadBatches</code></a> means
allowing several calls to <a href="/docs/uppy/#upload"><code>.upload()</code></a>, in other words, a
user can add more files after already having uploaded some.</p>
<p>We have renamed this to be more intention revealing that this is about uploads,
and not whether a user can choose multiple files for one upload.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">allowMultipleUploadBatches</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="new-default-limits-for-uppyxhr-upload-and-uppytus">New default limits for <a href="/docs/xhr-upload/"><code>@uppy/xhr-upload</code></a> and <a href="/docs/tus/"><code>@uppy/tus</code></a><a class="hash-link" aria-label="Direct link to new-default-limits-for-uppyxhr-upload-and-uppytus" title="Direct link to new-default-limits-for-uppyxhr-upload-and-uppytus" href="/docs/guides/migration-guides/#new-default-limits-for-uppyxhr-upload-and-uppytus">​</a></h3>
<p>The default limit has been changed from <code>0</code> to <code>5</code>. Setting this to <code>0</code> means no
limit on concurrent uploads.</p>
<p>You can change the limit on the Tus and XHR plugin options.</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">limit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">XHRUpload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token literal-property property" style="color:#36acaa">limit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typescript-changes">TypeScript changes<a class="hash-link" aria-label="Direct link to TypeScript changes" title="Direct link to TypeScript changes" href="/docs/guides/migration-guides/#typescript-changes">​</a></h3>
<p>Uppy used to have loose types by default and strict types as an opt-in. The
default export was a function that returned the <code>Uppy</code> class, and the types came
bundled with the default export (<code>Uppy.SomeType</code>).</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Uppy </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Tus </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/tus&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#d73a49">Uppy</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">Uppy</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">.</span><span class="token generic-function generic class-name">StrictTypes</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	invalidOption</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this will make the compilation fail!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Uppy is now strictly typed by default and loose types have been removed.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> uppy </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Uppy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">Tus</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	invalidOption</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this will make the compilation fail!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Uppy types are now individual exports and should be imported separately.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> PluginOptions</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UIPlugin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PluginTarget </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@uppy/core&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="event-types">Event types<a class="hash-link" aria-label="Direct link to Event types" title="Direct link to Event types" href="/docs/guides/migration-guides/#event-types">​</a></h4>
<p><a href="/docs/uppy/"><code>@uppy/core</code></a> provides an <a href="/docs/uppy/#uppy-on-39-event-39-action"><code>.on</code></a>
method to listen to <a href="/docs/uppy/#Events">events</a>. The types for these events
were loose and allowed for invalid events to be passed, such as
<code>uppy.on(&#x27;upload-errrOOOoooOOOOOrrrr&#x27;)</code>.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Before:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Invalid event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">on</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name">Meta</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;upload-errrOOOoooOOOOOrrrr&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// After:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Normal event signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;complete&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> successResults </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">successful</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Custom signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Meta</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> myCustomMetadata</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Notice how the custom type has now become the second argument</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">on</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name string" style="color:#e3116c">&#x27;complete&#x27;</span><span class="token generic-function generic class-name punctuation" style="color:#393A34">,</span><span class="token generic-function generic class-name"> Meta</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;complete&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">// The passed type is now merged into the `meta` types.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> meta </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">successful</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">myCustomMetadata</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Plugins that add their own events can merge with existing ones in <code>@uppy/core</code>
with <code>declare module &#x27;@uppy/core&#x27; { ... }</code>. This is a TypeScript pattern called
<a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html#module-augmentation" target="_blank" rel="noopener noreferrer">module augmentation</a>.
For instance, when using <a href="/docs/dashboard/"><code>@uppy/dashboard</code></a>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">uppy</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;dashboard:file-edit-start&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fileName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="changes-to-pre-signing-urls-for-uppyaws-s3-multipart">Changes to pre-signing URLs for <a href="/docs/aws-s3-multipart/"><code>@uppy/aws-s3-multipart</code></a><a class="hash-link" aria-label="Direct link to changes-to-pre-signing-urls-for-uppyaws-s3-multipart" title="Direct link to changes-to-pre-signing-urls-for-uppyaws-s3-multipart" href="/docs/guides/migration-guides/#changes-to-pre-signing-urls-for-uppyaws-s3-multipart">​</a></h3>
<p>See the Uppy 2.0.0 announcement post about the batch
<a href="/blog/2021/08/2.0/#Batch-pre-signing-URLs-for-AWS-S3-Multipart">pre-signing URLs change</a>.</p>
<p><code>prepareUploadPart</code> has been renamed to
<a href="/docs/aws-s3-multipart/#prepareUploadParts-file-partData"><code>prepareUploadParts</code></a>
(plural). See the documentation link on how to use this function.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-the-run-method-from-uppycore">Removed the <code>.run</code> method from <a href="/docs/uppy/"><code>@uppy/core</code></a><a class="hash-link" aria-label="Direct link to removed-the-run-method-from-uppycore" title="Direct link to removed-the-run-method-from-uppycore" href="/docs/guides/migration-guides/#removed-the-run-method-from-uppycore">​</a></h3>
<p>The <code>.run</code> method on the <code>Uppy</code> instance has been removed. This method was
already obsolete and only logged a warning. As of this major version, it no
longer exists.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="removed-resume-and-removefingerprintonsuccess-options-from-uppytus">Removed <code>resume</code> and <code>removeFingerprintOnSuccess</code> options from <a href="/docs/tus/"><code>@uppy/tus</code></a><a class="hash-link" aria-label="Direct link to removed-resume-and-removefingerprintonsuccess-options-from-uppytus" title="Direct link to removed-resume-and-removefingerprintonsuccess-options-from-uppytus" href="/docs/guides/migration-guides/#removed-resume-and-removefingerprintonsuccess-options-from-uppytus">​</a></h3>
<p>Tus will now by default try to resume uploads if the upload has been started in
the past.</p>
<p>This also means tus will store some data in localStorage for each upload, which
will automatically be removed on success. Making <code>removeFingerprintOnSuccess</code>
obsolete too.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thats-it">That’s it!<a class="hash-link" aria-label="Direct link to That’s it!" title="Direct link to That’s it!" href="/docs/guides/migration-guides/#thats-it">​</a></h3>
<p>Uppy 1.0 will continue to receive bug fixes for three more months (until
<time datetime="2021-12-01">1 December 2021</time>), security fixes for one more
year (until <time datetime="2022-09-01">1 September 2022</time>), but no more
new features after today. Exceptions are unlikely, but <em>can</em> be made – to
accommodate those with commercial support contracts, for example.</p>
<p>We hope you’ll waste no time in taking Uppy 2.0 out for a walk. When you do,
please let us know what you thought of it on
<a href="https://www.reddit.com/r/javascript/comments/penbr7/uppy_file_uploader_20_smaller_and_faster_modular/" target="_blank" rel="noopener noreferrer">Reddit</a>,
<a href="https://news.ycombinator.com/item?id=28359287" target="_blank" rel="noopener noreferrer">HN</a>, ProductHunt, or
<a href="https://twitter.com/uppy_io/status/1432399270846603264" target="_blank" rel="noopener noreferrer">Twitter</a>. We’re howling
at the moon to hear from you!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-from-companion-1x-to-2x">Migrate from Companion 1.x to 2.x<a class="hash-link" aria-label="Direct link to Migrate from Companion 1.x to 2.x" title="Direct link to Migrate from Companion 1.x to 2.x" href="/docs/guides/migration-guides/#migrate-from-companion-1x-to-2x">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisite">Prerequisite<a class="hash-link" aria-label="Direct link to Prerequisite" title="Direct link to Prerequisite" href="/docs/guides/migration-guides/#prerequisite">​</a></h3>
<p>Since v2, you now need to be running <code>node.js &gt;= v10.20.1</code> to use Companion.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="provideroptions">ProviderOptions<a class="hash-link" aria-label="Direct link to ProviderOptions" title="Direct link to ProviderOptions" href="/docs/guides/migration-guides/#provideroptions">​</a></h3>
<p>In v2 the <code>google</code> and <code>microsoft</code> <a href="/docs/companion/#Options">providerOptions</a>
have been changed to <code>drive</code> and <code>onedrive</code> respectively.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="oauth-redirect-uris">OAuth Redirect URIs<a class="hash-link" aria-label="Direct link to OAuth Redirect URIs" title="Direct link to OAuth Redirect URIs" href="/docs/guides/migration-guides/#oauth-redirect-uris">​</a></h3>
<p>On your Providers’ respective developer platforms, the OAuth redirect URIs that
you should supply has now changed from:</p>
<p><code>http(s)://$COMPANION_HOST_NAME/connect/$AUTH_PROVIDER/callback</code> in v1</p>
<p>to:</p>
<p><code>http(s)://$COMPANION_HOST_NAME/$PROVIDER_NAME/redirect</code> in v2</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-redirect-uris">New Redirect URIs<a class="hash-link" aria-label="Direct link to New Redirect URIs" title="Direct link to New Redirect URIs" href="/docs/guides/migration-guides/#new-redirect-uris">​</a></h4>
<div class="table-responsive">





































<table><thead><tr><th>Provider</th><th>New Redirect URI</th></tr></thead><tbody><tr><td>Dropbox</td><td><code>https://$COMPANION_HOST_NAME/dropbox/redirect</code></td></tr><tr><td>Google Drive</td><td><code>https://$COMPANION_HOST_NAME/drive/redirect</code></td></tr><tr><td>Google Photos</td><td><code>https://$COMPANION_HOST_NAME/googlephotos/redirect</code></td></tr><tr><td>OneDrive</td><td><code>https://$COMPANION_HOST_NAME/onedrive/redirect</code></td></tr><tr><td>Box</td><td><code>https://$YOUR_COMPANION_HOST_NAME/box/redirect</code></td></tr><tr><td>Facebook</td><td><code>https://$COMPANION_HOST_NAME/facebook/redirect</code></td></tr><tr><td>Instagram</td><td><code>https://$COMPANION_HOST_NAME/instagram/redirect</code></td></tr></tbody></table>
</div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/transloadit/uppy.io/blob/main/docs/guides/migration-guides.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guides/custom-stores/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Custom stores</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/uppy/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Uppy core</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-companion-4x-to-5x">Migrate from Companion 4.x to 5.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppycompanion-client"><code>@uppy/companion-client</code></a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-uppy-3x-to-4x">Migrate from Uppy 3.x to 4.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#typescript-rewrite">TypeScript rewrite</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyaws-s3-and-uppyaws-s3-multipart"><code>@uppy/aws-s3</code> and <code>@uppy/aws-s3-multipart</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppycore"><code>@uppy/core</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyxhr-upload"><code>@uppy/xhr-upload</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppytransloadit"><code>@uppy/transloadit</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#cdn">CDN</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#miscellaneous">Miscellaneous</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyangular"><code>@uppy/angular</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyreact"><code>@uppy/react</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppysvelte"><code>@uppy/svelte</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyvue"><code>@uppy/vue</code></a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-robodog-to-uppy-plugins">Migrate from Robodog to Uppy plugins</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-uppy-2x-to-3x">Migrate from Uppy 2.x to 3.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppy-is-pure-esm">Uppy is pure ESM</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#robodog-is-deprecated">Robodog is deprecated</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppycore-1"><code>@uppy/core</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppytransloadit-1"><code>@uppy/transloadit</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyaws-s3-multipart"><code>@uppy/aws-s3-multipart</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppytus-uppyaws-s3-uppyxhr-upload"><code>@uppy/tus/</code>, <code>@uppy/aws-s3</code>, <code>@uppy/xhr-upload</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyreact-1"><code>@uppy/react</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppysvelte-1"><code>@uppy/svelte</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppyvue-1"><code>@uppy/vue</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppystore-redux"><code>@uppy/store-redux</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#uppythumbnail-generator"><code>@uppy/thumbnail-generator</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#known-issues">Known issues</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-companion-3x-to-4x">Migrate from Companion 3.x to 4.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#minimum-required-nodejs-version-is-v14200">Minimum required Node.js version is v14.20.0</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#companionapp-returns--app-emitter--instead-of-app"><code>companion.app()</code> returns <code>{ app, emitter }</code> instead of <code>app</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-searchproviders-wrapper-object-inside-provideroptions">Removed <code>searchProviders</code> wrapper object inside <code>providerOptions</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#moved-the-s3-options-out-of-provideroptions">Moved the <code>s3</code> options out of <code>providerOptions</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-compatibility-for-legacy-custom-provider-implementations">Removed compatibility for legacy Custom Provider implementations</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#default-to-no-acl-for-aws-s3">Default to no ACL for AWS S3</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#protocol-sent-from-uppy-in-any-get-request-is-now-required-before-it-would-default-to-multipart"><code>protocol</code> sent from Uppy in any <code>get</code> request is now required (before it would default to Multipart).</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#emitsuccess-and-emiterror-are-now-private-methods-on-the-uploader-class"><code>emitSuccess</code> and <code>emitError</code> are now private methods on the <code>Uploader</code> class.</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-chunksize-backwards-compatibility-for-aws-s3-multipart">Removed <code>chunkSize</code> backwards compatibility for AWS S3 Multipart</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-backwards-compatibility-for-metrics-endpoint">Removed backwards compatibility for <code>/metrics</code> endpoint</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-uppy-1x-to-2x">Migrate from Uppy 1.x to 2.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#new-bundle-requires-manual-polyfilling">New bundle requires manual polyfilling</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#use-baseplugin-or-uiplugin-instead-of-plugin">Use <code>BasePlugin</code> or <code>UIPlugin</code> instead of <code>Plugin</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#use-the-latest-preact-for-your-uppy-plugins">Use the latest Preact for your Uppy plugins</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#set-plugin-titles-from-locales">Set plugin titles from locales</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#initialize-uppy-with-the-new-keyword">Initialize Uppy with the <code>new</code> keyword</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#rename-allowmultipleuploads-to-allowmultipleuploadbatches">Rename <code>allowMultipleUploads</code> to <code>allowMultipleUploadBatches</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#new-default-limits-for-uppyxhr-upload-and-uppytus">New default limits for @uppy/xhr-upload and @uppy/tus</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#typescript-changes">TypeScript changes</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#changes-to-pre-signing-urls-for-uppyaws-s3-multipart">Changes to pre-signing URLs for @uppy/aws-s3-multipart</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-the-run-method-from-uppycore">Removed the <code>.run</code> method from @uppy/core</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#removed-resume-and-removefingerprintonsuccess-options-from-uppytus">Removed <code>resume</code> and <code>removeFingerprintOnSuccess</code> options from @uppy/tus</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#thats-it">That’s it!</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#migrate-from-companion-1x-to-2x">Migrate from Companion 1.x to 2.x</a><ul><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#prerequisite">Prerequisite</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#provideroptions">ProviderOptions</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/guides/migration-guides/#oauth-redirect-uris">OAuth Redirect URIs</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer_J6tW"><p><img class="IndexFooter-logo" title="Uppy" alt="Uppy" src="/img/logo.svg"></p><p>Released under the<!-- --> <a href="http://opensource.org/licenses/MIT" target="_blank" rel="noreferrer noopener">MIT License</a> <!-- -->⋅ <a href="/privacy-policy/">Privacy Policy</a> ⋅<!-- --> <a href="https://github.com/transloadit/uppy/blob/main/.github/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer">Contributing</a></p><p>© 2016-<!-- -->2025<!-- --> <a href="https://transloadit.com" target="_blank" rel="noopener noreferrer">Transloadit</a></p></footer></div>
</body>
</html>