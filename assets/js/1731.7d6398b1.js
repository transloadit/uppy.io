/*! For license information please see 1731.7d6398b1.js.LICENSE.txt */
(self.webpackChunkuppy_io=self.webpackChunkuppy_io||[]).push([[1731],{78478:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});i(96540);var r=i(92303),o=i(74848);function n(t){let{children:e,fallback:i}=t;return(0,r.A)()?(0,o.jsx)(o.Fragment,{children:e?.()}):i??null}},65643:function(t){t.exports=function(){"use strict";function t(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function e(e){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?t(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=i(t,"string");return"symbol"==typeof e?e:e+""}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function a(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t,e,i){return(e=r(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t){return u(t)||c(t)||p(t)||f()}function u(t){if(Array.isArray(t))return d(t)}function c(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function p(t,e){if(t){if("string"==typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var m="undefined"!=typeof window&&void 0!==window.document,g=m?window:{},v=!(!m||!g.document.documentElement)&&"ontouchstart"in g.document.documentElement,y=!!m&&"PointerEvent"in g,b="cropper",w="all",S="crop",x="move",C="zoom",R="e",P="w",k="s",_="n",E="ne",O="nw",A="se",T="sw",D="".concat(b,"-crop"),U="".concat(b,"-disabled"),M="".concat(b,"-hidden"),L="".concat(b,"-hide"),j="".concat(b,"-invisible"),I="".concat(b,"-modal"),N="".concat(b,"-move"),z="".concat(b,"Action"),F="".concat(b,"Preview"),H="crop",B="move",q="none",V="crop",W="cropend",$="cropmove",X="cropstart",Y="dblclick",K=v?"touchstart":"mousedown",G=v?"touchmove":"mousemove",Z=v?"touchend touchcancel":"mouseup",J=y?"pointerdown":K,Q=y?"pointermove":G,tt=y?"pointerup pointercancel":Z,et="ready",it="resize",rt="wheel",ot="zoom",nt="image/jpeg",st=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,at=/^data:/,ht=/^data:image\/jpeg;base64,/,lt=/^img|canvas$/i,ut=200,ct=100,pt={viewMode:0,dragMode:H,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ut,minContainerHeight:ct,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},dt='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ft=Number.isNaN||g.isNaN;function mt(t){return"number"==typeof t&&!ft(t)}var gt=function(t){return t>0&&t<1/0};function vt(t){return void 0===t}function yt(t){return"object"===o(t)&&null!==t}var bt=Object.prototype.hasOwnProperty;function wt(t){if(!yt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&bt.call(i,"isPrototypeOf")}catch(r){return!1}}function St(t){return"function"==typeof t}var xt=Array.prototype.slice;function Ct(t){return Array.from?Array.from(t):xt.call(t)}function Rt(t,e){return t&&St(e)&&(Array.isArray(t)||mt(t.length)?Ct(t).forEach((function(i,r){e.call(t,i,r,t)})):yt(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var Pt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return yt(t)&&i.length>0&&i.forEach((function(e){yt(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},kt=/\.\d*(?:0|9){12}\d*$/;function _t(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return kt.test(t)?Math.round(t*e)/e:t}var Et=/^width|height|left|top|marginLeft|marginTop$/;function Ot(t,e){var i=t.style;Rt(e,(function(t,e){Et.test(e)&&mt(t)&&(t="".concat(t,"px")),i[e]=t}))}function At(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function Tt(t,e){if(e)if(mt(t.length))Rt(t,(function(t){Tt(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function Dt(t,e){e&&(mt(t.length)?Rt(t,(function(t){Dt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Ut(t,e,i){e&&(mt(t.length)?Rt(t,(function(t){Ut(t,e,i)})):i?Tt(t,e):Dt(t,e))}var Mt=/([a-z\d])([A-Z])/g;function Lt(t){return t.replace(Mt,"$1-$2").toLowerCase()}function jt(t,e){return yt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Lt(e)))}function It(t,e,i){yt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Lt(e)),i)}function Nt(t,e){if(yt(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Lt(e)))}var zt=/\s\s*/,Ft=function(){var t=!1;if(m){var e=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});g.addEventListener("test",i,r),g.removeEventListener("test",i,r)}return t}();function Ht(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(zt).forEach((function(e){if(!Ft){var n=t.listeners;n&&n[e]&&n[e][i]&&(o=n[e][i],delete n[e][i],0===Object.keys(n[e]).length&&delete n[e],0===Object.keys(n).length&&delete t.listeners)}t.removeEventListener(e,o,r)}))}function Bt(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;e.trim().split(zt).forEach((function(e){if(r.once&&!Ft){var n=t.listeners,s=void 0===n?{}:n;o=function(){delete s[e][i],t.removeEventListener(e,o,r);for(var n=arguments.length,a=new Array(n),h=0;h<n;h++)a[h]=arguments[h];i.apply(t,a)},s[e]||(s[e]={}),s[e][i]&&t.removeEventListener(e,s[e][i],r),s[e][i]=o,t.listeners=s}t.addEventListener(e,o,r)}))}function qt(t,e,i){var r;return St(Event)&&St(CustomEvent)?r=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(r)}function Vt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Wt=g.location,$t=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Xt(t){var e=t.match($t);return null!==e&&(e[1]!==Wt.protocol||e[2]!==Wt.hostname||e[3]!==Wt.port)}function Yt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Kt(t){var e=t.rotate,i=t.scaleX,r=t.scaleY,o=t.translateX,n=t.translateY,s=[];mt(o)&&0!==o&&s.push("translateX(".concat(o,"px)")),mt(n)&&0!==n&&s.push("translateY(".concat(n,"px)")),mt(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),mt(i)&&1!==i&&s.push("scaleX(".concat(i,")")),mt(r)&&1!==r&&s.push("scaleY(".concat(r,")"));var a=s.length?s.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function Gt(t){var i=e({},t),r=0;return Rt(t,(function(t,e){delete i[e],Rt(i,(function(e){var i=Math.abs(t.startX-e.startX),o=Math.abs(t.startY-e.startY),n=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),a=Math.sqrt(i*i+o*o),h=(Math.sqrt(n*n+s*s)-a)/a;Math.abs(h)>Math.abs(r)&&(r=h)}))})),r}function Zt(t,i){var r=t.pageX,o=t.pageY,n={endX:r,endY:o};return i?n:e({startX:r,startY:o},n)}function Jt(t){var e=0,i=0,r=0;return Rt(t,(function(t){var o=t.startX,n=t.startY;e+=o,i+=n,r+=1})),{pageX:e/=r,pageY:i/=r}}function Qt(t){var e=t.aspectRatio,i=t.height,r=t.width,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",n=gt(r),s=gt(i);if(n&&s){var a=i*e;"contain"===o&&a>r||"cover"===o&&a<r?i=r/e:r=i*e}else n?i=r/e:s&&(r=i*e);return{width:r,height:i}}function te(t){var e=t.width,i=t.height,r=t.degree;if(90==(r=Math.abs(r)%180))return{width:i,height:e};var o=r%90*Math.PI/180,n=Math.sin(o),s=Math.cos(o),a=e*s+i*n,h=e*n+i*s;return r>90?{width:h,height:a}:{width:a,height:h}}function ee(t,e,i,r){var o=e.aspectRatio,n=e.naturalWidth,s=e.naturalHeight,a=e.rotate,h=void 0===a?0:a,u=e.scaleX,c=void 0===u?1:u,p=e.scaleY,d=void 0===p?1:p,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,v=r.fillColor,y=void 0===v?"transparent":v,b=r.imageSmoothingEnabled,w=void 0===b||b,S=r.imageSmoothingQuality,x=void 0===S?"low":S,C=r.maxWidth,R=void 0===C?1/0:C,P=r.maxHeight,k=void 0===P?1/0:P,_=r.minWidth,E=void 0===_?0:_,O=r.minHeight,A=void 0===O?0:O,T=document.createElement("canvas"),D=T.getContext("2d"),U=Qt({aspectRatio:f,width:R,height:k}),M=Qt({aspectRatio:f,width:E,height:A},"cover"),L=Math.min(U.width,Math.max(M.width,m)),j=Math.min(U.height,Math.max(M.height,g)),I=Qt({aspectRatio:o,width:R,height:k}),N=Qt({aspectRatio:o,width:E,height:A},"cover"),z=Math.min(I.width,Math.max(N.width,n)),F=Math.min(I.height,Math.max(N.height,s)),H=[-z/2,-F/2,z,F];return T.width=_t(L),T.height=_t(j),D.fillStyle=y,D.fillRect(0,0,L,j),D.save(),D.translate(L/2,j/2),D.rotate(h*Math.PI/180),D.scale(c,d),D.imageSmoothingEnabled=w,D.imageSmoothingQuality=x,D.drawImage.apply(D,[t].concat(l(H.map((function(t){return Math.floor(_t(t))}))))),D.restore(),T}var ie=String.fromCharCode;function re(t,e,i){var r="";i+=e;for(var o=e;o<i;o+=1)r+=ie(t.getUint8(o));return r}var oe=/^data:.*,/;function ne(t){var e=t.replace(oe,""),i=atob(e),r=new ArrayBuffer(i.length),o=new Uint8Array(r);return Rt(o,(function(t,e){o[e]=i.charCodeAt(e)})),r}function se(t,e){for(var i=[],r=8192,o=new Uint8Array(t);o.length>0;)i.push(ie.apply(null,Ct(o.subarray(0,r)))),o=o.subarray(r);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function ae(t){var e,i=new DataView(t);try{var r,o,n;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,a=2;a+1<s;){if(255===i.getUint8(a)&&225===i.getUint8(a+1)){o=a;break}a+=1}if(o){var h=o+10;if("Exif"===re(i,o+4,4)){var l=i.getUint16(h);if(((r=18761===l)||19789===l)&&42===i.getUint16(h+2,r)){var u=i.getUint32(h+4,r);u>=8&&(n=h+u)}}}if(n){var c,p,d=i.getUint16(n,r);for(p=0;p<d;p+=1)if(c=n+12*p+2,274===i.getUint16(c,r)){c+=8,e=i.getUint16(c,r),i.setUint16(c,1,r);break}}}catch(f){e=1}return e}function he(t){var e=0,i=1,r=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:r}}var le={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,r=this.cropper,o=Number(e.minContainerWidth),n=Number(e.minContainerHeight);Tt(r,M),Dt(t,M);var s={width:Math.max(i.offsetWidth,o>=0?o:ut),height:Math.max(i.offsetHeight,n>=0?n:ct)};this.containerData=s,Ot(r,{width:s.width,height:s.height}),Tt(t,M),Dt(r,M)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,r=Math.abs(e.rotate)%180==90,o=r?e.naturalHeight:e.naturalWidth,n=r?e.naturalWidth:e.naturalHeight,s=o/n,a=t.width,h=t.height;t.height*s>t.width?3===i?a=t.height*s:h=t.width/s:3===i?h=t.width/s:a=t.height*s;var l={aspectRatio:s,naturalWidth:o,naturalHeight:n,width:a,height:h};this.canvasData=l,this.limited=1===i||2===i,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(t.width-l.width)/2,l.top=(t.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=Pt({},l)},limitCanvas:function(t,e){var i=this.options,r=this.containerData,o=this.canvasData,n=this.cropBoxData,s=i.viewMode,a=o.aspectRatio,h=this.cropped&&n;if(t){var l=Number(i.minCanvasWidth)||0,u=Number(i.minCanvasHeight)||0;s>1?(l=Math.max(l,r.width),u=Math.max(u,r.height),3===s&&(u*a>l?l=u*a:u=l/a)):s>0&&(l?l=Math.max(l,h?n.width:0):u?u=Math.max(u,h?n.height:0):h&&(l=n.width,(u=n.height)*a>l?l=u*a:u=l/a));var c=Qt({aspectRatio:a,width:l,height:u});l=c.width,u=c.height,o.minWidth=l,o.minHeight=u,o.maxWidth=1/0,o.maxHeight=1/0}if(e)if(s>(h?0:1)){var p=r.width-o.width,d=r.height-o.height;o.minLeft=Math.min(0,p),o.minTop=Math.min(0,d),o.maxLeft=Math.max(0,p),o.maxTop=Math.max(0,d),h&&this.limited&&(o.minLeft=Math.min(n.left,n.left+(n.width-o.width)),o.minTop=Math.min(n.top,n.top+(n.height-o.height)),o.maxLeft=n.left,o.maxTop=n.top,2===s&&(o.width>=r.width&&(o.minLeft=Math.min(0,p),o.maxLeft=Math.max(0,p)),o.height>=r.height&&(o.minTop=Math.min(0,d),o.maxTop=Math.max(0,d))))}else o.minLeft=-o.width,o.minTop=-o.height,o.maxLeft=r.width,o.maxTop=r.height},renderCanvas:function(t,e){var i=this.canvasData,r=this.imageData;if(e){var o=te({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),n=o.width,s=o.height,a=i.width*(n/i.naturalWidth),h=i.height*(s/i.naturalHeight);i.left-=(a-i.width)/2,i.top-=(h-i.height)/2,i.width=a,i.height=h,i.aspectRatio=n/s,i.naturalWidth=n,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,Ot(this.canvas,Pt({width:i.width,height:i.height},Kt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,r=i.naturalWidth*(e.width/e.naturalWidth),o=i.naturalHeight*(e.height/e.naturalHeight);Pt(i,{width:r,height:o,left:(e.width-r)/2,top:(e.height-o)/2}),Ot(this.image,Pt({width:i.width,height:i.height},Kt(Pt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,r=Number(t.autoCropArea)||.8,o={width:e.width,height:e.height};i&&(e.height*i>e.width?o.height=o.width/i:o.width=o.height*i),this.cropBoxData=o,this.limitCropBox(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.width=Math.max(o.minWidth,o.width*r),o.height=Math.max(o.minHeight,o.height*r),o.left=e.left+(e.width-o.width)/2,o.top=e.top+(e.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCropBoxData=Pt({},o)},limitCropBox:function(t,e){var i=this.options,r=this.containerData,o=this.canvasData,n=this.cropBoxData,s=this.limited,a=i.aspectRatio;if(t){var h=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,u=s?Math.min(r.width,o.width,o.width+o.left,r.width-o.left):r.width,c=s?Math.min(r.height,o.height,o.height+o.top,r.height-o.top):r.height;h=Math.min(h,r.width),l=Math.min(l,r.height),a&&(h&&l?l*a>h?l=h/a:h=l*a:h?l=h/a:l&&(h=l*a),c*a>u?c=u/a:u=c*a),n.minWidth=Math.min(h,u),n.minHeight=Math.min(l,c),n.maxWidth=u,n.maxHeight=c}e&&(s?(n.minLeft=Math.max(0,o.left),n.minTop=Math.max(0,o.top),n.maxLeft=Math.min(r.width,o.left+o.width)-n.width,n.maxTop=Math.min(r.height,o.top+o.height)-n.height):(n.minLeft=0,n.minTop=0,n.maxLeft=r.width-n.width,n.maxTop=r.height-n.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&It(this.face,z,i.width>=e.width&&i.height>=e.height?x:w),Ot(this.cropBox,Pt({width:i.width,height:i.height},Kt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),qt(this.element,V,this.getData())}},ue={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,r=e?this.crossOriginUrl:this.url,o=t.alt||"The image to preview",n=document.createElement("img");if(e&&(n.crossOrigin=e),n.src=r,n.alt=o,this.viewBox.appendChild(n),this.viewBoxImage=n,i){var s=i;"string"==typeof i?s=t.ownerDocument.querySelectorAll(i):i.querySelector&&(s=[i]),this.previews=s,Rt(s,(function(t){var i=document.createElement("img");It(t,F,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=r,i.alt=o,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){Rt(this.previews,(function(t){var e=jt(t,F);Ot(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Nt(t,F)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,r=i.width,o=i.height,n=t.width,s=t.height,a=i.left-e.left-t.left,h=i.top-e.top-t.top;this.cropped&&!this.disabled&&(Ot(this.viewBoxImage,Pt({width:n,height:s},Kt(Pt({translateX:-a,translateY:-h},t)))),Rt(this.previews,(function(e){var i=jt(e,F),l=i.width,u=i.height,c=l,p=u,d=1;r&&(p=o*(d=l/r)),o&&p>u&&(c=r*(d=u/o),p=u),Ot(e,{width:c,height:p}),Ot(e.getElementsByTagName("img")[0],Pt({width:n*d,height:s*d},Kt(Pt({translateX:-a*d,translateY:-h*d},t))))})))}},ce={bind:function(){var t=this.element,e=this.options,i=this.cropper;St(e.cropstart)&&Bt(t,X,e.cropstart),St(e.cropmove)&&Bt(t,$,e.cropmove),St(e.cropend)&&Bt(t,W,e.cropend),St(e.crop)&&Bt(t,V,e.crop),St(e.zoom)&&Bt(t,ot,e.zoom),Bt(i,J,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Bt(i,rt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Bt(i,Y,this.onDblclick=this.dblclick.bind(this)),Bt(t.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),Bt(t.ownerDocument,tt,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Bt(window,it,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;St(e.cropstart)&&Ht(t,X,e.cropstart),St(e.cropmove)&&Ht(t,$,e.cropmove),St(e.cropend)&&Ht(t,W,e.cropend),St(e.crop)&&Ht(t,V,e.crop),St(e.zoom)&&Ht(t,ot,e.zoom),Ht(i,J,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ht(i,rt,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ht(i,Y,this.onDblclick),Ht(t.ownerDocument,Q,this.onCropMove),Ht(t.ownerDocument,tt,this.onCropEnd),e.responsive&&Ht(window,it,this.onResize)}},pe={resize:function(){if(!this.disabled){var t,e,i=this.options,r=this.container,o=this.containerData,n=r.offsetWidth/o.width,s=r.offsetHeight/o.height,a=Math.abs(n-1)>Math.abs(s-1)?n:s;1!==a&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(Rt(t,(function(e,i){t[i]=e*a}))),this.setCropBoxData(Rt(e,(function(t,i){e[i]=t*a})))))}},dblclick:function(){this.disabled||this.options.dragMode===q||this.setDragMode(At(this.dragBox,D)?B:H)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?r=t.deltaY>0?1:-1:t.wheelDelta?r=-t.wheelDelta/120:t.detail&&(r=t.detail>0?1:-1),this.zoom(-r*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(mt(e)&&1!==e||mt(i)&&0!==i||t.ctrlKey))){var r,o=this.options,n=this.pointers;t.changedTouches?Rt(t.changedTouches,(function(t){n[t.identifier]=Zt(t)})):n[t.pointerId||0]=Zt(t),r=Object.keys(n).length>1&&o.zoomable&&o.zoomOnTouch?C:jt(t.target,z),st.test(r)&&!1!==qt(this.element,X,{originalEvent:t,action:r})&&(t.preventDefault(),this.action=r,this.cropping=!1,r===S&&(this.cropping=!0,Tt(this.dragBox,I)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==qt(this.element,$,{originalEvent:t,action:e})&&(t.changedTouches?Rt(t.changedTouches,(function(t){Pt(i[t.identifier]||{},Zt(t,!0))})):Pt(i[t.pointerId||0]||{},Zt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?Rt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ut(this.dragBox,I,this.cropped&&this.options.modal)),qt(this.element,W,{originalEvent:t,action:e}))}}},de={change:function(t){var e,i=this.options,r=this.canvasData,o=this.containerData,n=this.cropBoxData,s=this.pointers,a=this.action,h=i.aspectRatio,l=n.left,u=n.top,c=n.width,p=n.height,d=l+c,f=u+p,m=0,g=0,v=o.width,y=o.height,b=!0;!h&&t.shiftKey&&(h=c&&p?c/p:1),this.limited&&(m=n.minLeft,g=n.minTop,v=m+Math.min(o.width,r.width,r.left+r.width),y=g+Math.min(o.height,r.height,r.top+r.height));var D=s[Object.keys(s)[0]],U={x:D.endX-D.startX,y:D.endY-D.startY},L=function(t){switch(t){case R:d+U.x>v&&(U.x=v-d);break;case P:l+U.x<m&&(U.x=m-l);break;case _:u+U.y<g&&(U.y=g-u);break;case k:f+U.y>y&&(U.y=y-f)}};switch(a){case w:l+=U.x,u+=U.y;break;case R:if(U.x>=0&&(d>=v||h&&(u<=g||f>=y))){b=!1;break}L(R),(c+=U.x)<0&&(a=P,l-=c=-c),h&&(p=c/h,u+=(n.height-p)/2);break;case _:if(U.y<=0&&(u<=g||h&&(l<=m||d>=v))){b=!1;break}L(_),p-=U.y,u+=U.y,p<0&&(a=k,u-=p=-p),h&&(c=p*h,l+=(n.width-c)/2);break;case P:if(U.x<=0&&(l<=m||h&&(u<=g||f>=y))){b=!1;break}L(P),c-=U.x,l+=U.x,c<0&&(a=R,l-=c=-c),h&&(p=c/h,u+=(n.height-p)/2);break;case k:if(U.y>=0&&(f>=y||h&&(l<=m||d>=v))){b=!1;break}L(k),(p+=U.y)<0&&(a=_,u-=p=-p),h&&(c=p*h,l+=(n.width-c)/2);break;case E:if(h){if(U.y<=0&&(u<=g||d>=v)){b=!1;break}L(_),p-=U.y,u+=U.y,c=p*h}else L(_),L(R),U.x>=0?d<v?c+=U.x:U.y<=0&&u<=g&&(b=!1):c+=U.x,U.y<=0?u>g&&(p-=U.y,u+=U.y):(p-=U.y,u+=U.y);c<0&&p<0?(a=T,u-=p=-p,l-=c=-c):c<0?(a=O,l-=c=-c):p<0&&(a=A,u-=p=-p);break;case O:if(h){if(U.y<=0&&(u<=g||l<=m)){b=!1;break}L(_),p-=U.y,u+=U.y,c=p*h,l+=n.width-c}else L(_),L(P),U.x<=0?l>m?(c-=U.x,l+=U.x):U.y<=0&&u<=g&&(b=!1):(c-=U.x,l+=U.x),U.y<=0?u>g&&(p-=U.y,u+=U.y):(p-=U.y,u+=U.y);c<0&&p<0?(a=A,u-=p=-p,l-=c=-c):c<0?(a=E,l-=c=-c):p<0&&(a=T,u-=p=-p);break;case T:if(h){if(U.x<=0&&(l<=m||f>=y)){b=!1;break}L(P),c-=U.x,l+=U.x,p=c/h}else L(k),L(P),U.x<=0?l>m?(c-=U.x,l+=U.x):U.y>=0&&f>=y&&(b=!1):(c-=U.x,l+=U.x),U.y>=0?f<y&&(p+=U.y):p+=U.y;c<0&&p<0?(a=E,u-=p=-p,l-=c=-c):c<0?(a=A,l-=c=-c):p<0&&(a=O,u-=p=-p);break;case A:if(h){if(U.x>=0&&(d>=v||f>=y)){b=!1;break}L(R),p=(c+=U.x)/h}else L(k),L(R),U.x>=0?d<v?c+=U.x:U.y>=0&&f>=y&&(b=!1):c+=U.x,U.y>=0?f<y&&(p+=U.y):p+=U.y;c<0&&p<0?(a=O,u-=p=-p,l-=c=-c):c<0?(a=T,l-=c=-c):p<0&&(a=E,u-=p=-p);break;case x:this.move(U.x,U.y),b=!1;break;case C:this.zoom(Gt(s),t),b=!1;break;case S:if(!U.x||!U.y){b=!1;break}e=Vt(this.cropper),l=D.startX-e.left,u=D.startY-e.top,c=n.minWidth,p=n.minHeight,U.x>0?a=U.y>0?A:E:U.x<0&&(l-=c,a=U.y>0?T:O),U.y<0&&(u-=p),this.cropped||(Dt(this.cropBox,M),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}b&&(n.width=c,n.height=p,n.left=l,n.top=u,this.action=a,this.renderCropBox()),Rt(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},fe={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Tt(this.dragBox,I),Dt(this.cropBox,M),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Pt({},this.initialImageData),this.canvasData=Pt({},this.initialCanvasData),this.cropBoxData=Pt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Pt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Dt(this.dragBox,I),Tt(this.cropBox,M)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,Rt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Dt(this.cropper,U)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Tt(this.cropper,U)),this},destroy:function(){var t=this.element;return t[b]?(t[b]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,r=i.left,o=i.top;return this.moveTo(vt(t)?t:r+Number(t),vt(e)?e:o+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(mt(t)&&(i.left=t,r=!0),mt(e)&&(i.top=e,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var r=this.options,o=this.canvasData,n=o.width,s=o.height,a=o.naturalWidth,h=o.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&r.zoomable){var l=a*t,u=h*t;if(!1===qt(this.element,ot,{ratio:t,oldRatio:n/a,originalEvent:i}))return this;if(i){var c=this.pointers,p=Vt(this.cropper),d=c&&Object.keys(c).length?Jt(c):{pageX:i.pageX,pageY:i.pageY};o.left-=(l-n)*((d.pageX-p.left-o.left)/n),o.top-=(u-s)*((d.pageY-p.top-o.top)/s)}else wt(e)&&mt(e.x)&&mt(e.y)?(o.left-=(l-n)*((e.x-o.left)/n),o.top-=(u-s)*((e.y-o.top)/s)):(o.left-=(l-n)/2,o.top-=(u-s)/2);o.width=l,o.height=u,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return mt(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,mt(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(mt(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(mt(t)&&(i.scaleX=t,r=!0),mt(e)&&(i.scaleY=e,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,r=this.imageData,o=this.canvasData,n=this.cropBoxData;if(this.ready&&this.cropped){t={x:n.left-o.left,y:n.top-o.top,width:n.width,height:n.height};var s=r.width/r.naturalWidth;if(Rt(t,(function(e,i){t[i]=e/s})),e){var a=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=a-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=r.rotate||0),i.scalable&&(t.scaleX=r.scaleX||1,t.scaleY=r.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,r=this.canvasData,o={};if(this.ready&&!this.disabled&&wt(t)){var n=!1;e.rotatable&&mt(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,n=!0),e.scalable&&(mt(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,n=!0),mt(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,n=!0)),n&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;mt(t.x)&&(o.left=t.x*s+r.left),mt(t.y)&&(o.top=t.y*s+r.top),mt(t.width)&&(o.width=t.width*s),mt(t.height)&&(o.height=t.height*s),this.setCropBoxData(o)}return this},getContainerData:function(){return this.ready?Pt({},this.containerData):{}},getImageData:function(){return this.sized?Pt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&Rt(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&wt(t)&&(mt(t.left)&&(e.left=t.left),mt(t.top)&&(e.top=t.top),mt(t.width)?(e.width=t.width,e.height=t.width/i):mt(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,r=this.cropBoxData,o=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&wt(t)&&(mt(t.left)&&(r.left=t.left),mt(t.top)&&(r.top=t.top),mt(t.width)&&t.width!==r.width&&(e=!0,r.width=t.width),mt(t.height)&&t.height!==r.height&&(i=!0,r.height=t.height),o&&(e?r.height=r.width/o:i&&(r.width=r.height*o)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=ee(this.image,this.imageData,e,t);if(!this.cropped)return i;var r=this.getData(t.rounded),o=r.x,n=r.y,s=r.width,a=r.height,h=i.width/Math.floor(e.naturalWidth);1!==h&&(o*=h,n*=h,s*=h,a*=h);var u=s/a,c=Qt({aspectRatio:u,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Qt({aspectRatio:u,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=Qt({aspectRatio:u,width:t.width||(1!==h?i.width:s),height:t.height||(1!==h?i.height:a)}),f=d.width,m=d.height;f=Math.min(c.width,Math.max(p.width,f)),m=Math.min(c.height,Math.max(p.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=_t(f),g.height=_t(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,m);var y=t.imageSmoothingEnabled,b=void 0===y||y,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var S,x,C,R,P,k,_=i.width,E=i.height,O=o,A=n;O<=-s||O>_?(O=0,S=0,C=0,P=0):O<=0?(C=-O,O=0,P=S=Math.min(_,s+O)):O<=_&&(C=0,P=S=Math.min(s,_-O)),S<=0||A<=-a||A>E?(A=0,x=0,R=0,k=0):A<=0?(R=-A,A=0,k=x=Math.min(E,a+A)):A<=E&&(R=0,k=x=Math.min(a,E-A));var T=[O,A,S,x];if(P>0&&k>0){var D=f/s;T.push(C*D,R*D,P*D,k*D)}return v.drawImage.apply(v,[i].concat(l(T.map((function(t){return Math.floor(_t(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||vt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var o=t===H,n=e.movable&&t===B;t=o||n?t:q,e.dragMode=t,It(i,z,t),Ut(i,D,o),Ut(i,N,n),e.cropBoxMovable||(It(r,z,t),Ut(r,D,o),Ut(r,N,n))}return this}},me=g.Cropper,ge=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,t),!e||!lt.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Pt({},pt,wt(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return a(t,[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[b]){if(e[b]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(at.test(t))ht.test(t)?this.read(ne(t)):this.clone();else{var o=new XMLHttpRequest,n=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=n,o.onerror=n,o.ontimeout=n,o.onprogress=function(){o.getResponseHeader("content-type")!==nt&&o.abort()},o.onload=function(){e.read(o.response)},o.onloadend=function(){e.reloading=!1,e.xhr=null},r.checkCrossOrigin&&Xt(t)&&i.crossOrigin&&(t=Yt(t)),o.open("GET",t,!0),o.responseType="arraybuffer",o.withCredentials="use-credentials"===i.crossOrigin,o.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,r=ae(t),o=0,n=1,s=1;if(r>1){this.url=se(t,nt);var a=he(r);o=a.rotate,n=a.scaleX,s=a.scaleY}e.rotatable&&(i.rotate=o),e.scalable&&(i.scaleX=n,i.scaleY=s),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,r=e;this.options.checkCrossOrigin&&Xt(e)&&(i||(i="anonymous"),r=Yt(e)),this.crossOrigin=i,this.crossOriginUrl=r;var o=document.createElement("img");i&&(o.crossOrigin=i),o.src=r||e,o.alt=t.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),Tt(o,L),t.parentNode.insertBefore(o,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=g.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(g.navigator.userAgent),r=function(e,i){Pt(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.initialImageData=Pt({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var o=document.createElement("img"),n=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),i||n.removeChild(o)},o.src=e.src,i||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(o))}else r(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,r=t.parentNode,o=document.createElement("div");o.innerHTML=dt;var n=o.querySelector(".".concat(b,"-container")),s=n.querySelector(".".concat(b,"-canvas")),a=n.querySelector(".".concat(b,"-drag-box")),h=n.querySelector(".".concat(b,"-crop-box")),l=h.querySelector(".".concat(b,"-face"));this.container=r,this.cropper=n,this.canvas=s,this.dragBox=a,this.cropBox=h,this.viewBox=n.querySelector(".".concat(b,"-view-box")),this.face=l,s.appendChild(i),Tt(t,M),r.insertBefore(n,t.nextSibling),Dt(i,L),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,Tt(h,M),e.guides||Tt(h.getElementsByClassName("".concat(b,"-dashed")),M),e.center||Tt(h.getElementsByClassName("".concat(b,"-center")),M),e.background&&Tt(n,"".concat(b,"-bg")),e.highlight||Tt(l,j),e.cropBoxMovable&&(Tt(l,N),It(l,z,w)),e.cropBoxResizable||(Tt(h.getElementsByClassName("".concat(b,"-line")),M),Tt(h.getElementsByClassName("".concat(b,"-point")),M)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),St(e.ready)&&Bt(t,et,e.ready,{once:!0}),qt(t,et)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Dt(this.element,M)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=me,t}},{key:"setDefaults",value:function(t){Pt(pt,wt(t)&&t)}}])}();return Pt(ge.prototype,le,ue,ce,pe,de,fe),ge}()},5574:t=>{"use strict";t.exports=o,t.exports.isMobile=o,t.exports.default=o;const e=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,r=/android|ipad|playbook|silk/i;function o(t){t||(t={});let o=t.ua;if(o||"undefined"==typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"==typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!=typeof o)return!1;let n=e.test(o)&&!i.test(o)||!!t.tablet&&r.test(o);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(n=!0),n}},10727:()=>{},73992:(t,e)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function o(t){try{return encodeURIComponent(t)}catch(e){return null}}e.stringify=function(t,e){e=e||"";var r,n,s=[];for(n in"string"!=typeof e&&(e="?"),t)if(i.call(t,n)){if((r=t[n])||null!=r&&!isNaN(r)||(r=""),n=o(n),r=o(r),null===n||null===r)continue;s.push(n+"="+r)}return s.length?e+s.join("&"):""},e.parse=function(t){for(var e,i=/([^=?#&]+)=?([^&]*)/g,o={};e=i.exec(t);){var n=r(e[1]),s=r(e[2]);null===n||null===s||n in o||(o[n]=s)}return o}},92063:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},75617:(t,e,i)=>{t.exports=i(58303)},58303:(t,e,i)=>{var r=i(93961);e.operation=function(t){var i=e.timeouts(t);return new r(i,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var i in t)e[i]=t[i];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<e.retries;o++)r.push(this.createTimeout(o,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(o,e)),r.sort((function(t,e){return t-e})),r},e.createTimeout=function(t,e){var i=e.randomize?Math.random()+1:1,r=Math.round(i*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout)},e.wrap=function(t,i,r){if(i instanceof Array&&(r=i,i=null),!r)for(var o in r=[],t)"function"==typeof t[o]&&r.push(o);for(var n=0;n<r.length;n++){var s=r[n],a=t[s];t[s]=function(r){var o=e.operation(i),n=Array.prototype.slice.call(arguments,1),s=n.pop();n.push((function(t){o.retry(t)||(t&&(arguments[0]=o.mainError()),s.apply(this,arguments))})),o.attempt((function(){r.apply(t,n)}))}.bind(t,a),t[s].options=i}}},93961:t=>{function e(t,e){"boolean"==typeof e&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=(new Date).getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var i=this._timeouts.shift();if(void 0===i){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),i),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){i._operationTimeoutCb()}),i._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},e.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,i=0,r=0;r<this._errors.length;r++){var o=this._errors[r],n=o.message,s=(t[n]||0)+1;t[n]=s,s>=i&&(e=o,i=s)}return e}},61160:(t,e,i)=>{"use strict";var r=i(92063),o=i(73992),n=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,h=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function c(t){return(t||"").toString().replace(n,"")}var p=[["#","hash"],["?","query"],function(t,e){return m(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(t){var e,r=("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).location||{},o={},n=typeof(t=t||r);if("blob:"===t.protocol)o=new v(unescape(t.pathname),{});else if("string"===n)for(e in o=new v(t,{}),d)delete o[e];else if("object"===n){for(e in t)e in d||(o[e]=t[e]);void 0===o.slashes&&(o.slashes=a.test(t.href))}return o}function m(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function g(t,e){t=(t=c(t)).replace(s,""),e=e||{};var i,r=l.exec(t),o=r[1]?r[1].toLowerCase():"",n=!!r[2],a=!!r[3],h=0;return n?a?(i=r[2]+r[3]+r[4],h=r[2].length+r[3].length):(i=r[2]+r[4],h=r[2].length):a?(i=r[3]+r[4],h=r[3].length):i=r[4],"file:"===o?h>=2&&(i=i.slice(2)):m(o)?i=r[4]:o?n&&(i=i.slice(2)):h>=2&&m(e.protocol)&&(i=r[4]),{protocol:o,slashes:n||m(o),slashesCount:h,rest:i}}function v(t,e,i){if(t=(t=c(t)).replace(s,""),!(this instanceof v))return new v(t,e,i);var n,a,h,l,d,y,b=p.slice(),w=typeof e,S=this,x=0;for("object"!==w&&"string"!==w&&(i=e,e=null),i&&"function"!=typeof i&&(i=o.parse),n=!(a=g(t||"",e=f(e))).protocol&&!a.slashes,S.slashes=a.slashes||n&&e.slashes,S.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(S.protocol)))&&(b[3]=[/(.*)/,"pathname"]);x<b.length;x++)"function"!=typeof(l=b[x])?(h=l[0],y=l[1],h!=h?S[y]=t:"string"==typeof h?~(d="@"===h?t.lastIndexOf(h):t.indexOf(h))&&("number"==typeof l[2]?(S[y]=t.slice(0,d),t=t.slice(d+l[2])):(S[y]=t.slice(d),t=t.slice(0,d))):(d=h.exec(t))&&(S[y]=d[1],t=t.slice(0,d.index)),S[y]=S[y]||n&&l[3]&&e[y]||"",l[4]&&(S[y]=S[y].toLowerCase())):t=l(t,S);i&&(S.query=i(S.query)),n&&e.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==e.pathname)&&(S.pathname=function(t,e){if(""===t)return e;for(var i=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=i.length,o=i[r-1],n=!1,s=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),s++):s&&(0===r&&(n=!0),i.splice(r,1),s--);return n&&i.unshift(""),"."!==o&&".."!==o||i.push(""),i.join("/")}(S.pathname,e.pathname)),"/"!==S.pathname.charAt(0)&&m(S.protocol)&&(S.pathname="/"+S.pathname),r(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(~(d=S.auth.indexOf(":"))?(S.username=S.auth.slice(0,d),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(d+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin="file:"!==S.protocol&&m(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}v.prototype={set:function(t,e,i){var n=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(i||o.parse)(e)),n[t]=e;break;case"port":n[t]=e,r(e,n.protocol)?e&&(n.host=n.hostname+":"+e):(n.host=n.hostname,n[t]="");break;case"hostname":n[t]=e,n.port&&(e+=":"+n.port),n.host=e;break;case"host":n[t]=e,h.test(e)?(e=e.split(":"),n.port=e.pop(),n.hostname=e.join(":")):(n.hostname=e,n.port="");break;case"protocol":n.protocol=e.toLowerCase(),n.slashes=!i;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";n[t]=e.charAt(0)!==s?s+e:e}else n[t]=e;break;case"username":case"password":n[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(n.username=e.slice(0,a),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=e.slice(a+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(e))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(n[u[1]]=n[u[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&m(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,i=this,r=i.host,n=i.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var s=n+(i.protocol&&i.slashes||m(i.protocol)?"//":"");return i.username?(s+=i.username,i.password&&(s+=":"+i.password),s+="@"):i.password?(s+=":"+i.password,s+="@"):"file:"!==i.protocol&&m(i.protocol)&&!r&&"/"!==i.pathname&&(s+="@"),(":"===r[r.length-1]||h.test(i.hostname)&&!i.port)&&(r+=":"),s+=r+i.pathname,(e="object"==typeof i.query?t(i.query):i.query)&&(s+="?"!==e.charAt(0)?"?"+e:e),i.hash&&(s+=i.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=c,v.qs=o,t.exports=v},31683:(t,e,i)=>{"use strict";i.d(e,{A:()=>B});var r=i(50172),o=i(86855),n=i(79885);var s=i(45994);function a(t){let{recording:e,onStartRecording:i,onStopRecording:o,i18n:n}=t;return e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:n("stopAudioRecording"),"aria-label":n("stopAudioRecording"),onClick:o,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:n("startAudioRecording"),"aria-label":n("startAudioRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14px",height:"20px",viewBox:"0 0 14 20"},(0,r.h)("path",{d:"M7 14c2.21 0 4-1.71 4-3.818V3.818C11 1.71 9.21 0 7 0S3 1.71 3 3.818v6.364C3 12.29 4.79 14 7 14zm6.364-7h-.637a.643.643 0 0 0-.636.65V9.6c0 3.039-2.565 5.477-5.6 5.175-2.645-.264-4.582-2.692-4.582-5.407V7.65c0-.36-.285-.65-.636-.65H.636A.643.643 0 0 0 0 7.65v1.631c0 3.642 2.544 6.888 6.045 7.382v1.387H3.818a.643.643 0 0 0-.636.65v.65c0 .36.285.65.636.65h6.364c.351 0 .636-.29.636-.65v-.65c0-.36-.285-.65-.636-.65H7.955v-1.372C11.363 16.2 14 13.212 14 9.6V7.65c0-.36-.285-.65-.636-.65z",fill:"#FFF","fill-rule":"nonzero"})))}function h(t){let{recordingLengthSeconds:e,i18n:i}=t;const o=(n=e,`${Math.floor(n/60)}:${String(n%60).padStart(2,"0")}`);var n;return(0,r.h)("span",{"aria-label":i("recordingLength",{recording_length:o})},o)}var l=0;function u(t){return"__private_"+l+++"_"+t}function c(t){return"function"==typeof t}function p(t){return c(t)?t():t}var d=u("draw");class f{constructor(t,e){void 0===e&&(e={}),Object.defineProperty(this,d,{writable:!0,value:()=>this.draw()});const i=e.canvas||{},r=e.canvasContext||{};this.analyser=null,this.bufferLength=0,this.canvas=t,this.width=p(i.width)||this.canvas.width,this.height=p(i.height)||this.canvas.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvasContext=this.canvas.getContext("2d"),this.canvasContext.fillStyle=p(r.fillStyle)||"rgb(255, 255, 255)",this.canvasContext.strokeStyle=p(r.strokeStyle)||"rgb(0, 0, 0)",this.canvasContext.lineWidth=p(r.lineWidth)||1,this.onDrawFrame=c(e.onDrawFrame)?e.onDrawFrame:()=>{}}addSource(t){this.streamSource=t,this.audioContext=this.streamSource.context,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.source=this.audioContext.createBufferSource(),this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.streamSource.connect(this.analyser)}draw(){const{analyser:t,dataArray:e,bufferLength:i}=this,r=this.canvasContext,o=this.width,n=this.height;t&&t.getByteTimeDomainData(e),r.fillRect(0,0,o,n),r.beginPath();const s=1*o/i;let a=0;i||r.moveTo(0,this.height/2);for(let h=0;h<i;h++){const t=e[h]/128*(n/2);0===h?r.moveTo(a,t):r.lineTo(a,t),a+=s}r.lineTo(o,n/2),r.stroke(),this.onDrawFrame(this),requestAnimationFrame(function(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}(this,d)[d])}}const m=function(t){let{onSubmit:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button uppy-Audio-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const g=function(t){let{onDiscard:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:i("discardRecordedFile"),"aria-label":i("discardRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"uppy-c-icon"},(0,r.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,r.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,r.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function v(t){const{stream:e,recordedAudio:i,onStop:o,recording:n,supportsRecording:l,audioSources:u,showAudioSourceDropdown:c,onSubmit:p,i18n:d,onStartRecording:v,onStopRecording:y,onDiscardRecordedAudio:b,recordingLengthSeconds:w}=t,S=(0,s.li)(null),x=(0,s.li)();(0,s.vJ)((()=>()=>{x.current=null,o()}),[o]),(0,s.vJ)((()=>{if(!i&&(x.current=new f(S.current,{canvas:{width:600,height:600},canvasContext:{lineWidth:2,fillStyle:"rgb(0,0,0)",strokeStyle:"green"}}),x.current.draw(),e)){const t=(new AudioContext).createMediaStreamSource(e);x.current.addSource(t)}}),[i,e]);const C=null!=i,R=!C&&l,P=c&&!C&&u&&u.length>1;return(0,r.h)("div",{className:"uppy-Audio-container"},(0,r.h)("div",{className:"uppy-Audio-audioContainer"},C?(0,r.h)("audio",{className:"uppy-Audio-player",controls:!0,src:i}):(0,r.h)("canvas",{ref:S,className:"uppy-Audio-canvas"})),(0,r.h)("div",{className:"uppy-Audio-footer"},(0,r.h)("div",{className:"uppy-Audio-audioSourceContainer"},P?(t=>{let{currentDeviceId:e,audioSources:i,onChangeSource:o}=t;return(0,r.h)("div",{className:"uppy-Audio-videoSource"},(0,r.h)("select",{className:"uppy-u-reset uppy-Audio-audioSource-select",onChange:t=>{o(t.target.value)}},i.map((t=>(0,r.h)("option",{key:t.deviceId,value:t.deviceId,selected:t.deviceId===e},t.label)))))})(t):null),(0,r.h)("div",{className:"uppy-Audio-buttonContainer"},R&&(0,r.h)(a,{recording:n,onStartRecording:v,onStopRecording:y,i18n:d}),C&&(0,r.h)(m,{onSubmit:p,i18n:d}),C&&(0,r.h)(g,{onDiscard:b,i18n:d})),(0,r.h)("div",{className:"uppy-Audio-recordingLength"},!C&&(0,r.h)(h,{recordingLengthSeconds:w,i18n:d}))))}const y=t=>{const{icon:e,hasAudio:i,i18n:o}=t;return(0,r.h)("div",{className:"uppy-Audio-permissons"},(0,r.h)("div",{className:"uppy-Audio-permissonsIcon"},e()),(0,r.h)("div",{className:"uppy-Audio-title"},o(i?"allowAudioAccessTitle":"noAudioTitle")),(0,r.h)("p",null,o(i?"allowAudioAccessDescription":"noAudioDescription")))},b={strings:{pluginNameAudio:"Audio",startAudioRecording:"Begin audio recording",stopAudioRecording:"Stop audio recording",allowAudioAccessTitle:"Please allow access to your microphone",allowAudioAccessDescription:"In order to record audio, please allow microphone access for this site.",noAudioTitle:"Microphone Not Available",noAudioDescription:"In order to record audio, please connect a microphone or another audio input device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file"}};function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},w.apply(null,arguments)}function S(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var x=0;function C(t){return"__private_"+x+++"_"+t}var R=C("recordingLengthTimer"),P=C("stream"),k=C("audioActive"),_=C("recordingChunks"),E=C("recorder"),O=C("capturedMediaFile"),A=C("mediaDevices"),T=C("supportsUserMedia"),D=C("hasAudioCheck"),U=C("start"),M=C("startRecording"),L=C("stopRecording"),j=C("discardRecordedAudio"),I=C("submit"),N=C("stop"),z=C("getAudio"),F=C("changeSource"),H=C("updateSources");class B extends o.A{constructor(t,e){super(t,e),Object.defineProperty(this,z,{value:V}),Object.defineProperty(this,D,{value:q}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:null}),Object.defineProperty(this,k,{writable:!0,value:!1}),Object.defineProperty(this,_,{writable:!0,value:null}),Object.defineProperty(this,E,{writable:!0,value:null}),Object.defineProperty(this,O,{writable:!0,value:null}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),Object.defineProperty(this,U,{writable:!0,value:t=>{if(!S(this,T)[T])return Promise.reject(new Error("Microphone access not supported"));S(this,k)[k]=!0,S(this,D)[D]().then((e=>(this.setPluginState({hasAudio:e}),S(this,A)[A].getUserMedia({audio:!0}).then((e=>{S(this,P)[P]=e;let i=null;const r=e.getAudioTracks();i=null!=t&&t.deviceId?r.findLast((e=>e.getSettings().deviceId===t.deviceId)):r[0].getSettings().deviceId,S(this,H)[H](),this.setPluginState({currentDeviceId:i,audioReady:!0})})).catch((t=>{this.setPluginState({audioReady:!1,cameraError:t}),this.uppy.info(t.message,"error")})))))}}),Object.defineProperty(this,M,{writable:!0,value:()=>{S(this,E)[E]=new MediaRecorder(S(this,P)[P]),S(this,_)[_]=[];let t=!1;S(this,E)[E].addEventListener("dataavailable",(e=>{S(this,_)[_].push(e.data);const{restrictions:i}=this.uppy.opts;if(S(this,_)[_].length>1&&null!=i.maxFileSize&&!t){const e=S(this,_)[_].reduce(((t,e)=>t+e.size),0),r=3*((e-S(this,_)[_][0].size)/(S(this,_)[_].length-1));e>Math.max(0,i.maxFileSize-r)&&(t=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),S(this,L)[L]())}})),S(this,E)[E].start(500),S(this,R)[R]=setInterval((()=>{const t=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:t+1})}),1e3),this.setPluginState({isRecording:!0})}}),Object.defineProperty(this,L,{writable:!0,value:()=>new Promise((t=>{S(this,E)[E].addEventListener("stop",(()=>{t()})),S(this,E)[E].stop(),clearInterval(S(this,R)[R]),this.setPluginState({recordingLengthSeconds:0})})).then((()=>(this.setPluginState({isRecording:!1}),S(this,z)[z]()))).then((t=>{try{S(this,O)[O]=t,this.setPluginState({recordedAudio:URL.createObjectURL(t.data)})}catch(e){e.isRestriction||this.uppy.log(e)}})).then((()=>{S(this,_)[_]=null,S(this,E)[E]=null}),(t=>{throw S(this,_)[_]=null,S(this,E)[E]=null,t}))}),Object.defineProperty(this,j,{writable:!0,value:()=>{this.setPluginState({recordedAudio:null}),S(this,O)[O]=null}}),Object.defineProperty(this,I,{writable:!0,value:()=>{try{S(this,O)[O]&&this.uppy.addFile(S(this,O)[O])}catch(t){t.isRestriction||this.uppy.log(t,"warning")}}}),Object.defineProperty(this,N,{writable:!0,value:async()=>{if(S(this,P)[P]){S(this,P)[P].getAudioTracks().forEach((t=>t.stop()))}S(this,E)[E]&&await new Promise((t=>{S(this,E)[E].addEventListener("stop",t,{once:!0}),S(this,E)[E].stop(),clearInterval(S(this,R)[R])})),S(this,_)[_]=null,S(this,E)[E]=null,S(this,k)[k]=!1,S(this,P)[P]=null,this.setPluginState({recordedAudio:null,isRecording:!1,recordingLengthSeconds:0})}}),Object.defineProperty(this,F,{writable:!0,value:t=>{S(this,N)[N](),S(this,U)[U]({deviceId:t})}}),Object.defineProperty(this,H,{writable:!0,value:()=>{S(this,A)[A].enumerateDevices().then((t=>{this.setPluginState({audioSources:t.filter((t=>"audioinput"===t.kind))})}))}}),S(this,A)[A]=navigator.mediaDevices,S(this,T)[T]=null!=S(this,A)[A],this.id=this.opts.id||"Audio",this.type="acquirer",this.icon=()=>(0,r.h)("svg",{className:"uppy-DashboardTab-iconAudio","aria-hidden":"true",focusable:"false",width:"32px",height:"32px",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M21.143 12.297c.473 0 .857.383.857.857v2.572c0 3.016-2.24 5.513-5.143 5.931v2.64h2.572a.857.857 0 110 1.714H12.57a.857.857 0 110-1.714h2.572v-2.64C12.24 21.24 10 18.742 10 15.726v-2.572a.857.857 0 111.714 0v2.572A4.29 4.29 0 0016 20.01a4.29 4.29 0 004.286-4.285v-2.572c0-.474.384-.857.857-.857zM16 6.5a3 3 0 013 3v6a3 3 0 01-6 0v-6a3 3 0 013-3z",fill:"currentcolor","fill-rule":"nonzero"})),this.defaultLocale=b,this.opts={...e},this.i18nInit(),this.title=this.i18n("pluginNameAudio"),this.setPluginState({hasAudio:!1,audioReady:!1,cameraError:null,recordingLengthSeconds:0,audioSources:[],currentDeviceId:null})}render(){S(this,k)[k]||S(this,U)[U]();const t=this.getPluginState();return t.audioReady&&t.hasAudio?(0,r.h)(v,w({},t,{onChangeSource:S(this,F)[F],onStartRecording:S(this,M)[M],onStopRecording:S(this,L)[L],onDiscardRecordedAudio:S(this,j)[j],onSubmit:S(this,I)[I],onStop:S(this,N)[N],i18n:this.i18n,showAudioSourceDropdown:this.opts.showAudioSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&"function"==typeof(null==(e=MediaRecorder.prototype)?void 0:e.start),recording:t.isRecording,stream:S(this,P)[P]})):(0,r.h)(y,{icon:this.icon,i18n:this.i18n,hasAudio:t.hasAudio});var e}install(){this.setPluginState({audioReady:!1,recordingLengthSeconds:0});const{target:t}=this.opts;t&&this.mount(t,this),S(this,A)[A]&&(S(this,H)[H](),S(this,A)[A].ondevicechange=()=>{if(S(this,H)[H](),S(this,P)[P]){let t=!0;const{audioSources:e,currentDeviceId:i}=this.getPluginState();e.forEach((e=>{i===e.deviceId&&(t=!1)})),t&&(S(this,N)[N](),S(this,U)[U]())}})}uninstall(){S(this,P)[P]&&S(this,N)[N](),this.unmount()}}function q(){return S(this,A)[A]?S(this,A)[A].enumerateDevices().then((t=>t.some((t=>"audioinput"===t.kind)))):Promise.resolve(!1)}function V(){const t=S(this,_)[_].find((t=>{var e;return(null==(e=t.type)?void 0:e.length)>0})).type,e=(0,n.A)(t);if(!e)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${t}"`));const i=`audio-${Date.now()}.${e}`,r=new Blob(S(this,_)[_],{type:t}),o={source:this.id,name:i,data:new Blob([r],{type:t}),type:t};return Promise.resolve(o)}B.VERSION="2.1.1"},89463:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameBox:"Box"}};class h extends o.A{constructor(t,e){super(t,e),this.rootFolderId=null,this.id=this.opts.id||"Box",this.type="acquirer",this.storage=this.opts.storage||r.HM,this.files=[],this.icon=()=>(0,s.h)("svg",{className:"uppy-DashboardTab-iconBox","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("g",{fill:"currentcolor",fillRule:"nonzero"},(0,s.h)("path",{d:"m16.4 13.5c-1.6 0-3 0.9-3.7 2.2-0.7-1.3-2.1-2.2-3.7-2.2-1 0-1.8 0.3-2.5 0.8v-3.6c-0.1-0.3-0.5-0.7-1-0.7s-0.8 0.4-0.8 0.8v7c0 2.3 1.9 4.2 4.2 4.2 1.6 0 3-0.9 3.7-2.2 0.7 1.3 2.1 2.2 3.7 2.2 2.3 0 4.2-1.9 4.2-4.2 0.1-2.4-1.8-4.3-4.1-4.3m-7.5 6.8c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5m7.5 0c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5"}),(0,s.h)("path",{d:"m27.2 20.6l-2.3-2.8 2.3-2.8c0.3-0.4 0.2-0.9-0.2-1.2s-1-0.2-1.3 0.2l-2 2.4-2-2.4c-0.3-0.4-0.9-0.4-1.3-0.2-0.4 0.3-0.5 0.8-0.2 1.2l2.3 2.8-2.3 2.8c-0.3 0.4-0.2 0.9 0.2 1.2s1 0.2 1.3-0.2l2-2.4 2 2.4c0.3 0.4 0.9 0.4 1.3 0.2 0.4-0.3 0.4-0.8 0.2-1.2"}))),this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.Kq(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"box",pluginId:this.id,supportsRefreshToken:!1}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameBox"),this.render=this.render.bind(this)}install(){this.view=new n.gi(this,{provider:this.provider,loadAllFiles:!0,virtualList:!0});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}render(t){return this.view.render(t)}}h.VERSION="3.2.1"},6267:(t,e,i)=>{"use strict";i.d(e,{Kq:()=>N,R0:()=>_,YL:()=>H,cP:()=>T,HM:()=>r});var r={};i.r(r),i.d(r,{getItem:()=>q,removeItem:()=>V,setItem:()=>B});class o extends Error{constructor(){super(...arguments),this.name="UserFacingApiError"}}const n=o;var s=i(75617);const a=Object.prototype.toString,h=t=>"[object Error]"===a.call(t),l=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);class u extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,({message:t}=t)):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const c=(t,e,i)=>{const r=i.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t};async function p(t,e){return new Promise(((i,r)=>{e={onFailedAttempt(){},retries:10,shouldRetry:()=>!0,...e};const o=s.operation(e),n=()=>{o.stop(),r(e.signal?.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",n,{once:!0});const a=()=>{e.signal?.removeEventListener("abort",n),o.stop()};o.attempt((async n=>{try{const e=await t(n);a(),i(e)}catch(s){try{if(!(s instanceof Error))throw new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`);if(s instanceof u)throw s.originalError;if(s instanceof TypeError&&!function(t){return!(!t||!h(t)||"TypeError"!==t.name||"string"!=typeof t.message)&&("Load failed"===t.message?void 0===t.stack:l.has(t.message))}(s))throw s;if(c(s,n,e),await e.shouldRetry(s)||(o.stop(),r(s)),await e.onFailedAttempt(s),!o.retry(s))throw o.mainError()}catch(p){c(p,n,e),a(),r(p)}}}))}))}var d=i(52094);var f=i(61825);class m extends Error{constructor(t,e){super(t),this.cause=null==e?void 0:e.cause,this.cause&&(0,f.A)(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}const g=m;class v extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}const y=v;function b(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var w=0;function S(t){return"__private_"+w+++"_"+t}class x extends Error{constructor(t){let{statusCode:e,message:i}=t;super(i),this.name="HttpError",this.statusCode=e}}var C=S("companionHeaders"),R=S("getUrl"),P=S("requestSocketToken"),k=S("awaitRemoteFileUpload");class _{constructor(t,e){Object.defineProperty(this,k,{value:O}),Object.defineProperty(this,R,{value:E}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:async t=>{var e;let{file:i,postBody:r,signal:o}=t;if(null==(null==(e=i.remote)?void 0:e.url))throw new Error("Cannot connect to an undefined URL");return(await this.post(i.remote.url,{...i.remote.body,...r},{signal:o})).token}}),this.uppy=t,this.opts=e,this.onReceiveResponse=this.onReceiveResponse.bind(this),b(this,C)[C]=e.companionHeaders}setCompanionHeaders(t){b(this,C)[C]=t}[Symbol.for("uppy test: getCompanionHeaders")](){return b(this,C)[C]}get hostname(){const{companion:t}=this.uppy.getState(),e=this.opts.companionUrl;return(t&&t[e]?t[e]:e).replace(/\/$/,"")}async headers(t){void 0===t&&(t=!1);return{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...b(this,C)[C]}}onReceiveResponse(t){const{headers:e}=t,i=this.uppy.getState().companion||{},r=this.opts.companionUrl;e.has("i-am")&&e.get("i-am")!==i[r]&&this.uppy.setState({companion:{...i,[r]:e.get("i-am")}})}async request(t){let{path:e,method:i="GET",data:r,skipPostResponse:o,signal:s}=t;try{const t=await this.headers(!r),a=await function(){return fetch(...arguments).catch((t=>{throw"AbortError"===t.name?t:new d.A(t)}))}(b(this,R)[R](e),{method:i,signal:s,headers:t,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return o||this.onReceiveResponse(a),await async function(t){if(401===t.status)throw new y;if(t.ok)return t.json();let e,i=`Failed request with status: ${t.status}. ${t.statusText}`;try{e=await t.json(),e.message&&(i=`${i} message: ${e.message}`),e.requestId&&(i=`${i} request-Id: ${e.requestId}`)}catch(r){throw new Error(i,{cause:r})}if(t.status>=400&&t.status<=499&&e.message)throw new n(e.message);throw new x({statusCode:t.status,message:i})}(a)}catch(a){if(a.isAuthError||"UserFacingApiError"===a.name||"AbortError"===a.name)throw a;throw new g(`Could not ${i} ${b(this,R)[R](e)}`,{cause:a})}}async get(t,e){return this.request({...e,path:t})}async post(t,e,i){return this.request({...i,path:t,method:"POST",data:e})}async delete(t,e,i){return this.request({...i,path:t,method:"DELETE",data:e})}async uploadRemoteFile(t,e,i){var r=this;try{const{signal:o,getQueue:n}=i||{};return await p((async()=>{var i;const s=null==(i=this.uppy.getFile(t.id))?void 0:i.serverToken;if(null!=s)return this.uppy.log(`Connecting to exiting websocket ${s}`),b(this,k)[k]({file:t,queue:n(),signal:o});const a=n().wrapPromiseFunction((async function(){try{return await b(r,P)[P](...arguments)}catch(t){if(t.isAuthError)throw new u(t);if(null==t.cause)throw t;const e=t.cause,i=()=>[408,409,429,418,423].includes(e.statusCode)||e.statusCode>=500&&e.statusCode<=599&&![501,505].includes(e.statusCode);if("HttpError"===e.name&&!i())throw new u(e);throw e}}),{priority:-1}),h=await a({file:t,postBody:e,signal:o}).abortOn(o);return this.uppy.getFile(t.id)?(this.uppy.setFileState(t.id,{serverToken:h}),b(this,k)[k]({file:this.uppy.getFile(t.id),queue:n(),signal:o})):void 0}),{retries:10,signal:o,onFailedAttempt:t=>this.uppy.log(`Retrying upload due to: ${t.message}`,"warning")})}catch(o){if("AbortError"===o.name)return;throw this.uppy.emit("upload-error",t,o),o}}}function E(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`}async function O(t){let e,{file:i,queue:r,signal:o}=t;const{capabilities:n}=this.uppy.getState();try{return await new Promise(((t,s)=>{const a=i.serverToken,h=function(t){var e;const i=null==(e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(t))?void 0:e[1];return`${/^http:\/\//i.test(t)?"ws":"wss"}://${i}`}(i.remote.companionUrl);let l,u,c,{isPaused:d}=i;const f=(t,e)=>{var r;null!=l&&l.readyState===l.OPEN?l.send(JSON.stringify({action:t,payload:null!=e?e:{}})):this.uppy.log(`Cannot send "${t}" to socket ${i.id} because the socket state was ${String(null==(r=l)?void 0:r.readyState)}`,"warning")};function m(){n.resumableUploads&&f(d?"pause":"resume")}const g=t=>{n.resumableUploads&&(d=t,l&&m())},v=e=>{var r;n.individualCancellation&&e.id===i.id&&(f("cancel"),null==(r=u)||null==r.abort||r.abort(),this.uppy.log(`upload ${i.id} was removed`),t())},y=()=>{var e;f("cancel"),null==(e=u)||null==e.abort||e.abort(),this.uppy.log(`upload ${i.id} was canceled`),t()},b=(t,e)=>{(null==t?void 0:t.id)===i.id&&g(e)},w=()=>g(!0),S=()=>g(!1);this.uppy.on("file-removed",v),this.uppy.on("cancel-all",y),this.uppy.on("upload-pause",b),this.uppy.on("pause-all",w),this.uppy.on("resume-all",S),e=()=>{this.uppy.off("file-removed",v),this.uppy.off("cancel-all",y),this.uppy.off("upload-pause",b),this.uppy.off("pause-all",w),this.uppy.off("resume-all",S)},o.addEventListener("abort",(()=>{var t;null==(t=u)||t.abort()})),(async()=>{u&&u.abort(),u=new AbortController;const e=t=>{var e;this.uppy.setFileState(i.id,{serverToken:null}),null==(e=u)||null==e.abort||e.abort(),s(t)};function o(){clearTimeout(c),d||(c=setTimeout((()=>e(new Error("Timeout waiting for message from Companion socket"))),3e5))}try{await r.wrapPromiseFunction((async()=>{await p((async()=>new Promise(((r,n)=>{l=new WebSocket(`${h}/api/${a}`),o(),l.addEventListener("close",(()=>{l=void 0,n(new Error("Socket closed unexpectedly"))})),l.addEventListener("error",(t=>{var e;this.uppy.log(`Companion socket error ${JSON.stringify(t)}, closing socket`,"warning"),null==(e=l)||e.close()})),l.addEventListener("open",(()=>{m()})),l.addEventListener("message",(r=>{o();try{const{action:e,payload:o}=JSON.parse(r.data);switch(e){case"progress":!function(t,e,i){const{progress:r,bytesUploaded:o,bytesTotal:n}=e;var s;r&&(t.uppy.log(`Upload progress: ${r}`),t.uppy.emit("upload-progress",i,{uploadStarted:null!=(s=i.progress.uploadStarted)?s:0,bytesUploaded:o,bytesTotal:n}))}(this,o,this.uppy.getFile(i.id));break;case"success":{var n,s,a,h;const e=null==(n=o.response)?void 0:n.responseText;this.uppy.emit("upload-success",this.uppy.getFile(i.id),{uploadURL:o.url,status:null!=(s=null==(a=o.response)?void 0:a.status)?s:200,body:e?JSON.parse(e):void 0}),null==(h=u)||null==h.abort||h.abort(),t();break}case"error":{const{message:t}=o.error;throw Object.assign(new Error(t),{cause:o.error})}default:this.uppy.log(`Companion socket unknown action ${e}`,"warning")}}catch(l){e(l)}}));const s=()=>{this.uppy.log(`Closing socket ${i.id}`),clearTimeout(c),l&&l.close(),l=void 0};u.signal.addEventListener("abort",(()=>{s()}))}))),{retries:10,signal:u.signal,onFailedAttempt:()=>{u.signal.aborted||this.uppy.log(`Retrying websocket ${i.id}`)}})}))().abortOn(u.signal)}catch(n){if(u.signal.aborted)return;e(n)}})()}))}finally{null==e||e()}}function A(t){return"string"==typeof t?new RegExp(`^${t}$`):t instanceof RegExp?t:void 0}function T(t,e){if(t){const e=t=>{if(!("string"==typeof t&&A(t)||t instanceof RegExp))throw new TypeError('The option "companionAllowedHosts" must be one of string, Array, RegExp')};return Array.isArray(t)?t.every(e):e(t),t}let i=e;return/^(?!https?:\/\/).*$/i.test(i)&&(i=`https://${e.replace(/^\/\//,"")}`),i=new URL(i).origin,i=i.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&"),i}function D(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}_.VERSION="4.4.1";var U=0;function M(t){return"__private_"+U+++"_"+t}var L=M("refreshingTokenPromise"),j=M("getAuthToken"),I=M("getPlugin");class N extends _{constructor(t,e){super(t,e),Object.defineProperty(this,I,{value:F}),Object.defineProperty(this,j,{value:z}),Object.defineProperty(this,L,{writable:!0,value:void 0}),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||(t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "))(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null,this.supportsRefreshToken=!!e.supportsRefreshToken}async headers(){const[t,e]=await Promise.all([super.headers(),D(this,j)[j]()]),i={};return e&&(i["uppy-auth-token"]=e),this.companionKeysParams&&(i["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...t,...i}}onReceiveResponse(t){super.onReceiveResponse(t);const e=D(this,I)[I](),i=e.getPluginState().authenticated?401!==t.status:t.status<400;return e.setPluginState({authenticated:i}),t}async setAuthToken(t){return D(this,I)[I]().storage.setItem(this.tokenKey,t)}async removeAuthToken(){return D(this,I)[I]().storage.removeItem(this.tokenKey)}async ensurePreAuth(){if(this.companionKeysParams&&!this.preAuthToken&&(await this.fetchPreAuthToken(),!this.preAuthToken))throw new Error("Could not load authentication data required for third-party login. Please try again later.")}authQuery(t){return{}}authUrl(t){let{authFormData:e,query:i}=t;const r=new URLSearchParams({...i,state:btoa(JSON.stringify({origin:location.origin})),...this.authQuery({authFormData:e})});return this.preAuthToken&&r.set("uppyPreAuthToken",this.preAuthToken),`${this.hostname}/${this.id}/connect?${r}`}async loginSimpleAuth(t){let{uppyVersions:e,authFormData:i,signal:r}=t;const o=await this.post(`${this.id}/simple-auth`,{form:i},{qs:{uppyVersions:e},signal:r});this.setAuthToken(o.uppyAuthToken)}async loginOAuth(t){let{uppyVersions:e,authFormData:i,signal:r}=t;return await this.ensurePreAuth(),r.throwIfAborted(),new Promise(((t,o)=>{const n=this.authUrl({query:{uppyVersions:e},authFormData:i}),s=window.open(n,"_blank");let a;const h=e=>{if(e.source!==s){let t="";try{t=JSON.stringify(e.data)}catch(l){}return void this.uppy.log(`ignoring event from unknown source ${t}`,"warning")}const{companionAllowedHosts:i}=D(this,I)[I]().opts;if(r=e.origin,n=i,!(Array.isArray(n)?n.map(A):[A(n)]).some((t=>(null==t?void 0:t.test(r))||(null==t?void 0:t.test(`${r}/`)))))return void o(new Error(`rejecting event from ${e.origin} vs allowed pattern ${i}`));var r,n;const h="string"==typeof e.data?JSON.parse(e.data):e.data;if(h.error){const{uppy:t}=this,e=t.i18n("authAborted");return t.info({message:e},"warning",5e3),void o(new Error("auth aborted"))}h.token?(a(),t(this.setAuthToken(h.token))):o(new Error("did not receive token from auth window"))};a=()=>{null==s||s.close(),window.removeEventListener("message",h),r.removeEventListener("abort",a)},r.addEventListener("abort",a),window.addEventListener("message",h)}))}async login(t){let{uppyVersions:e,authFormData:i,signal:r}=t;return this.loginOAuth({uppyVersions:e,authFormData:i,signal:r})}refreshTokenUrl(){return`${this.hostname}/${this.id}/refresh-token`}fileUrl(t){return`${this.hostname}/${this.id}/get/${t}`}async request(){await D(this,L)[L];try{return await super.request(...arguments)}catch(t){if(!this.supportsRefreshToken)throw t;const e=await D(this,j)[j]();if(!t.isAuthError||!e)throw t;return null==D(this,L)[L]&&(D(this,L)[L]=(async()=>{try{this.uppy.log("[CompanionClient] Refreshing expired auth token");const t=await super.request({path:this.refreshTokenUrl(),method:"POST"});await this.setAuthToken(t.uppyAuthToken)}catch(e){throw e.isAuthError&&await this.removeAuthToken(),t}finally{D(this,L)[L]=void 0}})()),await D(this,L)[L],super.request(...arguments)}}async fetchPreAuthToken(){if(this.companionKeysParams)try{const t=await this.post(`${this.id}/preauth/`,{params:this.companionKeysParams});this.preAuthToken=t.token}catch(t){this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${t}`,"warning")}}list(t,e){return this.get(`${this.id}/list/${t||""}`,e)}async logout(t){const e=await this.get(`${this.id}/logout`,t);return await this.removeAuthToken(),e}}async function z(){return D(this,I)[I]().storage.getItem(this.tokenKey)}function F(){const t=this.uppy.getPlugin(this.pluginId);if(null==t)throw new Error("Plugin was nullish");return t}class H extends _{constructor(t,e){super(t,e),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||(t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "))(this.id),this.pluginId=this.opts.pluginId}fileUrl(t){return`${this.hostname}/search/${this.id}/get/${t}`}search(t,e){return this.get(`search/${this.id}/list?q=${encodeURIComponent(t)}${e?`&${e}`:""}`)}}async function B(t,e){localStorage.setItem(t,e)}async function q(t){return localStorage.getItem(t)}async function V(t){localStorage.removeItem(t)}},30110:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameDropbox:"Dropbox"}};class h extends o.A{constructor(t,e){super(t,e),this.rootFolderId=null,this.id=this.opts.id||"Dropbox",this.type="acquirer",this.storage=this.opts.storage||r.HM,this.files=[],this.icon=()=>(0,s.h)("svg",{className:"uppy-DashboardTab-iconDropbox","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("path",{d:"M10.5 7.5L5 10.955l5.5 3.454 5.5-3.454 5.5 3.454 5.5-3.454L21.5 7.5 16 10.955zM10.5 21.319L5 17.864l5.5-3.455 5.5 3.455zM16 17.864l5.5-3.455 5.5 3.455-5.5 3.455zM16 25.925l-5.5-3.455 5.5-3.454 5.5 3.454z",fill:"currentcolor",fillRule:"nonzero"})),this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.Kq(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"dropbox",pluginId:this.id,supportsRefreshToken:!0}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameDropbox"),this.render=this.render.bind(this)}install(){this.view=new n.gi(this,{provider:this.provider,loadAllFiles:!0,virtualList:!0});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}render(t){return this.view.render(t)}}h.VERSION="4.2.1"},98166:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameFacebook:"Facebook"}};class h extends o.A{constructor(t,e){super(t,e),this.rootFolderId=null,this.id=this.opts.id||"Facebook",this.type="acquirer",this.storage=this.opts.storage||r.HM,this.files=[],this.icon=()=>(0,s.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("g",{fill:"none",fillRule:"evenodd"},(0,s.h)("path",{d:"M27 16c0-6.075-4.925-11-11-11S5 9.925 5 16c0 5.49 4.023 10.041 9.281 10.866V19.18h-2.793V16h2.793v-2.423c0-2.757 1.642-4.28 4.155-4.28 1.204 0 2.462.215 2.462.215v2.707h-1.387c-1.366 0-1.792.848-1.792 1.718V16h3.05l-.487 3.18h-2.563v7.686C22.977 26.041 27 21.49 27 16",fill:"#1777F2"}),(0,s.h)("path",{d:"M20.282 19.18L20.77 16h-3.051v-2.063c0-.87.426-1.718 1.792-1.718h1.387V9.512s-1.258-.215-2.462-.215c-2.513 0-4.155 1.523-4.155 4.28V16h-2.793v3.18h2.793v7.686a11.082 11.082 0 003.438 0V19.18h2.563",fill:"#FFFFFE"}))),this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.Kq(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"facebook",pluginId:this.id,supportsRefreshToken:!1}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameFacebook"),this.render=this.render.bind(this)}install(){this.view=new n.gi(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}render(t){const{partialTree:e,currentFolderId:i}=this.getPluginState();return 0===e.filter((t=>"folder"===t.type&&t.parentId===i)).length?this.view.render(t,{viewType:"grid",showFilter:!1,showTitles:!1}):this.view.render(t)}}h.VERSION="4.2.1"},83575:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var r=i(50172),o=i(86855),n=i(38469),s=i(80753),a=i(6267);const h={strings:{pluginNameGoogleDrivePicker:"Google Drive"}};var l;class u extends o.A{constructor(t,e){super(t,e),this.type="acquirer",this.icon=s.R,this.defaultLocale=h,this.handleFilesPicked=async(t,e)=>{this.uppy.addFiles(t.map((t=>{let{id:i,mimeType:r,name:o,...n}=t;return{source:this.id,name:o,type:r,data:{size:null},isRemote:!0,remote:{companionUrl:this.opts.companionUrl,url:`${this.opts.companionUrl}/google-picker/get`,body:{fileId:i,accessToken:e,...n},requestClientId:u.requestClientId}}})))},this.render=()=>(0,r.h)(n.HL,{storage:this.storage,pickerType:"drive",uppy:this.uppy,i18n:this.i18n,clientId:this.opts.clientId,apiKey:this.opts.apiKey,appId:this.opts.appId,onFilesPicked:this.handleFilesPicked}),this.id=this.opts.id||"GoogleDrivePicker",this.storage=this.opts.storage||a.HM,this.defaultLocale=h,this.i18nInit(),this.title=this.i18n("pluginNameGoogleDrivePicker");const i=new a.R0(t,{pluginId:this.id,provider:"url",companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule});this.uppy.registerRequestClient(u.requestClientId,i)}install(){const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.unmount()}}l=u,u.VERSION="0.3.3",u.requestClientId=l.name},12274:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var r=i(50172),o=i(86855),n=i(38469),s=i(80753),a=i(6267);const h={strings:{pluginNameGooglePhotosPicker:"Google Photos"}};var l;class u extends o.A{constructor(t,e){super(t,e),this.type="acquirer",this.icon=s.m,this.defaultLocale=h,this.handleFilesPicked=async(t,e)=>{this.uppy.addFiles(t.map((t=>{let{id:i,mimeType:r,name:o,...n}=t;return{source:this.id,name:o,type:r,data:{size:null},isRemote:!0,remote:{companionUrl:this.opts.companionUrl,url:`${this.opts.companionUrl}/google-picker/get`,body:{fileId:i,accessToken:e,...n},requestClientId:u.requestClientId}}})))},this.render=()=>(0,r.h)(n.HL,{storage:this.storage,pickerType:"photos",uppy:this.uppy,i18n:this.i18n,clientId:this.opts.clientId,onFilesPicked:this.handleFilesPicked}),this.id=this.opts.id||"GooglePhotosPicker",this.storage=this.opts.storage||a.HM,this.defaultLocale=h,this.i18nInit(),this.title=this.i18n("pluginNameGooglePhotosPicker");const i=new a.R0(t,{pluginId:this.id,provider:"url",companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule});this.uppy.registerRequestClient(u.requestClientId,i)}install(){const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.unmount()}}l=u,u.VERSION="0.3.3",u.requestClientId=l.name},66109:(t,e,i)=>{"use strict";i.d(e,{A:()=>m});var r=i(86855),o=i(50172),n=i(65643);const s=function(t,e){const i=t.width/e.width,r=t.height/e.height,o=Math.min(i,r),n=e.width*o,s=e.height*o;return{width:n,height:s,left:(t.width-n)/2,top:(t.height-s)/2}};const a=function(t,e,i){const r=Math.abs(i*(Math.PI/180));return Math.max((Math.sin(r)*t+Math.cos(r)*e)/e,(Math.sin(r)*e+Math.cos(r)*t)/t)};const h=function(t,e,i){return e.left<t.left?{left:t.left,width:i.width}:e.top<t.top?{top:t.top,height:i.height}:e.left+e.width>t.left+t.width?{left:t.left+t.width-i.width,width:i.width}:e.top+e.height>t.top+t.height?{top:t.top+t.height-i.height,height:i.height}:null};const l=function(t,e,i){return e.left<t.left?{left:t.left,width:i.left+i.width-t.left}:e.top<t.top?{top:t.top,height:i.top+i.height-t.top}:e.left+e.width>t.left+t.width?{left:i.left,width:t.left+t.width-i.left}:e.top+e.height>t.top+t.height?{top:i.top,height:t.top+t.height-i.top}:null};class u extends o.uA{constructor(t){super(t),this.onRotate90Deg=()=>{const{angle90Deg:t}=this.state,e=t-90;this.setState({angle90Deg:e,angleGranular:0}),this.cropper.scale(1),this.cropper.rotateTo(e);const i=this.cropper.getCanvasData(),r=this.cropper.getContainerData(),o=s(r,i);this.cropper.setCanvasData(o),this.cropper.setCropBoxData(o)},this.onRotateGranular=t=>{const e=Number(t.target.value);this.setState({angleGranular:e});const{angle90Deg:i}=this.state,r=i+e;this.cropper.rotateTo(r);const o=this.cropper.getImageData(),n=a(o.naturalWidth,o.naturalHeight,e),s=this.cropper.getImageData().scaleX<0?-n:n;this.cropper.scale(s,n)},this.state={angle90Deg:0,angleGranular:0,prevCropboxData:null},this.storePrevCropboxData=this.storePrevCropboxData.bind(this),this.limitCropboxMovement=this.limitCropboxMovement.bind(this)}componentDidMount(){const{opts:t,storeCropperInstance:e}=this.props;this.cropper=new n(this.imgElement,t.cropperOptions),this.imgElement.addEventListener("cropstart",this.storePrevCropboxData),this.imgElement.addEventListener("cropend",this.limitCropboxMovement),e(this.cropper)}componentWillUnmount(){this.cropper.destroy(),this.imgElement.removeEventListener("cropstart",this.storePrevCropboxData),this.imgElement.removeEventListener("cropend",this.limitCropboxMovement)}storePrevCropboxData(){this.setState({prevCropboxData:this.cropper.getCropBoxData()})}limitCropboxMovement(t){const e=this.cropper.getCanvasData(),i=this.cropper.getCropBoxData(),{prevCropboxData:r}=this.state;if("all"===t.detail.action){const t=h(e,i,r);t&&this.cropper.setCropBoxData(t)}else{const t=l(e,i,r);t&&this.cropper.setCropBoxData(t)}}renderGranularRotate(){const{i18n:t}=this.props,{angleGranular:e}=this.state;return(0,o.h)("label",{role:"tooltip","aria-label":`${e}\xba`,"data-microtip-position":"top",className:"uppy-ImageCropper-rangeWrapper"},(0,o.h)("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.onRotateGranular,onChange:this.onRotateGranular,value:e,min:"-45",max:"45","aria-label":t("rotate")}))}renderRevert(){const{i18n:t,opts:e}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("revert"),onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(e.cropperOptions.initialAspectRatio),this.setState({angle90Deg:0,angleGranular:0})}},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,o.h)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("rotate"),onClick:this.onRotate90Deg},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),(0,o.h)("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("flipHorizontal"),onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,o.h)("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomIn"),onClick:()=>this.cropper.zoom(.1)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},(0,o.h)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,o.h)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),(0,o.h)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomOut"),onClick:()=>this.cropper.zoom(-.1)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,o.h)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioSquare"),onClick:()=>this.cropper.setAspectRatio(1)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,o.h)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioLandscape"),onClick:()=>this.cropper.setAspectRatio(16/9)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),(0,o.h)("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){const{i18n:t}=this.props;return(0,o.h)("button",{role:"button tooltip","data-microtip-position":"top",type:"button","aria-label":t("aspectRatioPortrait"),className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.setAspectRatio(9/16)},(0,o.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,o.h)("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),(0,o.h)("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){const{currentImage:t,opts:e}=this.props,{actions:i}=e,r=URL.createObjectURL(t.data);return(0,o.h)("div",{className:"uppy-ImageCropper"},(0,o.h)("div",{className:"uppy-ImageCropper-container"},(0,o.h)("img",{className:"uppy-ImageCropper-image",alt:t.name,src:r,ref:t=>{this.imgElement=t}})),(0,o.h)("div",{className:"uppy-ImageCropper-controls"},i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.granularRotate&&this.renderGranularRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}}const c={strings:{revert:"Reset",rotate:"Rotate 90\xb0",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontally",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}},p={viewMode:0,background:!1,autoCropArea:1,responsive:!0,minCropBoxWidth:70,minCropBoxHeight:70,croppedCanvasOptions:{},initialAspectRatio:0},d={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},f={quality:.8,actions:d,cropperOptions:p};class m extends r.A{constructor(t,e){super(t,{...f,...e,actions:{...d,...null==e?void 0:e.actions},cropperOptions:{...p,...null==e?void 0:e.cropperOptions}}),this.save=()=>{const{currentImage:t}=this.getPluginState(),e=this.cropper.getCroppedCanvas({});e.width%2!=0&&this.cropper.setData({width:e.width-1}),e.height%2!=0&&this.cropper.setData({height:e.height-1}),this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob((t=>{var e;const{currentImage:i}=this.getPluginState();this.uppy.setFileState(i.id,{data:new File([t],null!=(e=i.name)?e:this.i18n("unnamed"),{type:t.type}),size:t.size,preview:void 0});const r=this.uppy.getFile(i.id);this.uppy.emit("thumbnail:request",r),this.setPluginState({currentImage:r}),this.uppy.emit("file-editor:complete",r)}),t.type,this.opts.quality)},this.storeCropperInstance=t=>{this.cropper=t},this.selectFile=t=>{this.uppy.emit("file-editor:start",t),this.setPluginState({currentImage:t})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=c,this.i18nInit()}canEditFile(t){if(!t.type||t.isRemote)return!1;const e=t.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(e)}install(){this.setPluginState({currentImage:null});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){const{currentImage:t}=this.getPluginState();if(t){const e=this.uppy.getFile(t.id);this.uppy.emit("file-editor:cancel",e)}this.unmount()}render(){const{currentImage:t}=this.getPluginState();return null===t||t.isRemote?null:(0,o.h)(u,{currentImage:t,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}}m.VERSION="3.3.1"},54222:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameOneDrive:"OneDrive"}};class h extends o.A{constructor(t,e){super(t,e),this.rootFolderId=null,this.type="acquirer",this.files=[],this.storage=this.opts.storage||r.HM,this.id=this.opts.id||"OneDrive",this.icon=()=>(0,s.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("g",{fill:"none",fillRule:"nonzero"},(0,s.h)("path",{d:"M13.39 12.888l4.618 2.747 2.752-1.15a4.478 4.478 0 012.073-.352 6.858 6.858 0 00-5.527-5.04 6.895 6.895 0 00-6.876 2.982l.07-.002a5.5 5.5 0 012.89.815z",fill:"#0364B8"}),(0,s.h)("path",{d:"M13.39 12.887v.001a5.5 5.5 0 00-2.89-.815l-.07.002a5.502 5.502 0 00-4.822 2.964 5.43 5.43 0 00.38 5.62l4.073-1.702 1.81-.757 4.032-1.685 2.105-.88-4.619-2.748z",fill:"#0078D4"}),(0,s.h)("path",{d:"M22.833 14.133a4.479 4.479 0 00-2.073.352l-2.752 1.15.798.475 2.616 1.556 1.141.68 3.902 2.321a4.413 4.413 0 00-.022-4.25 4.471 4.471 0 00-3.61-2.284z",fill:"#1490DF"}),(0,s.h)("path",{d:"M22.563 18.346l-1.141-.68-2.616-1.556-.798-.475-2.105.88L11.87 18.2l-1.81.757-4.073 1.702A5.503 5.503 0 0010.5 23h12.031a4.472 4.472 0 003.934-2.333l-3.902-2.321z",fill:"#28A8EA"}))),this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.Kq(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"onedrive",pluginId:this.id,supportsRefreshToken:!1}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameOneDrive"),this.render=this.render.bind(this)}install(){this.view=new n.gi(this,{provider:this.provider,loadAllFiles:!0,virtualList:!0});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}render(t){return this.view.render(t)}}h.VERSION="4.2.2"},16687:(t,e,i)=>{"use strict";i.d(e,{A:()=>y});var r=i(50172),o=i(86855),n=i(79885);function s(){return(0,r.h)("svg",{className:"uppy-DashboardTab-iconScreenRec","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("g",{fill:"currentcolor",fillRule:"evenodd"},(0,r.h)("path",{d:"M24.182 9H7.818C6.81 9 6 9.742 6 10.667v10c0 .916.81 1.666 1.818 1.666h4.546V24h7.272v-1.667h4.546c1 0 1.809-.75 1.809-1.666l.009-10C26 9.742 25.182 9 24.182 9zM24 21H8V11h16v10z"}),(0,r.h)("circle",{cx:"16",cy:"16",r:"2"})))}function a(t){let{recording:e,onStartRecording:i,onStopRecording:o,i18n:n}=t;return e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video uppy-ScreenCapture-button--stop-rec",type:"button",title:n("stopCapturing"),"aria-label":n("stopCapturing"),onClick:o,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video",type:"button",title:n("startCapturing"),"aria-label":n("startCapturing"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("circle",{cx:"50",cy:"50",r:"40"})))}function h(t){let{recording:e,recordedVideo:i,onSubmit:o,i18n:n}=t;return i&&!e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--submit",type:"button",title:n("submitRecordedFile"),"aria-label":n("submitRecordedFile"),onClick:o,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"}))):null}class l extends r.uA{constructor(t){super(t),this.wrapperStyle={width:"100%",height:"100%",display:"flex"},this.overlayStyle={position:"absolute",width:"100%",height:"100%",background:"black",opacity:.7},this.infoContainerStyle={marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBottom:"auto",zIndex:1,color:"white"},this.infotextStyle={marginLeft:"auto",marginRight:"auto",marginBottom:"1rem",fontSize:"1.5rem"},this.timeStyle={display:"block",fontWeight:"bold",marginLeft:"auto",marginRight:"auto",fontSize:"3rem",fontFamily:"Courier New"},this.timerRunning=!1,this.state={elapsedTime:0}}startTimer(){this.timerTick(),this.timerRunning=!0}resetTimer(){clearTimeout(this.timer),this.setState({elapsedTime:0}),this.timerRunning=!1}timerTick(){this.timer=setTimeout((()=>{this.setState((t=>({elapsedTime:t.elapsedTime+1}))),this.timerTick()}),1e3)}render(){const{recording:t,i18n:e}={...this.props},{elapsedTime:i}=this.state,o=((n=i)-(n%=60))/60+(n>9?":":":0")+n;var n;return t&&!this.timerRunning&&this.startTimer(),!t&&this.timerRunning&&this.resetTimer(),t?(0,r.h)("div",{style:this.wrapperStyle},(0,r.h)("div",{style:this.overlayStyle}),(0,r.h)("div",{style:this.infoContainerStyle},(0,r.h)("div",{style:this.infotextStyle},e("recording")),(0,r.h)("div",{style:this.timeStyle},o))):null}}const u=l;function c(t){let{streamActive:e,i18n:i}=t;return e?(0,r.h)("div",{title:i("streamActive"),"aria-label":i("streamActive"),className:"uppy-ScreenCapture-icon--stream uppy-ScreenCapture-icon--streamActive"},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},(0,r.h)("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),(0,r.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.h)("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))):(0,r.h)("div",{title:i("streamPassive"),"aria-label":i("streamPassive"),className:"uppy-ScreenCapture-icon--stream"},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},(0,r.h)("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),(0,r.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.h)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"})))}function p(){return p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},p.apply(null,arguments)}class d extends r.uA{constructor(){super(...arguments),this.videoElement=null}componentWillUnmount(){const{onStop:t}=this.props;t()}render(){const{recording:t,stream:e,recordedVideo:i}=this.props,o={playsinline:!0};return(t||!i&&!t)&&(o.muted=!0,o.autoplay=!0,o.srcObject=e),i&&!t&&(o.muted=!1,o.controls=!0,o.src=i,this.videoElement&&(this.videoElement.srcObject=null)),(0,r.h)("div",{className:"uppy uppy-ScreenCapture-container"},(0,r.h)("div",{className:"uppy-ScreenCapture-videoContainer"},(0,r.h)(c,this.props),(0,r.h)("video",p({ref:t=>{this.videoElement=t},className:"uppy-ScreenCapture-video"},o)),(0,r.h)(u,this.props)),(0,r.h)("div",{className:"uppy-ScreenCapture-buttonContainer"},(0,r.h)(a,this.props),(0,r.h)(h,this.props)))}}const f=d,m={strings:{pluginNameScreenCapture:"Screencast",startCapturing:"Begin screen capturing",stopCapturing:"Stop screen capturing",submitRecordedFile:"Submit recorded file",streamActive:"Stream active",streamPassive:"Stream passive",micDisabled:"Microphone access denied by user",recording:"Recording"}};function g(){return g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},g.apply(null,arguments)}const v={displayMediaConstraints:{video:{width:1280,height:720,frameRate:{ideal:3,max:5},cursor:"motion",displaySurface:"monitor"}},userMediaConstraints:{audio:!0},preferredVideoMimeType:"video/webm"};class y extends o.A{constructor(t,e){super(t,{...v,...e}),this.videoStream=null,this.audioStream=null,this.userDenied=!1,this.recorder=null,this.outputStream=null,this.recordingChunks=null,this.mediaDevices=window.MediaRecorder&&navigator.mediaDevices,this.protocol="https:"===location.protocol?"https":"http",this.id=this.opts.id||"ScreenCapture",this.type="acquirer",this.icon=s,this.defaultLocale=m,this.i18nInit(),this.title=this.i18n("pluginNameScreenCapture"),this.install=this.install.bind(this),this.setPluginState=this.setPluginState.bind(this),this.render=this.render.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.startRecording=this.startRecording.bind(this),this.stopRecording=this.stopRecording.bind(this),this.submit=this.submit.bind(this),this.streamInterrupted=this.streamInactivated.bind(this),this.captureActive=!1,this.capturedMediaFile=null}install(){if(!window.MediaRecorder||!(null==(t=navigator.mediaDevices)?void 0:t.getDisplayMedia))return this.uppy.log("Screen recorder access is not supported","warning"),null;var t;this.setPluginState({streamActive:!1,audioStreamActive:!1});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.videoStream&&this.stop(),this.unmount()}start(){return this.mediaDevices?(this.captureActive=!0,this.selectAudioStreamSource(),this.selectVideoStreamSource().then((t=>{!1===t&&this.parent&&this.parent.hideAllPanels&&(this.parent.hideAllPanels(),this.captureActive=!1)}))):Promise.reject(new Error("Screen recorder access not supported"))}selectVideoStreamSource(){return this.videoStream?new Promise((t=>t(this.videoStream))):this.mediaDevices.getDisplayMedia(this.opts.displayMediaConstraints).then((t=>(this.videoStream=t,this.videoStream.addEventListener("inactive",(()=>{this.streamInactivated()})),this.setPluginState({streamActive:!0}),t))).catch((t=>(this.setPluginState({screenRecError:t}),this.userDenied=!0,setTimeout((()=>{this.userDenied=!1}),1e3),!1)))}selectAudioStreamSource(){return this.audioStream?new Promise((t=>t(this.audioStream))):this.mediaDevices.getUserMedia(this.opts.userMediaConstraints).then((t=>(this.audioStream=t,this.setPluginState({audioStreamActive:!0}),t))).catch((t=>("NotAllowedError"===t.name&&(this.uppy.info(this.i18n("micDisabled"),"error",5e3),this.uppy.log(this.i18n("micDisabled"),"warning")),!1)))}startRecording(){const t={};this.capturedMediaFile=null,this.recordingChunks=[];const{preferredVideoMimeType:e}=this.opts;this.selectVideoStreamSource().then((i=>{if(!1===i)throw new Error("No video stream available");e&&MediaRecorder.isTypeSupported(e)&&(0,n.A)(e)&&(t.mimeType=e);const r=[i.getVideoTracks()[0]];this.audioStream&&r.push(this.audioStream.getAudioTracks()[0]),this.outputStream=new MediaStream(r),this.recorder=new MediaRecorder(this.outputStream,t),this.recorder.addEventListener("dataavailable",(t=>{this.recordingChunks.push(t.data)})),this.recorder.start(),this.setPluginState({recording:!0})})).catch((t=>{this.uppy.log(t,"error")}))}streamInactivated(){const{recordedVideo:t,recording:e}={...this.getPluginState()};t||e?e&&(this.uppy.log("Capture stream inactive \u2014 stop recording"),this.stopRecording()):this.parent&&this.parent.hideAllPanels&&this.parent.hideAllPanels(),this.videoStream=null,this.audioStream=null,this.setPluginState({streamActive:!1,audioStreamActive:!1})}stopRecording(){return new Promise((t=>{this.recorder.addEventListener("stop",(()=>{t()})),this.recorder.stop()})).then((()=>(this.setPluginState({recording:!1}),this.getVideo()))).then((t=>{this.capturedMediaFile=t,this.setPluginState({recordedVideo:URL.createObjectURL(t.data)})})).then((()=>{this.recordingChunks=null,this.recorder=null}),(t=>{throw this.recordingChunks=null,this.recorder=null,t}))}submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(t){t.isRestriction||this.uppy.log(t,"warning")}}stop(){this.videoStream&&(this.videoStream.getVideoTracks().forEach((t=>{t.stop()})),this.videoStream.getAudioTracks().forEach((t=>{t.stop()})),this.videoStream=null),this.audioStream&&(this.audioStream.getAudioTracks().forEach((t=>{t.stop()})),this.audioStream.getVideoTracks().forEach((t=>{t.stop()})),this.audioStream=null),this.outputStream&&(this.outputStream.getAudioTracks().forEach((t=>{t.stop()})),this.outputStream.getVideoTracks().forEach((t=>{t.stop()})),this.outputStream=null),this.setPluginState({recordedVideo:null}),this.captureActive=!1}getVideo(){const t=this.recordingChunks[0].type,e=(0,n.A)(t);if(!e)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${t}"`));const i=`screencap-${Date.now()}.${e}`,r=new Blob(this.recordingChunks,{type:t}),o={source:this.id,name:i,data:new Blob([r],{type:t}),type:t};return Promise.resolve(o)}render(){const t=this.getPluginState();return t.streamActive||this.captureActive||this.userDenied||this.start(),(0,r.h)(f,g({},t,{onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onStop:this.stop,onSubmit:this.submit,i18n:this.i18n,stream:this.videoStream}))}}y.VERSION="4.2.1"},33841:(t,e,i)=>{"use strict";i.d(e,{A:()=>We});var r=i(42656);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}var a=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}();const h="function"==typeof Buffer,l=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),c=(t=>{let e={};return t.forEach(((t,i)=>e[t]=i)),e})(u),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),f=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_"))),m=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),g=t=>{let e,i,r,o,n="";const s=t.length%3;for(let a=0;a<t.length;){if((i=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(o=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=i<<16|r<<8|o,n+=u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}return s?n.slice(0,s-3)+"===".substring(s):n},v="function"==typeof btoa?t=>btoa(t):h?t=>Buffer.from(t,"binary").toString("base64"):g,y=h?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let i=0,r=t.length;i<r;i+=4096)e.push(d.apply(null,t.subarray(i,i+4096)));return v(e.join(""))},b=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?d(192|e>>>6)+d(128|63&e):d(224|e>>>12&15)+d(128|e>>>6&63)+d(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return d(240|e>>>18&7)+d(128|e>>>12&63)+d(128|e>>>6&63)+d(128|63&e)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,S=t=>t.replace(w,b),x=h?t=>Buffer.from(t,"utf8").toString("base64"):l?t=>y(l.encode(t)):t=>v(S(t)),C=(t,e=!1)=>e?f(x(t)):x(t),R=t=>{if(t=t.replace(/\s+/g,""),!p.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,i,r,o="";for(let n=0;n<t.length;)e=c[t.charAt(n++)]<<18|c[t.charAt(n++)]<<12|(i=c[t.charAt(n++)])<<6|(r=c[t.charAt(n++)]),o+=64===i?d(e>>16&255):64===r?d(e>>16&255,e>>8&255):d(e>>16&255,e>>8&255,255&e);return o},P=C;var k=i(61160),_=i.n(k);function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function O(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:e+""}function T(t,e,i){return e=L(e),function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,i||[],L(t).constructor):e.apply(t,i))}function D(t){var e="function"==typeof Map?new Map:void 0;return D=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return function(t,e,i){if(U())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return i&&M(o,i.prototype),o}(t,arguments,L(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),M(i,t)},D(t)}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(U=function(){return!!t})()}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}const j=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=T(this,e,[t])).originalRequest=o,i.originalResponse=n,i.causingError=r,null!=r&&(t+=", caused by ".concat(r.toString())),null!=o){var s=o.getHeader("X-Request-ID")||"n/a",a=o.getMethod(),h=o.getURL(),l=n?n.getStatus():"n/a",u=n?n.getBody()||"":"n/a";t+=", originated from request (method: ".concat(a,", url: ").concat(h,", response code: ").concat(l,", response text: ").concat(u,", request id: ").concat(s,")")}return i.message=t,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),i=e,r&&O(i.prototype,r),o&&O(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,o}(D(Error));var I=!1;function N(t){I&&console.log(t)}function z(){z=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function u(t,e,i,r){var n=e&&e.prototype instanceof v?e:v,s=Object.create(n.prototype),a=new A(r||[]);return o(s,"_invoke",{value:k(t,i,a)}),s}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};l(w,s,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(T([])));x&&x!==i&&r.call(x,s)&&(w=x);var C=b.prototype=v.prototype=Object.create(w);function R(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function i(o,n,s,a){var h=c(t[o],t,n);if("throw"!==h.type){var l=h.arg,u=l.value;return u&&"object"==B(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,a)}))}a(h.arg)}var n;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){i(t,r,e,o)}))}return n=n?n.then(o,o):o()}})}function k(e,i,r){var o=p;return function(n,s){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===n)throw s;return{value:t,done:!0}}for(r.method=n,r.arg=s;;){var a=r.delegate;if(a){var h=_(a,r);if(h){if(h===g)continue;return h}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=c(e,i,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function _(e,i){var r=i.method,o=e.iterator[r];if(o===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,_(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var n=c(o,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,g;var s=n.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(e){if(e||""===e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function i(){for(;++o<e.length;)if(r.call(e,o))return i.value=e[o],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(B(e)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,h,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},R(P.prototype),l(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,i,r,o,n){void 0===n&&(n=Promise);var s=new P(u(t,i,r,o),n);return e.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},R(C),l(C,h,"Generator"),l(C,s,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function o(r,o){return a.type="throw",a.arg=e,i.next=r,o&&(i.method="next",i.arg=t),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var h=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var o=r.arg;O(i)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:T(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function F(t,e,i,r,o,n,s){try{var a=t[n](s),h=a.value}catch(j){return void i(j)}a.done?e(h):Promise.resolve(h).then(r,o)}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,o,n,s,a=[],h=!0,l=!1;try{if(n=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(r=n.call(i)).done)&&(a.push(r.value),a.length!==e);h=!0);}catch(t){l=!0,o=t}finally{try{if(!h&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}(t,e)||q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function q(t,e){if(t){if("string"==typeof t)return V(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function $(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){X(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function X(t,e,i){return(e=K(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Y(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K(r.key),r)}}function K(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}var G="tus-v1",Z="ietf-draft-03",J={endpoint:null,uploadUrl:null,metadata:{},metadataForPartialUploads:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:st,chunkSize:Number.POSITIVE_INFINITY,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null,protocol:G},Q=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in i&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=i,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return e=t,i=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then((function(e){return t._urlStorage.findUploadsByFingerprint(e)}))}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if([G,Z].includes(this.options.protocol))if(this.options.endpoint||this.options.uploadUrl||this.url){var i=this.options.retryDelays;if(null==i||"[object Array]"===Object.prototype.toString.call(i)){if(this.options.parallelUploads>1)for(var r=0,o=["uploadUrl","uploadSize","uploadLengthDeferred"];r<o.length;r++){var n=o[r];if(this.options[n])return void this._emitError(new Error("tus: cannot use the ".concat(n," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(e,this.options).then((function(i){return N(null==i?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(i)),t._fingerprint=i,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)})).then((function(e){if(t._source=e,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size))return void t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(t._size=t._source.size,null==t._size)return void t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()})).catch((function(e){t._emitError(e)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: unsupported protocol ".concat(this.options.protocol)));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e,i=this,r=this._size,o=0;this._parallelUploads=[];var n=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=null!==(e=this.options.parallelUploadBoundaries)&&void 0!==e?e:function(t,e){for(var i=Math.floor(t/e),r=[],o=0;o<e;o++)r.push({start:i*o,end:i*(o+1)});return r[e-1].end=t,r}(this._source.size,n);this._parallelUploadUrls&&s.forEach((function(t,e){t.uploadUrl=i._parallelUploadUrls[e]||null})),this._parallelUploadUrls=new Array(s.length);var a,h=s.map((function(e,n){var a=0;return i._source.slice(e.start,e.end).then((function(h){var l=h.value;return new Promise((function(h,u){var c=$($({},i.options),{},{uploadUrl:e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:i.options.metadataForPartialUploads,headers:$($({},i.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:h,onError:u,onProgress:function(t){o=o-a+t,a=t,i._emitProgress(o,r)},onUploadUrlAvailable:function(){i._parallelUploadUrls[n]=p.url,i._parallelUploadUrls.filter((function(t){return Boolean(t)})).length===s.length&&i._saveUploadInUrlStorage()}}),p=new t(l,c);p.start(),i._parallelUploads.push(p)}))}))}));Promise.all(h).then((function(){(a=i._openRequest("POST",i.options.endpoint)).setHeader("Upload-Concat","final;".concat(i._parallelUploadUrls.join(" ")));var t=tt(i.options.metadata);return""!==t&&a.setHeader("Upload-Metadata",t),i._sendRequest(a,null)})).then((function(t){if(et(t.getStatus(),200)){var e=t.getHeader("Location");null!=e?(i.url=at(i.options.endpoint,e),N("Created upload at ".concat(i.url)),i._emitSuccess(t)):i._emitHttpError(a,t,"tus: invalid or missing Location header")}else i._emitHttpError(a,t,"tus: unexpected response while creating upload")})).catch((function(t){i._emitError(t)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?(N("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(N("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(N("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(e){var i=this;if(null!=this._parallelUploads){var r,o=function(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=q(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,n=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw n}}}}(this._parallelUploads);try{for(o.s();!(r=o.n()).done;)r.value.abort(e)}catch(n){o.e(n)}finally{o.f()}}return null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then((function(){return i._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,i,r){this._emitError(new j(i,r,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),nt(t,this._retryAttempt,this.options))){var i=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){e.start()}),i))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(t){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess({lastResponse:t})}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,i){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,i)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length","1"):e.setHeader("Upload-Length","".concat(this._size));var i,r=tt(this.options.metadata);""!==r&&e.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,i=this._addChunkToRequest(e)):(this.options.protocol===Z&&e.setHeader("Upload-Complete","?0"),i=this._sendRequest(e,null)),i.then((function(i){if(et(i.getStatus(),200)){var r=i.getHeader("Location");if(null!=r){if(t.url=at(t.options.endpoint,r),N("Created upload at ".concat(t.url)),"function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),0===t._size)return t._emitSuccess(i),void t._source.close();t._saveUploadInUrlStorage().then((function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(e,i):(t._offset=0,t._performUpload())}))}else t._emitHttpError(e,i,"tus: invalid or missing Location header")}else t._emitHttpError(e,i,"tus: unexpected response while creating upload")})).catch((function(i){t._emitHttpError(e,null,"tus: failed to create upload",i)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then((function(i){var r=i.getStatus();if(!et(r,200))return 423===r?void t._emitHttpError(e,i,"tus: upload is currently locked; retry later"):(et(r,400)&&t._removeFromUrlStorage(),t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,i,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var o=Number.parseInt(i.getHeader("Upload-Offset"),10);if(Number.isNaN(o))t._emitHttpError(e,i,"tus: invalid or missing offset value");else{var n=Number.parseInt(i.getHeader("Upload-Length"),10);!Number.isNaN(n)||t.options.uploadLengthDeferred||t.options.protocol!==G?("function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then((function(){if(o===n)return t._emitProgress(n,n),void t._emitSuccess(i);t._offset=o,t._performUpload()}))):t._emitHttpError(e,i,"tus: invalid or missing length value")}})).catch((function(i){t._emitHttpError(e,null,"tus: failed to resume upload",i)}))}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset","".concat(this._offset)),this._addChunkToRequest(t).then((function(i){et(i.getStatus(),200)?e._handleUploadResponse(t,i):e._emitHttpError(t,i,"tus: unexpected response while uploading chunk")})).catch((function(i){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),i)})))}},{key:"_addChunkToRequest",value:function(t){var e=this,i=this._offset,r=this._offset+this.options.chunkSize;return t.setProgressHandler((function(t){e._emitProgress(i+t,e._size)})),t.setHeader("Content-Type","application/offset+octet-stream"),(r===Number.POSITIVE_INFINITY||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(i,r).then((function(i){var r=i.value,o=i.done,n=null!=r&&r.size?r.size:0;e.options.uploadLengthDeferred&&o&&(e._size=e._offset+n,t.setHeader("Upload-Length","".concat(e._size)));var s=e._offset+n;return!e.options.uploadLengthDeferred&&o&&s!==e._size?Promise.reject(new Error("upload was configured with a size of ".concat(e._size," bytes, but the source is done after ").concat(s," bytes"))):null===r?e._sendRequest(t):(e.options.protocol===Z&&t.setHeader("Upload-Complete",o?"?1":"?0"),e._emitProgress(e._offset,e._size),e._sendRequest(t,r))}))}},{key:"_handleUploadResponse",value:function(t,e){var i=Number.parseInt(e.getHeader("Upload-Offset"),10);if(Number.isNaN(i))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(i,this._size),this._emitChunkComplete(i-this._offset,i,this._size),this._offset=i,i===this._size)return this._emitSuccess(e),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(t,e){var i=it(t,e,this.options);return this._req=i,i}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(e){t._emitError(e)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then((function(e){t._urlStorageKey=e}))}},{key:"_sendRequest",value:function(t){return rt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],r=[{key:"terminate",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=it("DELETE",e,i);return rt(r,null,i).then((function(t){if(204!==t.getStatus())throw new j("tus: unexpected response while terminating upload",null,r,t)})).catch((function(o){if(o instanceof j||(o=new j("tus: failed to terminate upload",o,r,null)),!nt(o,0,i))throw o;var n=i.retryDelays[0],s=i.retryDelays.slice(1),a=$($({},i),{},{retryDelays:s});return new Promise((function(t){return setTimeout(t,n)})).then((function(){return t.terminate(e,a)}))}))}}],i&&Y(e.prototype,i),r&&Y(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,r}();function tt(t){return Object.entries(t).map((function(t){var e=H(t,2),i=e[0],r=e[1];return"".concat(i," ").concat(P(String(r)))})).join(",")}function et(t,e){return t>=e&&t<e+100}function it(t,e,i){var r=i.httpStack.createRequest(t,e);i.protocol===Z?r.setHeader("Upload-Draft-Interop-Version","5"):r.setHeader("Tus-Resumable","1.0.0");for(var o=i.headers||{},n=0,s=Object.entries(o);n<s.length;n++){var a=H(s[n],2),h=a[0],l=a[1];r.setHeader(h,l)}if(i.addRequestId){var u="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));r.setHeader("X-Request-ID",u)}return r}function rt(t,e,i){return ot.apply(this,arguments)}function ot(){var t;return t=z().mark((function t(e,i,r){var o;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof r.onBeforeRequest){t.next=3;break}return t.next=3,r.onBeforeRequest(e);case 3:return t.next=5,e.send(i);case 5:if(o=t.sent,"function"!=typeof r.onAfterResponse){t.next=9;break}return t.next=9,r.onAfterResponse(e,o);case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})),ot=function(){var e=this,i=arguments;return new Promise((function(r,o){var n=t.apply(e,i);function s(t){F(n,r,o,s,a,"next",t)}function a(t){F(n,r,o,s,a,"throw",t)}s(void 0)}))},ot.apply(this,arguments)}function nt(t,e,i){return!(null==i.retryDelays||e>=i.retryDelays.length||null==t.originalRequest)&&(i&&"function"==typeof i.onShouldRetry?i.onShouldRetry(t,e,i):st(t))}function st(t){var e,i=t.originalResponse?t.originalResponse.getStatus():0;return(!et(i,400)||409===i||423===i)&&(e=!0,"undefined"!=typeof navigator&&!1===navigator.onLine&&(e=!1),e)}function at(t,e){return new(_())(e,t).toString()}Q.defaultOptions=J;const ht=Q;const lt=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function ut(t){return new Promise((function(e,i){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(t){i(t)},r.open("GET",t),r.send()}))}const ct=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function dt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ft(r.key),r)}}function ft(t){var e=function(t,e){if("object"!=pt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==pt(e)?e:e+""}var mt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._file=e,this.size=e.size},(e=[{key:"slice",value:function(t,e){if(ct())return i=this._file.slice(t,e),new Promise((function(t,e){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t({value:e})},r.onerror=function(t){e(t)},r.readAsArrayBuffer(i)}));var i,r=this._file.slice(t,e),o=e>=this.size;return Promise.resolve({value:r,done:o})}},{key:"close",value:function(){}}])&&dt(t.prototype,e),i&&dt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}();function gt(t){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gt(t)}function vt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yt(r.key),r)}}function yt(t){var e=function(t,e){if("object"!=gt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=gt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==gt(e)?e:e+""}function bt(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var wt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1},(e=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var i=this,r=e<=this._bufferOffset+bt(this._buffer);if(this._done||r){var o=this._getDataFromBuffer(t,e),n=null==o&&this._done;return Promise.resolve({value:o,done:n})}return this._reader.read().then((function(r){var o=r.value;return r.done?i._done=!0:void 0===i._buffer?i._buffer=o:i._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var i=new t.constructor(t.length+e.length);return i.set(t),i.set(e,t.length),i}throw new Error("Unknown data type")}(i._buffer,o),i._readUntilEnoughDataOrDone(t,e)}))}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var i=0===bt(this._buffer);return this._done&&i?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&vt(t.prototype,e),i&&vt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function xt(){xt=function(){return e};var t,e={},i=Object.prototype,r=i.hasOwnProperty,o=Object.defineProperty||function(t,e,i){t[e]=i.value},n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",h=n.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function u(t,e,i,r){var n=e&&e.prototype instanceof v?e:v,s=Object.create(n.prototype),a=new A(r||[]);return o(s,"_invoke",{value:k(t,i,a)}),s}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};l(w,s,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(T([])));x&&x!==i&&r.call(x,s)&&(w=x);var C=b.prototype=v.prototype=Object.create(w);function R(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function i(o,n,s,a){var h=c(t[o],t,n);if("throw"!==h.type){var l=h.arg,u=l.value;return u&&"object"==St(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,a)}))}a(h.arg)}var n;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){i(t,r,e,o)}))}return n=n?n.then(o,o):o()}})}function k(e,i,r){var o=p;return function(n,s){if(o===f)throw Error("Generator is already running");if(o===m){if("throw"===n)throw s;return{value:t,done:!0}}for(r.method=n,r.arg=s;;){var a=r.delegate;if(a){var h=_(a,r);if(h){if(h===g)continue;return h}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var l=c(e,i,r);if("normal"===l.type){if(o=r.done?m:d,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=m,r.method="throw",r.arg=l.arg)}}}function _(e,i){var r=i.method,o=e.iterator[r];if(o===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,_(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var n=c(o,e.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,g;var s=n.arg;return s?s.done?(i[e.resultName]=s.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,g):s:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function T(e){if(e||""===e){var i=e[s];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,n=function i(){for(;++o<e.length;)if(r.call(e,o))return i.value=e[o],i.done=!1,i;return i.value=t,i.done=!0,i};return n.next=n}}throw new TypeError(St(e)+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,h,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,h,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},R(P.prototype),l(P.prototype,a,(function(){return this})),e.AsyncIterator=P,e.async=function(t,i,r,o,n){void 0===n&&(n=Promise);var s=new P(u(t,i,r,o),n);return e.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},R(C),l(C,h,"Generator"),l(C,s,(function(){return this})),l(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var r in e)i.push(r);return i.reverse(),function t(){for(;i.length;){var r=i.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function o(r,o){return a.type="throw",a.arg=e,i.next=r,o&&(i.method="next",i.arg=t),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var h=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(h&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(h){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=t,s.arg=e,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),O(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var o=r.arg;O(i)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:T(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}function Ct(t,e,i,r,o,n,s){try{var a=t[n](s),h=a.value}catch(j){return void i(j)}a.done?e(h):Promise.resolve(h).then(r,o)}function Rt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==St(e)?e:e+""}var kt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"openFile",value:(r=xt().mark((function t(e,i){var r;return xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!lt()||!e||void 0===e.uri){t.next=11;break}return t.prev=1,t.next=4,ut(e.uri);case 4:return r=t.sent,t.abrupt("return",new mt(r));case 8:throw t.prev=8,t.t0=t.catch(1),new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t.t0));case 11:if("function"!=typeof e.slice||void 0===e.size){t.next=13;break}return t.abrupt("return",Promise.resolve(new mt(e)));case 13:if("function"!=typeof e.read){t.next=18;break}if(i=Number(i),Number.isFinite(i)){t.next=17;break}return t.abrupt("return",Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return t.abrupt("return",Promise.resolve(new wt(e,i)));case 18:return t.abrupt("return",Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return t.stop()}}),t,null,[[1,8]])})),o=function(){var t=this,e=arguments;return new Promise((function(i,o){var n=r.apply(t,e);function s(t){Ct(n,i,o,s,a,"next",t)}function a(t){Ct(n,i,o,s,a,"throw",t)}s(void 0)}))},function(t,e){return o.apply(this,arguments)})}],e&&Rt(t.prototype,e),i&&Rt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i,r,o}();function _t(t){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_t(t)}function Et(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tt(r.key),r)}}function At(t,e,i){return e&&Ot(t.prototype,e),i&&Ot(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tt(t){var e=function(t,e){if("object"!=_t(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==_t(e)?e:e+""}var Dt=function(){return At((function t(){Et(this,t)}),[{key:"createRequest",value:function(t,e){return new Ut(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}])}(),Ut=function(){return At((function t(e,i){Et(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,i,!0),this._method=e,this._url=i,this._headers={}}),[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(i,r){t._xhr.onload=function(){i(new Mt(t._xhr))},t._xhr.onerror=function(t){r(t)},t._xhr.send(e)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}(),Mt=function(){return At((function t(e){Et(this,t),this._xhr=e}),[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}])}();function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function jt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,It(r.key),r)}}function It(t){var e=function(t,e){if("object"!=Lt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Lt(e)?e:e+""}var Nt=!1;try{Nt="localStorage"in window;var zt="tusSupport",Ft=localStorage.getItem(zt);localStorage.setItem(zt,Ft),null===Ft&&localStorage.removeItem(zt)}catch(Ke){if(Ke.code!==Ke.SECURITY_ERR&&Ke.code!==Ke.QUOTA_EXCEEDED_ERR)throw Ke;Nt=!1}var Ht=Nt,Bt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var i=Math.round(1e12*Math.random()),r="tus::".concat(t,"::").concat(i);return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);if(0===r.indexOf(t))try{var o=JSON.parse(localStorage.getItem(r));o.urlStorageKey=r,e.push(o)}catch(n){}}return e}}],e&&jt(t.prototype,e),i&&jt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}();function qt(t){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qt(t)}function Vt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jt(r.key),r)}}function Wt(t,e,i){return e=Xt(e),function(t,e){if(e&&("object"===qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$t()?Reflect.construct(e,i||[],Xt(t).constructor):e.apply(t,i))}function $t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($t=function(){return!!t})()}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}function Kt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Gt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(i),!0).forEach((function(e){Zt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Kt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Zt(t,e,i){return(e=Jt(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Jt(t){var e=function(t,e){if("object"!=qt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==qt(e)?e:e+""}var Qt=Gt(Gt({},ht.defaultOptions),{},{httpStack:new Dt,fileReader:new kt,urlStorage:Ht?new Bt:new a,fingerprint:function(t,e){return lt()?Promise.resolve(function(t,e){var i=t.exif?function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",i,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),te=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,e,[t,i=Gt(Gt({},Qt),i)])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,t),i=e,o=[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Gt(Gt({},Qt),e),ht.terminate(t,e)}}],(r=null)&&Vt(i.prototype,r),o&&Vt(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,o}(ht);"function"==typeof XMLHttpRequest&&"function"==typeof Blob&&Blob.prototype.slice;function ee(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ie=0;function re(t){return"__private_"+ie+++"_"+t}var oe=re("uppy"),ne=re("events");class se{constructor(t){Object.defineProperty(this,oe,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:[]}),ee(this,oe)[oe]=t}on(t,e){return ee(this,ne)[ne].push([t,e]),ee(this,oe)[oe].on(t,e)}remove(){for(const[t,e]of ee(this,ne)[ne].splice(0))ee(this,oe)[oe].off(t,e)}onFilePause(t,e){this.on("upload-pause",((i,r)=>{t===(null==i?void 0:i.id)&&e(r)}))}onFileRemove(t,e){this.on("file-removed",(i=>{t===i.id&&e(i.id)}))}onPause(t,e){this.on("upload-pause",((i,r)=>{t===(null==i?void 0:i.id)&&e(r)}))}onRetry(t,e){this.on("upload-retry",(i=>{t===(null==i?void 0:i.id)&&e()}))}onRetryAll(t,e){this.on("retry-all",(()=>{ee(this,oe)[oe].getFile(t)&&e()}))}onPauseAll(t,e){this.on("pause-all",(()=>{ee(this,oe)[oe].getFile(t)&&e()}))}onCancelAll(t,e){var i=this;this.on("cancel-all",(function(){ee(i,oe)[oe].getFile(t)&&e(...arguments)}))}onResumeAll(t,e){this.on("resume-all",(()=>{ee(this,oe)[oe].getFile(t)&&e()}))}}var ae=i(52094);const he=function(t){return!!t&&(0!==t.readyState&&4!==t.readyState||0===t.status)};function le(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ue=0;function ce(t){return"__private_"+ue+++"_"+t}function pe(t){if(null!=t){var e;const i=()=>this.abort(t.reason);t.addEventListener("abort",i,{once:!0});const r=()=>{t.removeEventListener("abort",i)};null==(e=this.then)||e.call(this,r,r)}return this}var de=ce("activeRequests"),fe=ce("queuedHandlers"),me=ce("paused"),ge=ce("pauseTimer"),ve=ce("downLimit"),ye=ce("upperLimit"),be=ce("rateLimitingTimer"),we=ce("call"),Se=ce("queueNext"),xe=ce("next"),Ce=ce("queue"),Re=ce("dequeue"),Pe=ce("resume"),ke=ce("increaseLimit");class _e{constructor(t){Object.defineProperty(this,Re,{value:De}),Object.defineProperty(this,Ce,{value:Te}),Object.defineProperty(this,xe,{value:Ae}),Object.defineProperty(this,Se,{value:Oe}),Object.defineProperty(this,we,{value:Ee}),Object.defineProperty(this,de,{writable:!0,value:0}),Object.defineProperty(this,fe,{writable:!0,value:[]}),Object.defineProperty(this,me,{writable:!0,value:!1}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),Object.defineProperty(this,ve,{writable:!0,value:1}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),Object.defineProperty(this,be,{writable:!0,value:void 0}),Object.defineProperty(this,Pe,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ke,{writable:!0,value:()=>{if(le(this,me)[me])le(this,be)[be]=setTimeout(le(this,ke)[ke],0);else{le(this,ve)[ve]=this.limit,this.limit=Math.ceil((le(this,ye)[ye]+le(this,ve)[ve])/2);for(let t=le(this,ve)[ve];t<=this.limit;t++)le(this,Se)[Se]();le(this,ye)[ye]-le(this,ve)[ve]>3?le(this,be)[be]=setTimeout(le(this,ke)[ke],2e3):le(this,ve)[ve]=Math.floor(le(this,ve)[ve]/2)}}}),this.limit="number"!=typeof t||0===t?1/0:t}run(t,e){return!le(this,me)[me]&&le(this,de)[de]<this.limit?le(this,we)[we](t):le(this,Ce)[Ce](t,e)}wrapSyncFunction(t,e){var i=this;return function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];const s=i.run((()=>(t(...o),queueMicrotask((()=>s.done())),()=>{})),e);return{abortOn:pe,abort(){s.abort()}}}}wrapPromiseFunction(t,e){var i=this;return function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let s;const a=new Promise(((r,n)=>{s=i.run((()=>{let e,i;try{i=Promise.resolve(t(...o))}catch(a){i=Promise.reject(a)}return i.then((t=>{e?n(e):(s.done(),r(t))}),(t=>{e?n(e):(s.done(),n(t))})),t=>{e=function(t){return new Error("Cancelled",{cause:t})}(t)}}),e)}));return a.abort=t=>{s.abort(t)},a.abortOn=pe,a}}resume(){le(this,me)[me]=!1,clearTimeout(le(this,ge)[ge]);for(let t=0;t<this.limit;t++)le(this,Se)[Se]()}pause(t){void 0===t&&(t=null),le(this,me)[me]=!0,clearTimeout(le(this,ge)[ge]),null!=t&&(le(this,ge)[ge]=setTimeout(le(this,Pe)[Pe],t))}rateLimit(t){clearTimeout(le(this,be)[be]),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(le(this,ye)[ye]=this.limit-1,this.limit=le(this,ve)[ve],le(this,be)[be]=setTimeout(le(this,ke)[ke],t))}get isPaused(){return le(this,me)[me]}}function Ee(t){le(this,de)[de]+=1;let e,i=!1;try{e=t()}catch(r){throw le(this,de)[de]-=1,r}return{abort:t=>{i||(i=!0,le(this,de)[de]-=1,null==e||e(t),le(this,Se)[Se]())},done:()=>{i||(i=!0,le(this,de)[de]-=1,le(this,Se)[Se]())}}}function Oe(){queueMicrotask((()=>le(this,xe)[xe]()))}function Ae(){if(le(this,me)[me]||le(this,de)[de]>=this.limit)return;if(0===le(this,fe)[fe].length)return;const t=le(this,fe)[fe].shift();if(null==t)throw new Error("Invariant violation: next is null");const e=le(this,we)[we](t.fn);t.abort=e.abort,t.done=e.done}function Te(t,e){const i={fn:t,priority:(null==e?void 0:e.priority)||0,abort:()=>{le(this,Re)[Re](i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=le(this,fe)[fe].findIndex((t=>i.priority>t.priority));return-1===r?le(this,fe)[fe].push(i):le(this,fe)[fe].splice(r,0,i),i}function De(t){const e=le(this,fe)[fe].indexOf(t);-1!==e&&le(this,fe)[fe].splice(e,1)}Symbol("__queue");var Ue=i(61825);function Me(t){return(e,i)=>{if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)||"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return Qt.fingerprint(e,i);const r=["tus",t.id,i.endpoint].join("-");return Promise.resolve(r)}}function Le(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var je=0;function Ie(t){return"__private_"+je+++"_"+t}const Ne={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},ze={limit:20,retryDelays:Ne.retryDelays,withCredentials:!1,allowedMetaFields:!0};var Fe=Ie("retryDelayIterator"),He=Ie("uploadLocalFile"),Be=Ie("getCompanionClientArgs"),qe=Ie("uploadFiles"),Ve=Ie("handleUpload");class We extends r.A{constructor(t,e){var i,r;if(super(t,{...ze,...e}),Object.defineProperty(this,qe,{value:Ye}),Object.defineProperty(this,Be,{value:Xe}),Object.defineProperty(this,He,{value:$e}),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:async t=>{if(0===t.length)return void this.uppy.log("[Tus] No files to upload");0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const e=this.uppy.getFilesByIds(t);await Le(this,qe)[qe](e)}}),this.type="uploader",this.id=this.opts.id||"Tus",void 0===(null==e?void 0:e.allowedMetaFields)&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in e)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=null!=(i=this.opts.rateLimitedQueue)?i:new _e(this.opts.limit),Le(this,Fe)[Fe]=null==(r=this.opts.retryDelays)?void 0:r.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}resetUploaderReferences(t,e){const i=this.uploaders[t];i&&(i.abort(),null!=e&&e.abort&&i.abort(!0),this.uploaders[t]=null),this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null)}onReceiveUploadUrl(t,e){const i=this.uppy.getFile(t.id);i&&(i.tus&&i.tus.uploadUrl===e||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(i.id,{tus:{...i.tus,uploadUrl:e}})))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(Le(this,Ve)[Ve])}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(Le(this,Ve)[Ve])}}function $e(t){return this.resetUploaderReferences(t.id),new Promise(((e,i)=>{let r,o,n;const s={...this.opts,...t.tus||{}};"function"==typeof s.headers&&(s.headers=s.headers(t));const{onShouldRetry:a,onBeforeRequest:h,...l}=s,u={...Ne,...l};u.fingerprint=Me(t),u.onBeforeRequest=async e=>{let i;if(e.getUnderlyingObject().withCredentials=!!s.withCredentials,"function"==typeof h&&(i=h(e,t)),(0,Ue.A)(r,"shouldBeRequeued")){if(!r.shouldBeRequeued)return Promise.reject();let e;const o=new Promise((t=>{e=t}));return r=this.requests.run((()=>(t.isPaused&&r.abort(),e(),()=>{}))),void await Promise.all([o,i])}return i},u.onError=e=>{var o;this.uppy.log(e);const n=null!=e.originalRequest?e.originalRequest.getUnderlyingObject():null;he(n)&&(e=new ae.A(e,n)),this.resetUploaderReferences(t.id),null==(o=r)||o.abort(),"function"==typeof s.onError&&s.onError(e),i(e)},u.onProgress=(e,i)=>{var r;this.onReceiveUploadUrl(t,n.url),"function"==typeof s.onProgress&&s.onProgress(e,i);const o=this.uppy.getFile(t.id);this.uppy.emit("upload-progress",o,{uploadStarted:null!=(r=o.progress.uploadStarted)?r:0,bytesUploaded:e,bytesTotal:i})},u.onSuccess=i=>{var o;const a={uploadURL:null!=(o=n.url)?o:void 0,status:200,body:{xhr:i.lastResponse.getUnderlyingObject()}};if(this.uppy.emit("upload-success",this.uppy.getFile(t.id),a),this.resetUploaderReferences(t.id),r.done(),n.url){const{name:t}=n.file;this.uppy.log(`Download ${t} from ${n.url}`)}"function"==typeof s.onSuccess&&s.onSuccess(i),e(n)};const c=t=>{var e;const i=null==t||null==(e=t.originalResponse)?void 0:e.getStatus();if(429===i){if(!this.requests.isPaused){var o;const t=null==(o=Le(this,Fe)[Fe])?void 0:o.next();if(null==t||t.done)return!1;this.requests.rateLimit(t.value)}}else{if(null!=i&&i>=400&&i<500&&409!==i&&423!==i)return!1;"undefined"!=typeof navigator&&!1===navigator.onLine&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",(()=>{this.requests.resume()}),{once:!0})))}return r.abort(),r={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};u.onShouldRetry=null!=a?(t,e)=>a(t,e,s,c):c;const p=(t,e,i)=>{(0,Ue.A)(t,e)&&!(0,Ue.A)(t,i)&&(t[i]=t[e])},d={},f=function(t,e){return!0===t?Object.keys(e):Array.isArray(t)?t:[]}(s.allowedMetaFields,t.meta);f.forEach((e=>{d[e]=String(t.meta[e])})),p(d,"type","filetype"),p(d,"name","filename"),u.metadata=d,n=new te(t.data,u),this.uploaders[t.id]=n;const m=new se(this.uppy);this.uploaderEvents[t.id]=m,o=()=>(t.isPaused||n.start(),()=>{}),n.findPreviousUploads().then((e=>{const i=e[0];i&&(this.uppy.log(`[Tus] Resuming upload of ${t.id} started at ${i.creationTime}`),n.resumeFromPreviousUpload(i)),r=this.requests.run(o)})),m.onFileRemove(t.id,(i=>{r.abort(),this.resetUploaderReferences(t.id,{abort:!!n.url}),e(`upload ${i} was removed`)})),m.onPause(t.id,(t=>{r.abort(),t?n.abort():r=this.requests.run(o)})),m.onPauseAll(t.id,(()=>{r.abort(),n.abort()})),m.onCancelAll(t.id,(()=>{r.abort(),this.resetUploaderReferences(t.id,{abort:!!n.url}),e(`upload ${t.id} was canceled`)})),m.onResumeAll(t.id,(()=>{r.abort(),t.error&&n.abort(),r=this.requests.run(o)}))})).catch((e=>{throw this.uppy.emit("upload-error",t,e),e}))}function Xe(t){var e;const i={...this.opts};return t.tus&&Object.assign(i,t.tus),"function"==typeof i.headers&&(i.headers=i.headers(t)),{...null==(e=t.remote)?void 0:e.body,endpoint:i.endpoint,uploadUrl:i.uploadUrl,protocol:"tus",size:t.data.size,headers:i.headers,metadata:t.meta}}async function Ye(t){const e=function(t){return t.filter((t=>!(t=>"error"in t&&!!t.error)(t)))}(t),i=function(t){return t.filter((t=>{var e;return!(null!=(e=t.progress)&&e.uploadStarted&&t.isRestored)}))}(e);this.uppy.emit("upload-start",i),await Promise.allSettled(e.map((t=>{if(t.isRemote){const e=()=>this.requests,i=new AbortController,r=e=>{e.id===t.id&&i.abort()};this.uppy.on("file-removed",r);const o=this.uppy.getRequestClientForFile(t).uploadRemoteFile(t,Le(this,Be)[Be](t),{signal:i.signal,getQueue:e});return this.requests.wrapSyncFunction((()=>{this.uppy.off("file-removed",r)}),{priority:-1})(),o}return Le(this,He)[He](t)})))}We.VERSION="4.2.2"},42041:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameUnsplash:"Unsplash"}};class h extends o.A{constructor(t,e){if(super(t,e),this.type="acquirer",this.files=[],this.storage=this.opts.storage||r.HM,this.id=this.opts.id||"Unsplash",this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameUnsplash"),this.icon=()=>(0,s.h)("svg",{className:"uppy-DashboardTab-iconUnsplash",viewBox:"0 0 32 32",height:"32",width:"32","aria-hidden":"true"},(0,s.h)("g",{fill:"currentcolor"},(0,s.h)("path",{d:"M46.575 10.883v-9h12v9zm12 5h10v18h-32v-18h10v9h12z"}),(0,s.h)("path",{d:"M13 12.5V8h6v4.5zm6 2.5h5v9H8v-9h5v4.5h6z"}))),!this.opts.companionUrl)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");this.hostname=this.opts.companionUrl,this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.YL(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule,provider:"unsplash",pluginId:this.id})}install(){this.view=new n.un(this,{provider:this.provider,viewType:"unsplash",showFilter:!0,utmSource:this.opts.utmSource});const{target:t}=this.opts;t&&this.mount(t,this)}render(t){return this.view.render(t)}uninstall(){this.unmount()}}h.VERSION="4.3.2"},26430:(t,e,i)=>{"use strict";i.d(e,{A:()=>b});var r=i(50172),o=i(86855),n=i(6267),s=i(19542),a=i(8423);function h(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var l=0;function u(t){return"__private_"+l+++"_"+t}var c=u("handleSubmit");class p extends r.uA{constructor(t){super(t),this.form=document.createElement("form"),Object.defineProperty(this,c,{writable:!0,value:t=>{t.preventDefault();const{addFile:e}=this.props;e(this.input.value.trim())}}),this.form.id=(0,a.A)()}componentDidMount(){this.input.value="",this.form.addEventListener("submit",h(this,c)[c]),document.body.appendChild(this.form)}componentWillUnmount(){this.form.removeEventListener("submit",h(this,c)[c]),document.body.removeChild(this.form)}render(){const{i18n:t}=this.props;return(0,r.h)("div",{className:"uppy-Url"},(0,r.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":t("enterUrlToImport"),placeholder:t("enterUrlToImport"),ref:t=>{this.input=t},"data-uppy-super-focusable":!0,form:this.form.id}),(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"submit",form:this.form.id},t("import")))}}const d=p;function f(t,e,i){const r=(0,s.A)(t.items);let o;switch(e){case"paste":if(r.some((t=>"file"===t.kind)))return;o=r.filter((t=>"string"===t.kind&&"text/plain"===t.type));break;case"drop":o=r.filter((t=>"string"===t.kind&&"text/uri-list"===t.type));break;default:throw new Error(`isDropOrPaste must be either 'drop' or 'paste', but it's ${e}`)}o.forEach((t=>{t.getAsString((t=>i(t)))}))}const m={strings:{pluginNameUrl:"Link",import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it\u2019s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}};var g;function v(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M23.637 15.312l-2.474 2.464a3.582 3.582 0 01-.577.491c-.907.657-1.897.986-2.968.986a4.925 4.925 0 01-3.959-1.971c-.248-.329-.164-.902.165-1.149.33-.247.907-.164 1.155.164 1.072 1.478 3.133 1.724 4.618.656a.642.642 0 00.33-.328l2.473-2.463c1.238-1.313 1.238-3.366-.082-4.597a3.348 3.348 0 00-4.618 0l-1.402 1.395a.799.799 0 01-1.154 0 .79.79 0 010-1.15l1.402-1.394a4.843 4.843 0 016.843 0c2.062 1.805 2.144 5.007.248 6.896zm-8.081 5.664l-1.402 1.395a3.348 3.348 0 01-4.618 0c-1.319-1.23-1.319-3.365-.082-4.596l2.475-2.464.328-.328c.743-.492 1.567-.739 2.475-.657.906.165 1.648.574 2.143 1.314.248.329.825.411 1.155.165.33-.248.412-.822.165-1.15-.825-1.068-1.98-1.724-3.216-1.888-1.238-.247-2.556.082-3.628.902l-.495.493-2.474 2.464c-1.897 1.969-1.814 5.09.083 6.977.99.904 2.226 1.396 3.463 1.396s2.473-.492 3.463-1.395l1.402-1.396a.79.79 0 000-1.15c-.33-.328-.908-.41-1.237-.082z",fill:"#FF753E","fill-rule":"nonzero"}))}function y(t){const{pathname:e}=new URL(t);return e.substring(e.lastIndexOf("/")+1)}class b extends o.A{constructor(t,e){if(super(t,e),this.getMeta=t=>this.client.post("url/meta",{url:t}),this.addFile=async(t,e)=>{if(t.startsWith("blob"))return;const i=function(t){return/^[a-z0-9]+:\/\//.test(t)?t:"http://"+t}(t);if(!function(t){return(null==t?void 0:t.startsWith("http://"))||(null==t?void 0:t.startsWith("https://"))}(i))return this.uppy.log(`[URL] Incorrect URL entered: ${i}`),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3);this.uppy.log(`[URL] Adding file from dropped/pasted url: ${i}`);try{const t=await this.getMeta(i),o={meta:e,source:this.id,name:t.name||y(i),type:t.type,data:{size:t.size},isRemote:!0,body:{url:i},remote:{companionUrl:this.opts.companionUrl,url:`${this.hostname}/url/get`,body:{fileId:i,url:i},requestClientId:b.requestClientId}};this.uppy.log("[Url] Adding remote file");try{return this.uppy.addFile(o)}catch(r){return r.isRestriction||this.uppy.log(r),r}}catch(r){return this.uppy.log(r),this.uppy.info({message:this.i18n("failedToFetch"),details:r},"error",4e3),r}},this.handleRootDrop=t=>{f(t.dataTransfer,"drop",(t=>{this.addFile(t)}))},this.handleRootPaste=t=>{f(t.clipboardData,"paste",(t=>{this.addFile(t)}))},this.id=this.opts.id||"Url",this.type="acquirer",this.icon=()=>(0,r.h)(v,null),this.defaultLocale=m,this.i18nInit(),this.title=this.i18n("pluginNameUrl"),this.hostname=this.opts.companionUrl,!this.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");this.client=new n.R0(t,{pluginId:this.id,provider:"url",companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule}),this.uppy.registerRequestClient(b.requestClientId,this.client)}render(){return(0,r.h)(d,{i18n:this.i18n,addFile:this.addFile})}install(){const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.unmount()}}g=b,b.VERSION="4.2.2",b.requestClientId=g.name,b.prototype.canHandleRootDrop=function(t){return(0,s.A)(t.dataTransfer.items).filter((t=>"string"===t.kind&&"text/uri-list"===t.type)).length>0}},52094:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});class r extends Error{constructor(t,e){void 0===e&&(e=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=t,this.isNetworkError=!0,this.request=e}}const o=r},79885:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});const r={__proto__:null,"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function o(t){return[t]=t.split(";",1),r[t]||null}},61825:(t,e,i)=>{"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}i.d(e,{A:()=>r})},1948:(t,e,i)=>{"use strict";i.d(e,{A:()=>A});var r=i(50172),o=i(86855),n=i(79885),s=i(32889),a=i(5574);function h(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,r.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))}function l(t){let{onSnapshot:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:i("takePicture"),"aria-label":i("takePicture"),onClick:e,"data-uppy-super-focusable":!0},h())}function u(t){let{recording:e,onStartRecording:i,onStopRecording:o,i18n:n}=t;return e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:n("stopRecording"),"aria-label":n("stopRecording"),onClick:o,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:n("startRecording"),"aria-label":n("startRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("circle",{cx:"50",cy:"50",r:"40"})))}function c(t){let{recordingLengthSeconds:e,i18n:i}=t;const o=(n=e,`${Math.floor(n/60)}:${String(n%60).padStart(2,"0")}`);var n;return(0,r.h)("span",{"aria-label":i("recordingLength",{recording_length:o})},o)}const p=function(t){let{onSubmit:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const d=function(t){let{onDiscard:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:i("discardRecordedFile"),"aria-label":i("discardRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,r.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,r.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function f(){return f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},f.apply(null,arguments)}function m(t,e){return t.includes(e)}class g extends r.uA{componentDidMount(){const{onFocus:t}=this.props;t()}componentWillUnmount(){const{onStop:t}=this.props;t()}render(){const{src:t,recordedVideo:e,recording:i,modes:o,supportsRecording:n,videoSources:s,showVideoSourceDropdown:a,showRecordingLength:h,onSubmit:g,i18n:v,mirror:y,onSnapshot:b,onStartRecording:w,onStopRecording:S,onDiscardRecordedVideo:x,recordingLengthSeconds:C}=this.props,R=!!e,P=!R&&n&&(m(o,"video-only")||m(o,"audio-only")||m(o,"video-audio")),k=!R&&m(o,"picture"),_=n&&h&&!R,E=a&&s&&s.length>1,O={playsInline:!0};return e?(O.muted=!1,O.controls=!0,O.src=e,this.videoElement&&(this.videoElement.srcObject=null)):(O.muted=!0,O.autoPlay=!0,O.srcObject=t),(0,r.h)("div",{className:"uppy uppy-Webcam-container"},(0,r.h)("div",{className:"uppy-Webcam-videoContainer"},(0,r.h)("video",f({ref:t=>this.videoElement=t,className:"uppy-Webcam-video  "+(y?"uppy-Webcam-video--mirrored":"")},O))),(0,r.h)("div",{className:"uppy-Webcam-footer"},(0,r.h)("div",{className:"uppy-Webcam-videoSourceContainer"},E?function(t){let{currentDeviceId:e,videoSources:i,onChangeVideoSource:o}=t;return(0,r.h)("div",{className:"uppy-Webcam-videoSource"},(0,r.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:t=>{o(t.target.value)}},i.map((t=>(0,r.h)("option",{key:t.deviceId,value:t.deviceId,selected:t.deviceId===e},t.label)))))}(this.props):null),(0,r.h)("div",{className:"uppy-Webcam-buttonContainer"},k&&(0,r.h)(l,{onSnapshot:b,i18n:v}),P&&(0,r.h)(u,{recording:i,onStartRecording:w,onStopRecording:S,i18n:v}),R&&(0,r.h)(p,{onSubmit:g,i18n:v}),R&&(0,r.h)(d,{onDiscard:x,i18n:v})),(0,r.h)("div",{className:"uppy-Webcam-recordingLength"},_&&(0,r.h)(c,{recordingLengthSeconds:C,i18n:v}))))}}const v=g;function y(t){let{icon:e,i18n:i,hasCamera:o}=t;return(0,r.h)("div",{className:"uppy-Webcam-permissons"},(0,r.h)("div",{className:"uppy-Webcam-permissonsIcon"},e()),(0,r.h)("div",{className:"uppy-Webcam-title"},i(o?"allowAccessTitle":"noCameraTitle")),(0,r.h)("p",null,i(o?"allowAccessDescription":"noCameraDescription")))}const b={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},w.apply(null,arguments)}function S(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var x=0;function C(t){return"__private_"+x+++"_"+t}function R(t){return"."===t[0]?s.A[t.slice(1)]:t}function P(t){return/^video\/[^*]+$/.test(t)}function k(t){return/^image\/[^*]+$/.test(t)}function _(t,e){return t.includes(e)}const E={onBeforeSnapshot:()=>Promise.resolve(),countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:a({tablet:!0})};var O=C("enableMirror");class A extends o.A{constructor(t,e){super(t,{...E,...e}),Object.defineProperty(this,O,{writable:!0,value:void 0}),this.stream=null,this.recorder=null,this.recordingChunks=null,this.captureInProgress=!1,this.mediaDevices=navigator.mediaDevices,this.supportsUserMedia=!!this.mediaDevices,this.protocol=location.protocol.match(/https/i)?"https":"http",this.id=this.opts.id||"Webcam",this.type="acquirer",this.capturedMediaFile=null,this.icon=()=>(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383",fillRule:"nonzero"})),this.defaultLocale=b,this.i18nInit(),this.title=this.i18n("pluginNameCamera"),S(this,O)[O]=this.opts.mirror,this.install=this.install.bind(this),this.setPluginState=this.setPluginState.bind(this),this.render=this.render.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.takeSnapshot=this.takeSnapshot.bind(this),this.startRecording=this.startRecording.bind(this),this.stopRecording=this.stopRecording.bind(this),this.discardRecordedVideo=this.discardRecordedVideo.bind(this),this.submit=this.submit.bind(this),this.oneTwoThreeSmile=this.oneTwoThreeSmile.bind(this),this.focus=this.focus.bind(this),this.changeVideoSource=this.changeVideoSource.bind(this),this.webcamActive=!1,this.opts.countdown&&(this.opts.onBeforeSnapshot=this.oneTwoThreeSmile),this.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null})}setOptions(t){super.setOptions({...t,videoConstraints:{...this.opts.videoConstraints,...null==t?void 0:t.videoConstraints}})}hasCameraCheck(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then((t=>t.some((t=>"videoinput"===t.kind)))):Promise.resolve(!1)}isAudioOnly(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}getConstraints(t){void 0===t&&(t=null);const e=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),i=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),r={...this.opts.videoConstraints||{},...null!=t&&{deviceId:t}};return{audio:e,video:!!i&&r}}start(t){var e;if(void 0===t&&(t=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(S(this,O)[O]=!0);const i=this.getConstraints(null==(e=t)?void 0:e.deviceId);this.hasCameraCheck().then((e=>(this.setPluginState({hasCamera:e}),this.mediaDevices.getUserMedia(i).then((e=>{this.stream=e;let i=null;const r=this.isAudioOnly()?e.getAudioTracks():e.getVideoTracks();t&&t.deviceId?r.forEach((e=>{e.getSettings().deviceId===t.deviceId&&(i=e.getSettings().deviceId)})):i=r[0].getSettings().deviceId,this.updateVideoSources(),this.setPluginState({currentDeviceId:i,cameraReady:!0})})).catch((t=>{this.setPluginState({cameraReady:!1,cameraError:t}),this.uppy.info(t.message,"error")})))))}getMediaRecorderOptions(){const t={};if(MediaRecorder.isTypeSupported){const{restrictions:e}=this.uppy.opts;let i=[];this.opts.preferredVideoMimeType?i=[this.opts.preferredVideoMimeType]:e.allowedFileTypes&&(i=e.allowedFileTypes.map(R).filter(P));const r=t=>MediaRecorder.isTypeSupported(t)&&(0,n.A)(t),o=i.filter(r);o.length>0&&(t.mimeType=o[0])}return t}startRecording(){this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];let t=!1;this.recorder.addEventListener("dataavailable",(e=>{this.recordingChunks.push(e.data);const{restrictions:i}=this.uppy.opts;if(this.recordingChunks.length>1&&null!=i.maxFileSize&&!t){const e=this.recordingChunks.reduce(((t,e)=>t+e.size),0),r=3*((e-this.recordingChunks[0].size)/(this.recordingChunks.length-1));e>Math.max(0,i.maxFileSize-r)&&(t=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),this.stopRecording())}})),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval((()=>{const t=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:t+1})}),1e3)),this.setPluginState({isRecording:!0})}stopRecording(){return new Promise((t=>{this.recorder.addEventListener("stop",(()=>{t()})),this.recorder.stop(),this.opts.showRecordingLength&&(clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0}))})).then((()=>(this.setPluginState({isRecording:!1}),this.getVideo()))).then((t=>{try{this.capturedMediaFile=t,this.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),S(this,O)[O]=!1}catch(e){e.isRestriction||this.uppy.log(e)}})).then((()=>{this.recordingChunks=null,this.recorder=null}),(t=>{throw this.recordingChunks=null,this.recorder=null,t}))}discardRecordedVideo(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(S(this,O)[O]=!0),this.capturedMediaFile=null}submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(t){t.isRestriction||this.uppy.log(t,"error")}}async stop(){if(this.stream){const t=this.stream.getAudioTracks(),e=this.stream.getVideoTracks();t.concat(e).forEach((t=>t.stop()))}this.recorder&&await new Promise((t=>{this.recorder.addEventListener("stop",t,{once:!0}),this.recorder.stop(),this.opts.showRecordingLength&&clearInterval(this.recordingLengthTimer)})),this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0})}getVideoElement(){return this.el.querySelector(".uppy-Webcam-video")}oneTwoThreeSmile(){return new Promise(((t,e)=>{let i=this.opts.countdown;const r=setInterval((()=>{if(!this.webcamActive)return clearInterval(r),this.captureInProgress=!1,e(new Error("Webcam is not active"));i?(this.uppy.info(`${i}...`,"warning",800),i--):(clearInterval(r),this.uppy.info(this.i18n("smile"),"success",1500),setTimeout((()=>t()),1500))}),1e3)}))}takeSnapshot(){this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch((t=>{const e="object"==typeof t?t.message:t;return this.uppy.info(e,"error",5e3),Promise.reject(new Error(`onBeforeSnapshot: ${e}`))})).then((()=>this.getImage())).then((t=>{this.captureInProgress=!1;try{this.uppy.addFile(t)}catch(e){e.isRestriction||this.uppy.log(e)}}),(t=>{throw this.captureInProgress=!1,t})))}getImage(){const t=this.getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));const e=t.videoWidth,i=t.videoHeight,r=document.createElement("canvas");r.width=e,r.height=i;r.getContext("2d").drawImage(t,0,0);const{restrictions:o}=this.uppy.opts;let s=[];this.opts.preferredImageMimeType?s=[this.opts.preferredImageMimeType]:o.allowedFileTypes&&(s=o.allowedFileTypes.map(R).filter(k));const a=s[0]||"image/jpeg",h=(0,n.A)(a)||"jpg",l=`cam-${Date.now()}.${h}`;return function(t,e,i){return new Promise((r=>{t.toBlob(r,e,i)}))}(r,a).then((t=>({source:this.id,name:l,data:new Blob([t],{type:a}),type:a})))}getVideo(){const t=this.recordingChunks.find((t=>{var e;return(null==(e=t.type)?void 0:e.length)>0})).type,e=(0,n.A)(t);if(!e)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${t}"`));const i=`webcam-${Date.now()}.${e}`,r=new Blob(this.recordingChunks,{type:t}),o={source:this.id,name:i,data:new Blob([r],{type:t}),type:t};return Promise.resolve(o)}focus(){this.opts.countdown&&setTimeout((()=>{this.uppy.info(this.i18n("smile"),"success",1500)}),1e3)}changeVideoSource(t){this.stop(),this.start({deviceId:t})}updateVideoSources(){this.mediaDevices.enumerateDevices().then((t=>{this.setPluginState({videoSources:t.filter((t=>"videoinput"===t.kind))})}))}render(){this.webcamActive||this.start();const t=this.getPluginState();return t.cameraReady&&t.hasCamera?(0,r.h)(v,w({},t,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"==typeof MediaRecorder.prototype.start,recording:t.isRecording,mirror:S(this,O)[O],src:this.stream})):(0,r.h)(y,{icon:h,i18n:this.i18n,hasCamera:t.hasCamera})}install(){const{mobileNativeCamera:t,modes:e,videoConstraints:i}=this.opts,{target:r}=this.opts;var o;t&&r?null==(o=this.getTargetPlugin(r))||o.setOptions({showNativeVideoCameraButton:_(e,"video-only")||_(e,"video-audio"),showNativePhotoCameraButton:_(e,"picture"),nativeCameraFacingMode:null==i?void 0:i.facingMode}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),r&&this.mount(r,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=()=>{if(this.updateVideoSources(),this.stream){let t=!0;const{videoSources:e,currentDeviceId:i}=this.getPluginState();e.forEach((e=>{i===e.deviceId&&(t=!1)})),t&&(this.stop(),this.start())}}))}uninstall(){this.stop(),this.unmount()}onUnmount(){this.stop()}}A.VERSION="4.1.1"},92190:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(6267),o=i(86855),n=i(38469),s=i(50172);const a={strings:{pluginNameZoom:"Zoom"}};class h extends o.A{constructor(t,e){super(t,e),this.rootFolderId=null,this.type="acquirer",this.files=[],this.storage=this.opts.storage||r.HM,this.id=this.opts.id||"Zoom",this.icon=()=>(0,s.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("path",{d:"M24.5 11.125l-2.75 2.063c-.473.353-.75.91-.75 1.5v3.124c0 .59.277 1.147.75 1.5l2.75 2.063a.938.938 0 001.5-.75v-8.75a.938.938 0 00-1.5-.75zm-4.75 9.5c0 1.035-.84 1.875-1.875 1.875H9.75A3.75 3.75 0 016 18.75v-6.875C6 10.84 6.84 10 7.875 10H16a3.75 3.75 0 013.75 3.75v6.875z",fill:"#2E8CFF","fill-rule":"evenodd"})),this.opts.companionAllowedHosts=(0,r.cP)(this.opts.companionAllowedHosts,this.opts.companionUrl),this.provider=new r.Kq(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"zoom",pluginId:this.id,supportsRefreshToken:!1}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameZoom"),this.render=this.render.bind(this)}install(){this.view=new n.gi(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}render(t){return this.view.render(t)}}h.VERSION="3.2.1"}}]);