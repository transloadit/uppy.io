"use strict";(self.webpackChunkuppy_io=self.webpackChunkuppy_io||[]).push([[4389],{25641:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>c,default:()=>g,frontMatter:()=>d,metadata:()=>h,toc:()=>p});var s=n(74848),i=n(28453),l=n(11470),t=n(19365),r=n(65171);const d={slug:"/google-photos"},c="Google Photos",h={id:"sources/companion-plugins/google-photos",title:"Google Photos",description:"The @uppy/google-photos plugin lets users import files from their",source:"@site/docs/sources/companion-plugins/google-photos.mdx",sourceDirName:"sources/companion-plugins",slug:"/google-photos",permalink:"/docs/google-photos",draft:!1,unlisted:!1,editUrl:"https://github.com/transloadit/uppy/blob/main/docs/sources/companion-plugins/google-photos.mdx",tags:[],version:"current",frontMatter:{slug:"/google-photos"},sidebar:"tutorialSidebar",previous:{title:"Google Drive",permalink:"/docs/google-drive"},next:{title:"Instagram",permalink:"/docs/instagram"}},a={},p=[{value:"When should I use this?",id:"when-should-i-use-this",level:2},{value:"Use",id:"use",level:2},{value:"Use in Uppy",id:"use-in-uppy",level:3},{value:"Use in Companion",id:"use-in-companion",level:3},{value:"API",id:"api",level:2},{value:"Options",id:"options",level:3},{value:"<code>id</code>",id:"id",level:4},{value:"<code>title</code>",id:"title",level:4},{value:"<code>target</code>",id:"target",level:4},{value:"<code>companionUrl</code>",id:"companionurl",level:4},{value:"<code>companionHeaders</code>",id:"companionheaders",level:4},{value:"<code>companionAllowedHosts</code>",id:"companionallowedhosts",level:4},{value:"<code>companionCookiesRule</code>",id:"companioncookiesrule",level:4},{value:"<code>locale</code>",id:"locale",level:4}];function u(e){const o={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h1,{id:"google-photos",children:"Google Photos"}),"\n",(0,s.jsxs)(o.p,{children:["The ",(0,s.jsx)(o.code,{children:"@uppy/google-photos"})," plugin lets users import files from their\n",(0,s.jsx)(o.a,{href:"https://photos.google.com",children:"Google Photos"})," account."]}),"\n",(0,s.jsx)(o.admonition,{type:"tip",children:(0,s.jsxs)(o.p,{children:[(0,s.jsx)(o.a,{href:"/examples",children:"Try out the live example"})," or take it for a spin in\n",(0,s.jsx)(o.a,{href:"https://stackblitz.com/edit/vitejs-vite-zaqyaf?file=main.js",children:"StackBlitz"}),"."]})}),"\n",(0,s.jsx)(o.h2,{id:"when-should-i-use-this",children:"When should I use this?"}),"\n",(0,s.jsxs)(o.p,{children:["When you want to let users import files from their\n",(0,s.jsx)(o.a,{href:"https://photos.google.com",children:"Google Photos"})," account."]}),"\n",(0,s.jsxs)(o.p,{children:["A ",(0,s.jsx)(o.a,{href:"/docs/companion",children:"Companion"})," instance is required for the Google Photos plugin\nto work. Companion handles authentication with Google Photos, downloads the\nphotos/videos, and uploads them to the destination. This saves the user\nbandwidth, especially helpful if they are on a mobile connection."]}),"\n",(0,s.jsxs)(o.p,{children:["You can self-host Companion or get a hosted version with any\n",(0,s.jsx)(o.a,{href:"https://transloadit.com/pricing/",children:"Transloadit plan"}),"."]}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsx)(t.A,{value:"npm",label:"NPM",default:!0,children:(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-shell",children:"npm install @uppy/google-photos\n"})})}),(0,s.jsx)(t.A,{value:"yarn",label:"Yarn",children:(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-shell",children:"yarn add @uppy/google-photos\n"})})}),(0,s.jsx)(t.A,{value:"cdn",label:"CDN",children:(0,s.jsx)(r.A,{children:'\n        import { Uppy, GooglePhotos } from "{{UPPY_JS_URL}}"\n        const uppy = new Uppy()\n        uppy.use(GooglePhotos, {\n          // Options\n        })\n      '})})]}),"\n",(0,s.jsx)(o.h2,{id:"use",children:"Use"}),"\n",(0,s.jsx)(o.p,{children:"Using Google Photos requires setup in both Uppy and Companion."}),"\n",(0,s.jsx)(o.h3,{id:"use-in-uppy",children:"Use in Uppy"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",metastring:"{10-13} showLineNumbers",children:"import Uppy from '@uppy/core';\nimport Dashboard from '@uppy/dashboard';\nimport GooglePhotos from '@uppy/google-photos';\n\nimport '@uppy/core/dist/style.min.css';\nimport '@uppy/dashboard/dist/style.min.css';\n\nnew Uppy()\n\t.use(Dashboard, { inline: true, target: '#dashboard' })\n\t.use(GooglePhotos, {\n\t\ttarget: Dashboard,\n\t\tcompanionUrl: 'https://your-companion.com',\n\t});\n"})}),"\n",(0,s.jsx)(o.h3,{id:"use-in-companion",children:"Use in Companion"}),"\n",(0,s.jsxs)(o.p,{children:["To sign up for API keys, go to the\n",(0,s.jsx)(o.a,{href:"https://console.developers.google.com/",children:"Google Developer Console"}),"."]}),"\n",(0,s.jsx)(o.p,{children:"Create a project for your app if you don\u2019t have one yet."}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:["On the project\u2019s dashboard,\n",(0,s.jsx)(o.a,{href:"https://developers.google.com/photos",children:"enable the Google Photos API"}),"."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.a,{href:"https://developers.google.com/photos/library/guides/authorization",children:"Set up OAuth authorization"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(o.p,{children:["The app page has a ",(0,s.jsx)(o.code,{children:'"Redirect URIs"'})," field. Here, add:"]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{children:"https://$YOUR_COMPANION_HOST_NAME/googlephotos/redirect\n"})}),"\n",(0,s.jsx)(o.p,{children:"If you are using Transloadit hosted Companion:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{children:"https://api2.transloadit.com/companion/googlephotos/redirect\n"})}),"\n",(0,s.jsx)(o.p,{children:"Google will give you an OAuth client ID and client secret."}),"\n",(0,s.jsx)(o.p,{children:"Configure the Google key and secret in Companion. With the standalone Companion\nserver, specify environment variables:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-shell",children:'export COMPANION_GOOGLE_KEY="Google OAuth client ID"\nexport COMPANION_GOOGLE_SECRET="Google OAuth client secret"\n'})}),"\n",(0,s.jsx)(o.p,{children:"When using the Companion Node.js API, configure these options:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"companion.app({\n\tproviderOptions: {\n\t\tgooglephotos: {\n\t\t\tkey: 'Google OAuth client ID',\n\t\t\tsecret: 'Google OAuth client secret',\n\t\t},\n\t},\n});\n"})}),"\n",(0,s.jsx)(o.h2,{id:"api",children:"API"}),"\n",(0,s.jsx)(o.h3,{id:"options",children:"Options"}),"\n",(0,s.jsx)(o.h4,{id:"id",children:(0,s.jsx)(o.code,{children:"id"})}),"\n",(0,s.jsxs)(o.p,{children:["A unique identifier for this plugin (",(0,s.jsx)(o.code,{children:"string"}),", default: ",(0,s.jsx)(o.code,{children:"'GooglePhotos'"}),")."]}),"\n",(0,s.jsx)(o.h4,{id:"title",children:(0,s.jsx)(o.code,{children:"title"})}),"\n",(0,s.jsxs)(o.p,{children:["Title / name shown in the UI, such as Dashboard tabs (",(0,s.jsx)(o.code,{children:"string"}),", default:\n",(0,s.jsx)(o.code,{children:"'GooglePhotos'"}),")."]}),"\n",(0,s.jsx)(o.h4,{id:"target",children:(0,s.jsx)(o.code,{children:"target"})}),"\n",(0,s.jsxs)(o.p,{children:["DOM element, CSS selector, or plugin to place the drag and drop area into\n(",(0,s.jsx)(o.code,{children:"string"})," or ",(0,s.jsx)(o.code,{children:"Element"}),", default: ",(0,s.jsx)(o.code,{children:"null"}),")."]}),"\n",(0,s.jsx)(o.h4,{id:"companionurl",children:(0,s.jsx)(o.code,{children:"companionUrl"})}),"\n",(0,s.jsxs)(o.p,{children:["URL to a ",(0,s.jsx)(o.a,{href:"/docs/companion",children:"Companion"})," instance (",(0,s.jsx)(o.code,{children:"string"}),", default: ",(0,s.jsx)(o.code,{children:"null"}),")."]}),"\n",(0,s.jsx)(o.h4,{id:"companionheaders",children:(0,s.jsx)(o.code,{children:"companionHeaders"})}),"\n",(0,s.jsxs)(o.p,{children:["Custom headers that should be sent along to ",(0,s.jsx)(o.a,{href:"/docs/companion",children:"Companion"})," on\nevery request (",(0,s.jsx)(o.code,{children:"Object"}),", default: ",(0,s.jsx)(o.code,{children:"{}"}),")."]}),"\n",(0,s.jsx)(o.h4,{id:"companionallowedhosts",children:(0,s.jsx)(o.code,{children:"companionAllowedHosts"})}),"\n",(0,s.jsxs)(o.p,{children:["The valid and authorised URL(s) from which OAuth responses should be accepted\n(",(0,s.jsx)(o.code,{children:"string"})," or ",(0,s.jsx)(o.code,{children:"RegExp"})," or ",(0,s.jsx)(o.code,{children:"Array"}),", default: ",(0,s.jsx)(o.code,{children:"companionUrl"}),")."]}),"\n",(0,s.jsxs)(o.p,{children:["This value can be a ",(0,s.jsx)(o.code,{children:"string"}),", a ",(0,s.jsx)(o.code,{children:"RegExp"})," pattern, or an ",(0,s.jsx)(o.code,{children:"Array"})," of both. This is\nuseful when you have your ",(0,s.jsx)(o.a,{href:"/docs/companion",children:"Companion"})," running on several hosts.\nOtherwise, the default value should do fine."]}),"\n",(0,s.jsx)(o.h4,{id:"companioncookiesrule",children:(0,s.jsx)(o.code,{children:"companionCookiesRule"})}),"\n",(0,s.jsxs)(o.p,{children:["This option correlates to the\n",(0,s.jsx)(o.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Request/credentials",children:"RequestCredentials value"}),"\n(",(0,s.jsx)(o.code,{children:"string"}),", default: ",(0,s.jsx)(o.code,{children:"'same-origin'"}),")."]}),"\n",(0,s.jsxs)(o.p,{children:["This tells the plugin whether to send cookies to ",(0,s.jsx)(o.a,{href:"/docs/companion",children:"Companion"}),"."]}),"\n",(0,s.jsx)(o.h4,{id:"locale",children:(0,s.jsx)(o.code,{children:"locale"})}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"export default {\n\tstrings: {\n\t\tpluginNameGooglePhotos: 'GooglePhotos',\n\t},\n};\n"})})]})}function g(e={}){const{wrapper:o}={...(0,i.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},65171:(e,o,n)=>{n.d(o,{A:()=>c});var s=n(96540),i=n(21432),l=n(27293),t=n(4476),r=n(74848);const{rE:d}=t;function c(e){let{children:o,uppyCssName:n="uppy.min.css",uppyJsName:t="uppy.min.mjs"}=e,c=[];s.Children.toArray(o).forEach((e=>{c=[...c,...String(e).trim().split("\n").map((e=>e.trim()))]}));const h=c.map((e=>`  ${e}`)).join("\n"),a=`https://releases.transloadit.com/uppy/v${d}/${t}`,p=`\x3c!-- 1. Add CSS to \`<head>\` --\x3e\n<link href="https://releases.transloadit.com/uppy/v${d}/${n}" rel="stylesheet">\n\n\x3c!-- 2. Initialize --\x3e\n<div id="uppy"></div>\n\n<script type="module">\n${h.replace(/{{UPPY_JS_URL}}/g,a)}\n<\/script>\n`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.A,{type:"caution",children:[(0,r.jsx)("p",{children:"The bundle consists of most Uppy plugins, so this method is not recommended for production, as your users will have to download all plugins when you are likely using only a few."}),(0,r.jsx)("p",{children:"It can be useful to speed up your development environment, so don't hesitate to use it to get you started."})]}),(0,r.jsx)(i.A,{language:"html",children:p})]})}}}]);